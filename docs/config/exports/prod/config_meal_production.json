{
  "formKey": "Config: Meal Production",
  "generatedAt": "2026-01-28T23:20:40.920Z",
  "form": {
    "title": "Meal Production",
    "configSheet": "Config: Meal Production",
    "destinationTab": "Meal Production Data",
    "description": "Capture data of the Meal Production process",
    "appUrl": "https://script.google.com/macros/s/AKfycbzHNGgE2wOFt8_FEI_vs6f1WsnDmlcseUqI4XDUxeiDnrtEMV65un2yj_eQmSnFFsFfgA/exec?form=Config%3A%20Meal%20Production",
    "formId": "https://script.google.com/macros/s/AKfycbzHNGgE2wOFt8_FEI_vs6f1WsnDmlcseUqI4XDUxeiDnrtEMV65un2yj_eQmSnFFsFfgA/exec?form=Config%3A%20Meal%20Production",
    "rowIndex": 4,
    "followupConfig": {
      "pdfTemplateId": {
        "EN": "bundle:meal_production.pdf.html",
        "FR": "bundle:meal_production.pdf.html"
      },
      "pdfFolderId": "1Ktr2j-sL8lzrJxfGIWKZA09SCSiG6cHj",
      "pdfFileNameFieldId": "MP_ID",
      "emailTemplateId": {
        "EN": "1eqlnWV2DAqjKCOCwRLdatAOXMtbxGm-cKwoVgdQDdxk",
        "FR": "1eqlnWV2DAqjKCOCwRLdatAOXMtbxGm-cKwoVgdQDdxk"
      },
      "emailSubject": {
        "en": "Suivi de production des repas",
        "fr": "Suivi de production des repas",
        "nl": "Suivi de production des repas"
      },
      "emailFrom": "operations@communitykitchen.be",
      "emailFromName": "Community Kitchen Operations",
      "emailRecipients": [
        {
          "type": "dataSource",
          "recordFieldId": "MP_DISTRIBUTOR",
          "lookupField": "NICKNAME",
          "valueField": "DIST_EMAIL",
          "dataSource": {
            "id": "Distributor Data",
            "projection": [
              "NICKNAME",
              "DIST_EMAIL",
              "DIST_NAME"
            ]
          }
        }
      ],
      "emailCc": [
        "operations@communitykitchen.be"
      ],
      "emailBcc": [],
      "statusFieldId": "Status",
      "statusTransitions": {
        "onPdf": "PDF ready",
        "onEmail": "Emailed",
        "onClose": "Closed"
      }
    },
    "listViewTitle": {
      "en": "Recent activity",
      "fr": "Activité récente",
      "nl": "Recente activiteit"
    },
    "listViewPageSize": 7,
    "listViewPaginationControlsEnabled": false,
    "listViewHideHeaderRow": true,
    "listViewMetaColumns": [],
    "listViewColumns": [
      {
        "type": "rule",
        "fieldId": "action",
        "label": {
          "en": "Action",
          "fr": "Action",
          "nl": "Actie"
        },
        "cases": [
          {
            "text": {
              "en": "Warning",
              "fr": "Avertissement",
              "nl": "Waarschuwing"
            },
            "when": {
              "all": [
                {
                  "fieldId": "status",
                  "notEquals": "Closed"
                },
                {
                  "fieldId": "MP_PREP_DATE",
                  "isInPast": true
                }
              ]
            },
            "style": "warning",
            "icon": "warning",
            "hideText": true,
            "openView": "summary"
          },
          {
            "text": {
              "en": "Actions",
              "fr": "Actions",
              "nl": "Acties"
            },
            "hideText": true,
            "when": {
              "all": [
                {
                  "fieldId": "status",
                  "notEquals": "Closed"
                },
                {
                  "any": [
                    {
                      "fieldId": "MP_PREP_DATE",
                      "isToday": true
                    },
                    {
                      "fieldId": "MP_PREP_DATE",
                      "isInFuture": true
                    }
                  ]
                }
              ]
            },
            "actions": [
              {
                "text": {
                  "en": "View",
                  "fr": "Voir",
                  "nl": "Bekijken"
                },
                "hideText": true,
                "style": "link",
                "icon": "view",
                "openView": "summary"
              },
              {
                "text": {
                  "en": "Edit",
                  "fr": "Modifier",
                  "nl": "Bewerken"
                },
                "hideText": true,
                "style": "link",
                "icon": "edit",
                "openView": "form"
              }
            ]
          },
          {
            "text": {
              "en": "Actions",
              "fr": "Actions",
              "nl": "Acties"
            },
            "hideText": true,
            "when": {
              "fieldId": "status",
              "equals": "Closed"
            },
            "actions": [
              {
                "text": {
                  "en": "View",
                  "fr": "Voir",
                  "nl": "Bekijken"
                },
                "hideText": true,
                "style": "link",
                "icon": "view",
                "openView": "summary"
              }
            ]
          }
        ]
      }
    ],
    "listViewLegend": [
      {
        "icon": "edit",
        "text": {
          "en": "Edit (not allowed for past records)",
          "fr": "Modifier (non autorisé pour les enregistrements passés)",
          "nl": "Bewerken (niet toegestaan voor eerdere records)"
        }
      },
      {
        "icon": "view",
        "text": {
          "en": "View",
          "fr": "Voir",
          "nl": "Bekijken"
        }
      },
      {
        "icon": "warning",
        "text": {
          "en": "Past record incomplete or missing",
          "fr": "Enregistrement passé incomplet ou manquant",
          "nl": "Vorige record onvolledig of ontbrekend"
        }
      }
    ],
    "listViewSearch": {
      "mode": "date",
      "dateFieldId": "MP_PREP_DATE",
      "presetsTitle": {
        "en": "Search by customer:",
        "fr": "Rechercher par client:",
        "nl": "Zoeken op klant:"
      }
    },
    "autoSave": {
      "enabled": true,
      "debounceMs": 2000,
      "status": "In progress"
    },
    "dedupDeleteOnKeyChange": true,
    "summaryHtmlTemplateId": "bundle:meal_production.summary.html",
    "copyCurrentRecordEnabled": false,
    "copyCurrentRecordDropFields": [
      "MP_PREP_DATE"
    ],
    "copyCurrentRecordProfile": {
      "values": [
        "MP_DISTRIBUTOR",
        "MP_SERVICE"
      ],
      "lineItems": [
        {
          "groupId": "MP_MEALS_REQUEST",
          "fields": [
            "MEAL_TYPE",
            "ORD_QTY",
            "FINAL_QTY"
          ]
        }
      ]
    },
    "copyCurrentRecordDialog": {
      "title": {
        "en": "Copying record",
        "fr": "Copie de l'enregistrement",
        "nl": "Record kopiëren"
      },
      "message": {
        "en": "Select a future production date and verify the customer, service and ordered portions information. All changes will be auto-saved and a future dated record will be created.",
        "fr": "Sélectionnez une date de production future et vérifiez les informations client, service et portions demandées. Toutes les modifications seront enregistrées automatiquement et un enregistrement daté future sera créé.",
        "nl": "Selecteer een toekomstige productiedatum en controleer de klant-, service- en gevraagde portie-informatie. Alle wijzigingen worden automatisch opgeslagen en een toekomstige gedateerde record wordt aangemaakt."
      },
      "confirmLabel": {
        "en": "OK",
        "fr": "OK",
        "nl": "OK"
      },
      "showCancel": false,
      "showCloseButton": false,
      "dismissOnBackdrop": false
    },
    "createNewRecordEnabled": false,
    "actionBars": {
      "bottom": {
        "list": {
          "items": [
            "home"
          ]
        },
        "form": {
          "items": [
            "home",
            {
              "type": "system",
              "id": "summary",
              "summaryBehavior": "navigate"
            }
          ],
          "primary": [
            "submit"
          ]
        },
        "summary": {
          "items": [
            "home",
            {
              "type": "system",
              "id": "actions",
              "menuBehavior": "inline",
              "actions": [
                "openUrlField",
                "renderHtmlTemplate",
                "renderMarkdownTemplate"
              ]
            },
            {
              "type": "custom",
              "placements": [
                "summaryBar"
              ],
              "actions": [
                "updateRecord"
              ],
              "display": "inline"
            },
            "edit"
          ],
          "primary": [
            "submit"
          ]
        }
      },
      "system": {
        "home": {
          "hideWhenActive": true,
          "dedupIncompleteDialog": {
            "enabled": true,
            "title": {
              "en": "Incomplete meal production record"
            },
            "message": {
              "en": "A meal production record can only exist when customer, production date, and service are all filled in.\n\nLeaving this page now will permanently delete this record and all data and photos already entered.\n\nThis action cannot be undone."
            },
            "confirmLabel": {
              "en": "Continue — Delete the record"
            },
            "cancelLabel": {
              "en": "Cancel — Continue editing"
            },
            "showCancel": true,
            "showCloseButton": false,
            "dismissOnBackdrop": false,
            "deleteRecordOnConfirm": true,
            "primaryAction": "cancel"
          }
        },
        "gates": {
          "edit": [
            {
              "id": "ck-70.summary.pastNotClosed.hideEdit",
              "when": {
                "all": [
                  {
                    "fieldId": "__ckView",
                    "equals": [
                      "summary"
                    ]
                  },
                  {
                    "fieldId": "status",
                    "notEquals": "Closed"
                  },
                  {
                    "fieldId": "MP_PREP_DATE",
                    "isInPast": true
                  }
                ]
              },
              "hide": true
            }
          ],
          "submit": [
            {
              "id": "ck-70.deliveryForm.futurePrepDate.blockNext",
              "when": {
                "all": [
                  {
                    "fieldId": "__ckView",
                    "equals": [
                      "form"
                    ]
                  },
                  {
                    "fieldId": "__ckStep",
                    "equals": [
                      "deliveryForm"
                    ]
                  },
                  {
                    "fieldId": "MP_PREP_DATE",
                    "isInFuture": true
                  }
                ]
              },
              "disable": true,
              "dialogTrigger": "onEnable",
              "dialog": {
                "message": {
                  "en": "Ingredients receipt photo, food safety and portioning can only be recorded on the day of production.",
                  "fr": "La photo de réception des ingrédients, la sécurité alimentaire et le portionnement ne peuvent être enregistrés que le jour de la production.",
                  "nl": "Foto van ingrediëntenontvangst, voedselveiligheid en portionering kunnen alleen worden vastgelegd op de dag van productie."
                },
                "confirmLabel": {
                  "en": "OK",
                  "fr": "OK",
                  "nl": "OK"
                },
                "showCancel": false,
                "showCloseButton": false,
                "dismissOnBackdrop": false
              }
            },
            {
              "id": "ck-70.summary.closed.hideSubmit",
              "when": {
                "all": [
                  {
                    "fieldId": "__ckView",
                    "equals": [
                      "summary"
                    ]
                  },
                  {
                    "fieldId": "status",
                    "equals": [
                      "Closed"
                    ]
                  }
                ]
              },
              "hide": true
            }
          ],
          "copyCurrentRecord": [
            {
              "id": "ck-70.copy.onlyClosedSummary",
              "when": {
                "any": [
                  {
                    "not": {
                      "fieldId": "__ckView",
                      "equals": [
                        "summary"
                      ]
                    }
                  },
                  {
                    "not": {
                      "fieldId": "status",
                      "equals": [
                        "Closed"
                      ]
                    }
                  }
                ]
              },
              "hide": true
            }
          ]
        }
      }
    },
    "summaryButtonLabel": {
      "en": "Summary",
      "fr": "Summary",
      "nl": "Summary"
    },
    "appHeader": {
      "logoUrl": "https://drive.google.com/uc?export=view&id=1JUaqKbQbGwYIpOmpg1CBNJcOrFJv3EHr"
    },
    "groupBehavior": {
      "autoCollapseOnComplete": true,
      "autoOpenNextIncomplete": true,
      "autoScrollOnExpand": true
    },
    "submitValidation": {
      "enforceFieldOrder": true,
      "submitTopErrorMessage": {
        "en": "Please complete the highlighted fields.",
        "fr": "Veuillez compléter les champs en surbrillance.",
        "nl": "Vul de gemarkeerde velden in."
      }
    },
    "submissionConfirmationMessage": {
      "en": "This report confirms {MP_SERVICE} for {MP_DISTRIBUTOR} has been produced by {MP_COOK_NAME} on {MP_PREP_DATE}, in accordance with the Meal Production procedure and hygiene rules.",
      "fr": "Ce rapport confirme que le {MP_SERVICE} pour {MP_DISTRIBUTOR} a été produit par {MP_COOK_NAME} le {MP_PREP_DATE}, conformément à la procédure de production de repas et aux règles d'hygiène.",
      "nl": "Dit rapport bevestigt dat de {MP_SERVICE} voor {MP_DISTRIBUTOR} is uitgevoerd door {MP_COOK_NAME} op {MP_PREP_DATE}, conform de procedure voor het maken van maaltijden en de hygiëneregels."
    },
    "submissionConfirmationTitle": {
      "en": "Please confirm",
      "fr": "Veuillez confirmer",
      "nl": "Vergoeding bevestigen"
    },
    "submissionConfirmationConfirmLabel": {
      "en": "Yes, confirmed",
      "fr": "Oui, c'est confirmé",
      "nl": "Ja, recept activeren"
    },
    "submissionConfirmationCancelLabel": {
      "en": "No, continue editing",
      "fr": "Non, continuer la modification",
      "nl": "Nee, verder bewerken"
    },
    "steps": {
      "mode": "guided",
      "items": [
        {
          "id": "orderInfo",
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR"
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE"
            },
            {
              "kind": "question",
              "id": "MP_SERVICE"
            },
            {
              "kind": "question",
              "id": "MP_COOK_NAME"
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                {
                  "id": "MEAL_TYPE",
                  "renderAsLabel": true
                },
                "ORD_QTY"
              ],
              "collapsedFieldsInHeader": true,
              "displayMode": "inline"
            },
            {
              "kind": "question",
              "id": "MP_READY_FOR_PRODUCTION"
            }
          ],
          "label": {
            "en": "Order"
          },
          "helpText": {
            "en": "To create a meal production record, you must select a customer, a service, and a production date.\nUntil all three are selected, no record is created and no production data can be entered."
          },
          "navigation": {
            "forwardGate": "whenValid",
            "autoAdvance": "onValid"
          }
        },
        {
          "helpText": {
            "en": "Review if there is any entire dish leftover to be reheated before portioning. Use part dish leftover, if any, in today's dish. Cook only the stated number of portions as per the recipe. Follow the Instructions for cooking and portioning."
          },
          "id": "deliveryForm",
          "contextHeader": {
            "parts": [
              "MP_DISTRIBUTOR",
              "MP_SERVICE",
              "MP_PREP_DATE"
            ]
          },
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_SERVICE",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE",
              "renderAsLabel": true
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                {
                  "id": "MEAL_TYPE",
                  "renderAsLabel": true
                },
                {
                  "id": "ORD_QTY",
                  "renderAsLabel": true
                },
                {
                  "id": "LEFTOVER_INFO",
                  "renderAsLabel": true
                },
                "MP_IS_REHEAT",
                {
                  "id": "MP_TO_COOK",
                  "renderAsLabel": true
                }
              ],
              "readOnlyFields": [
                "MEAL_TYPE",
                "ORD_QTY"
              ],
              "rows": {
                "includeWhen": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                }
              },
              "collapsedFieldsInHeader": true,
              "displayMode": "inline",
              "groupOverride": {
                "totals": [
                  {
                    "type": "sum",
                    "fieldId": "ORD_QTY",
                    "label": {
                      "en": "Total ordered",
                      "fr": "Total commandé",
                      "nl": "Totaal besteld"
                    },
                    "decimalPlaces": 0
                  }
                ]
              },
              "rowFlow": {
                "mode": "progressive",
                "references": {
                  "cookRow": {
                    "groupId": "MP_TYPE_LI",
                    "match": "first",
                    "rowFilter": {
                      "includeWhen": {
                        "fieldId": "PREP_TYPE",
                        "equals": [
                          "Cook"
                        ]
                      }
                    }
                  },
                  "leftoverRows": {
                    "groupId": "MP_TYPE_LI",
                    "match": "any",
                    "rowFilter": {
                      "includeWhen": {
                        "any": [
                          {
                            "fieldId": "PREP_TYPE",
                            "equals": [
                              "Entire dish",
                              "Part dish",
                              ""
                            ]
                          },
                          {
                            "fieldId": "PREP_TYPE",
                            "isEmpty": true
                          }
                        ]
                      }
                    }
                  }
                },
                "output": {
                  "separator": " | ",
                  "hideEmpty": true,
                  "segments": [
                    {
                      "fieldRef": "MEAL_TYPE"
                    },
                    {
                      "fieldRef": "ORD_QTY"
                    },
                    {
                      "fieldRef": "LEFTOVER_INFO",
                      "showWhen": {
                        "fieldId": "MP_IS_REHEAT",
                        "equals": [
                          "No"
                        ]
                      },
                      "editAction": "editLeftovers"
                    },
                    {
                      "fieldRef": "LEFTOVER_INFO",
                      "showWhen": {
                        "fieldId": "MP_IS_REHEAT",
                        "equals": [
                          "Yes"
                        ]
                      },
                      "editActions": [
                        "openLeftoversOverlay",
                        "clearLeftovers"
                      ]
                    },
                    {
                      "fieldRef": "MP_TO_COOK",
                      "label": {
                        "en": "To cook"
                      },
                      "showWhen": {
                        "fieldId": "MP_TO_COOK",
                        "greaterThan": 0
                      }
                    }
                  ]
                },
                "prompts": [
                  {
                    "id": "leftoversUsed",
                    "fieldRef": "MP_IS_REHEAT",
                    "hideWhenFilled": true
                  },
                  {
                    "id": "leftoversInfo",
                    "fieldRef": "LEFTOVER_INFO",
                    "showWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "Yes"
                      ]
                    },
                    "completedWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "Yes"
                      ]
                    },
                    "onCompleteActions": [
                      "openLeftoversOverlay"
                    ],
                    "hideWhenFilled": true
                  },
                  {
                    "id": "recipe",
                    "fieldRef": "cookRow.RECIPE",
                    "showWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "No",
                        "Yes"
                      ]
                    },
                    "keepVisibleWhenFilled": true,
                    "actions": [
                      {
                        "id": "openCookOverlay",
                        "position": "end"
                      }
                    ],
                    "actionsLayout": "inline",
                    "input": {
                      "labelLayout": "inline"
                    }
                  }
                ],
                "actions": [
                  {
                    "id": "openCookOverlay",
                    "label": {
                      "en": "View/Edit"
                    },
                    "variant": "button",
                    "effects": [
                      {
                        "type": "openOverlay",
                        "groupId": "MP_TYPE_LI",
                        "rowFilter": {
                          "includeWhen": {
                            "fieldId": "PREP_TYPE",
                            "equals": [
                              "Cook"
                            ]
                          }
                        },
                        "overlayContextHeader": {
                          "fields": [
                            {
                              "fieldRef": "MEAL_TYPE",
                              "label": {
                                "en": "{{value}} -"
                              }
                            },
                            {
                              "fieldRef": "MP_TO_COOK",
                              "label": {
                                "en": "{{value}} portions to cook\nRecipe:"
                              }
                            },
                            {
                              "fieldRef": "cookRow.RECIPE",
                              "label": {
                                "en": "{{value}}"
                              }
                            }
                          ]
                        },
                        "label": {
                          "en": "Check the ingredients for the selected recipe. Tap 'Edit ingredients' to add, change quantity or remove ingredients to reflect what is really used to cook today's dish.",
                          "fr": "Vérifiez les ingrédients de la recette sélectionnée. Appuyez sur « Modifier les ingrédients » pour ajouter, changer la quantité ou supprimer des ingrédients afin de refléter ce qui est réellement utilisé pour cuisiner le plat d'aujourd'hui.",
                          "nl": "Controleer de ingrediënten voor het geselecteerde recept. Tik op 'Ingrediënten bewerken' om ingrediënten toe te voegen, hoeveelheden aan te passen of ingrediënten te verwijderen zodat het overeenkomt met wat je vandaag echt gebruikt om te koken."
                        },
                        "closeButtonLabel": {
                          "en": "Back to Production"
                        },
                        "closeConfirm": {
                          "allowCloseFromEdit": true,
                          "cases": [
                            {
                              "when": {
                                "not": {
                                  "lineItems": {
                                    "groupId": "MP_MEALS_REQUEST",
                                    "subGroupPath": [
                                      "MP_TYPE_LI",
                                      "MP_INGREDIENTS_LI"
                                    ],
                                    "parentWhen": {
                                      "fieldId": "PREP_TYPE",
                                      "equals": [
                                        "Cook"
                                      ]
                                    },
                                    "match": "any"
                                  }
                                }
                              },
                              "title": {
                                "en": "Missing ingredients"
                              },
                              "body": {
                                "en": "No ingredients have been added. Do you want to exit?"
                              },
                              "confirmLabel": {
                                "en": "Yes"
                              },
                              "cancelLabel": {
                                "en": "No, continue editing"
                              },
                              "validateOnReopen": true
                            },
                            {
                              "when": {
                                "lineItems": {
                                  "groupId": "MP_MEALS_REQUEST",
                                  "subGroupPath": [
                                    "MP_TYPE_LI",
                                    "MP_INGREDIENTS_LI"
                                  ],
                                  "parentWhen": {
                                    "fieldId": "PREP_TYPE",
                                    "equals": [
                                      "Cook"
                                    ]
                                  },
                                  "when": {
                                    "all": [
                                      {
                                        "fieldId": "ING",
                                        "notEmpty": true
                                      },
                                      {
                                        "any": [
                                          {
                                            "fieldId": "QTY",
                                            "notEmpty": false
                                          },
                                          {
                                            "fieldId": "UNIT",
                                            "notEmpty": false
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "match": "any"
                                }
                              },
                              "title": {
                                "en": "Missing quantity/unit"
                              },
                              "body": {
                                "en": "One or more ingredients do not have a quantity and/or unit. If you close this page now, the ingredient selection will be lost."
                              },
                              "confirmLabel": {
                                "en": "Close, data will be lost"
                              },
                              "cancelLabel": {
                                "en": "Continue editing"
                              },
                              "highlightFirstError": true,
                              "validateOnReopen": true,
                              "onConfirmEffects": [
                                {
                                  "type": "deleteLineItems",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "rowFilter": {
                                    "includeWhen": {
                                      "all": [
                                        {
                                          "fieldId": "ING",
                                          "notEmpty": true
                                        },
                                        {
                                          "any": [
                                            {
                                              "fieldId": "QTY",
                                              "notEmpty": false
                                            },
                                            {
                                              "fieldId": "UNIT",
                                              "notEmpty": false
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        "groupOverride": {
                          "id": "MP_TYPE_LI",
                          "minRows": 0,
                          "maxRows": 1,
                          "ui": {
                            "addButtonPlacement": "hidden",
                            "overlayDetail": {
                              "header": {
                                "tableColumns": []
                              },
                              "rowActions": {
                                "editPlacement": "hidden",
                                "viewPlacement": "hidden"
                              }
                            }
                          },
                          "fields": [
                            {
                              "labelEn": "To cook",
                              "labelFr": "À cuisiner",
                              "labelNl": "A koken",
                              "id": "PREP_QTY",
                              "type": "NUMBER",
                              "required": true,
                              "readOnly": true
                            },
                            {
                              "labelEn": "Select Recipe",
                              "labelFr": "Sélectionner la recette",
                              "labelNl": "Selecteer de recept",
                              "id": "RECIPE",
                              "type": "CHOICE",
                              "required": true,
                              "dataSource": {
                                "id": "Recipes Data",
                                "projection": [
                                  "QFTD5RD2EM",
                                  "NUM_PORTIONS",
                                  "DISH_TYPE",
                                  "Q65ILNUSGL",
                                  "REC_INST"
                                ],
                                "mode": "options",
                                "tooltipField": "REC_INST",
                                "tooltipLabel": {
                                  "en": "Instructions",
                                  "fr": "Instructions",
                                  "nl": "Instructies"
                                },
                                "statusAllowList": [
                                  "Active"
                                ]
                              },
                              "optionFilter": {
                                "dependsOn": "MEAL_TYPE",
                                "dataSourceField": "DISH_TYPE",
                                "dataSourceDelimiter": ",",
                                "bypassValues": [
                                  "No-salt"
                                ]
                              },
                              "selectionEffects": [
                                {
                                  "type": "addLineItemsFromDataSource",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "targetPath": "MP_INGREDIENTS_LI",
                                  "lookupField": "QFTD5RD2EM",
                                  "dataField": "Q65ILNUSGL",
                                  "rowMultiplierFieldId": "PREP_QTY",
                                  "dataSourceMultiplierField": "NUM_PORTIONS",
                                  "scaleNumericFields": [
                                    "QTY"
                                  ],
                                  "preserveManualRows": false,
                                  "lineItemMapping": {
                                    "ING": "ING",
                                    "QTY": "QTY",
                                    "UNIT": "UNIT"
                                  },
                                  "aggregateBy": [
                                    "ING",
                                    "UNIT",
                                    "RECIPE"
                                  ],
                                  "aggregateNumericFields": [
                                    "QTY"
                                  ]
                                },
                                {
                                  "type": "setValue",
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "value": false
                                }
                              ],
                              "changeDialog": {
                                "when": {
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "equals": true
                                },
                                "title": "Change recipe?",
                                "message": "You have modified the ingredients for this recipe. If you change the recipe now, all ingredient changes will be lost. Do you want to continue?",
                                "cancelLabel": "Cancel",
                                "confirmLabel": "Change recipe",
                                "primaryAction": "cancel"
                              },
                              "ui": {
                                "control": "select"
                              }
                            }
                          ],
                          "label": {
                            "en": "Cook",
                            "fr": "Cuisiner",
                            "nl": "Koken"
                          }
                        }
                      }
                    ]
                  },
                  {
                    "id": "openLeftoversOverlay",
                    "label": {
                      "en": "View/edit"
                    },
                    "variant": "button",
                    "effects": [
                      {
                        "type": "openOverlay",
                        "groupId": "MP_TYPE_LI",
                        "rowFilter": {
                          "includeWhen": {
                            "any": [
                              {
                                "equals": [
                                  "Entire dish",
                                  "Part dish"
                                ],
                                "fieldId": "PREP_TYPE"
                              },
                              {
                                "isEmpty": true,
                                "fieldId": "PREP_TYPE"
                              }
                            ]
                          }
                        },
                        "hideInlineSubgroups": true,
                        "closeButtonLabel": {
                          "en": "Back to Production",
                          "fr": "Retour à la production",
                          "nl": "Terug naar productie"
                        },
                        "overlayContextHeader": {
                          "fields": [
                            {
                              "fieldRef": "MP_DISTRIBUTOR",
                              "label": {
                                "en": "{{value}}"
                              }
                            },
                            {
                              "fieldRef": "MP_SERVICE",
                              "label": {
                                "en": "| {{value}}"
                              }
                            },
                            {
                              "fieldRef": "MP_PREP_DATE",
                              "label": {
                                "en": "| {{value}}"
                              }
                            },
                            {
                              "fieldRef": "MEAL_TYPE",
                              "label": {
                                "en": "\nLeftovers for {{value}}"
                              }
                            },
                            {
                              "fieldRef": "ORD_QTY",
                              "label": {
                                "en": "| {{value}} ordered portions"
                              }
                            }
                          ]
                        },
                        "groupOverride": {
                          "id": "MP_TYPE_LI",
                          "minRows": 1,
                          "maxRows": 50,
                          "fields": [
                            {
                              "labelEn": "Type",
                              "labelFr": "Type",
                              "labelNl": "Type",
                              "id": "PREP_TYPE",
                              "type": "CHOICE",
                              "options": [
                                "Entire dish",
                                "Part dish"
                              ],
                              "optionsFr": [
                                "Plat entier",
                                "Plat partiel"
                              ],
                              "optionsNl": [
                                "Volledig gerecht",
                                "Deel gerecht"
                              ],
                              "defaultValue": "Entire dish",
                              "ui": {
                                "control": "select"
                              }
                            },
                            {
                              "labelEn": "Recipe",
                              "labelFr": "Recette",
                              "labelNl": "Recept",
                              "id": "RECIPE",
                              "type": "CHOICE",
                              "required": true,
                              "visibility": {
                                "hideWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": "Part dish"
                                }
                              },
                              "dataSource": {
                                "id": "Recipes Data",
                                "projection": [
                                  "QFTD5RD2EM",
                                  "NUM_PORTIONS",
                                  "DISH_TYPE",
                                  "Q65ILNUSGL",
                                  "REC_INST"
                                ],
                                "mode": "options",
                                "tooltipField": "REC_INST",
                                "tooltipLabel": {
                                  "en": "Instructions",
                                  "fr": "Instructions",
                                  "nl": "Instructies"
                                },
                                "statusAllowList": [
                                  "Active"
                                ]
                              },
                              "optionFilter": {
                                "dependsOn": "MEAL_TYPE",
                                "dataSourceField": "DISH_TYPE",
                                "dataSourceDelimiter": ",",
                                "bypassValues": [
                                  "No-salt"
                                ]
                              },
                              "selectionEffects": [
                                {
                                  "type": "addLineItemsFromDataSource",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "targetPath": "MP_INGREDIENTS_LI",
                                  "lookupField": "QFTD5RD2EM",
                                  "dataField": "Q65ILNUSGL",
                                  "rowMultiplierFieldId": "PREP_QTY",
                                  "dataSourceMultiplierField": "NUM_PORTIONS",
                                  "scaleNumericFields": [
                                    "QTY"
                                  ],
                                  "preserveManualRows": false,
                                  "lineItemMapping": {
                                    "ING": "ING",
                                    "QTY": "QTY",
                                    "UNIT": "UNIT"
                                  },
                                  "aggregateBy": [
                                    "ING",
                                    "UNIT",
                                    "RECIPE"
                                  ],
                                  "aggregateNumericFields": [
                                    "QTY"
                                  ]
                                },
                                {
                                  "type": "setValue",
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "value": false
                                }
                              ],
                              "changeDialog": {
                                "when": {
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "equals": true
                                },
                                "title": "Change recipe?",
                                "message": "You have modified the ingredients for this recipe. If you change the recipe now, all ingredient changes will be lost. Do you want to continue?",
                                "cancelLabel": "Cancel",
                                "confirmLabel": "Change recipe",
                                "primaryAction": "cancel"
                              },
                              "ui": {
                                "control": "select",
                                "hideLabel": true
                              }
                            },
                            {
                              "labelEn": "How many portions will leftover yield?",
                              "labelFr": "Combien de portions la restauration donnera-t-elle?",
                              "labelNl": "Hoeveel porties zal de restauro geven?",
                              "id": "PREP_QTY",
                              "type": "NUMBER",
                              "required": true,
                              "visibility": {
                                "hideWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": "Part dish"
                                }
                              }
                            }
                          ]
                        },
                        "rowFlow": {
                          "mode": "progressive",
                          "references": {
                            "ingredientsRow": {
                              "groupId": "MP_INGREDIENTS_LI",
                              "match": "any"
                            }
                          },
                          "output": {
                            "separator": " | ",
                            "hideEmpty": true,
                            "segments": [
                              {
                                "fieldRef": "PREP_TYPE",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Part dish"
                                  ]
                                },
                                "format": {
                                  "type": "text"
                                },
                                "label": {
                                  "en": "{{value}} leftover"
                                },
                                "editAction": "editLeftoverIngredientsPart"
                              },
                              {
                                "fieldRef": "RECIPE",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Entire dish"
                                  ]
                                },
                                "editAction": "editLeftoverIngredientsEntire"
                              },
                              {
                                "fieldRef": "PREP_QTY",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Entire dish"
                                  ]
                                },
                                "format": {
                                  "type": "text"
                                },
                                "label": {
                                  "en": "Yields {{value}} portions",
                                  "fr": "Donne {{value}} portions",
                                  "nl": "Geeft {{value}} porties"
                                }
                              }
                            ],
                            "actions": [
                              {
                                "id": "addLeftover",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Entire dish",
                                    "Part dish"
                                  ]
                                },
                                "position": "end"
                              },
                              {
                                "id": "removeLeftover",
                                "position": "end",
                                "scope": "row",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "notEmpty": true
                                }
                              }
                            ],
                            "actionsLayout": "inline",
                            "actionsScope": "group"
                          },
                          "prompts": [
                            {
                              "id": "leftoverType",
                              "fieldRef": "PREP_TYPE",
                              "hideWhenFilled": true,
                              "input": {
                                "labelLayout": "inline",
                                "label": {
                                  "en": "What type of leftover will be used?",
                                  "fr": "Quel type de restauration sera utilisé?",
                                  "nl": "Welk type restauro zal worden gebruikt?"
                                }
                              },
                              "showWhen": {
                                "fieldId": "MP_IS_REHEAT",
                                "equals": [
                                  "Yes"
                                ]
                              }
                            },
                            {
                              "id": "leftoverRecipe",
                              "fieldRef": "RECIPE",
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Entire dish"
                                ]
                              },
                              "hideWhenFilled": true,
                              "input": {
                                "labelLayout": "inline",
                                "label": {
                                  "en": "Select Recipe",
                                  "fr": "Sélectionner la recette",
                                  "nl": "Selecteer de recept"
                                }
                              }
                            },
                            {
                              "id": "leftoverQty",
                              "fieldRef": "PREP_QTY",
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Entire dish"
                                ]
                              },
                              "hideWhenFilled": true,
                              "input": {
                                "labelLayout": "inline",
                                "label": {
                                  "en": "How many portions will leftover yield?\nThis number reduces the portions to cook. Enter 0 if leftover will be combined with today's dish.",
                                  "fr": "Combien de portions la restauration donnera-t-elle?\nCe nombre réduit les portions à cuisiner. Entrez 0 si la restauration sera combinée avec le plat d'aujourd'hui.",
                                  "nl": "Hoeveel porties zal de restauro geven?\nDit aantal vermindert de porties te koken. Voer 0 in als de restauro wordt gecombineerd met de huidige maaltijd."
                                }
                              }
                            },
                            {
                              "id": "ingredientsSelector",
                              "input": {
                                "kind": "selectorOverlay",
                                "targetRef": "ingredientsRow",
                                "label": {
                                  "en": "Select the ingredient(s) representing the leftover that will be added to today's meal.",
                                  "fr": "Sélectionnez le(s) ingrédient(s) représentant la restauration qui sera ajoutée au plat d'aujourd'hui.",
                                  "nl": "Selecteer het/de ingrediënt(en) die de restauro voorstellen die aan de maaltijd van vandaag wordt toegevoegd."
                                },
                                "placeholder": {
                                  "en": "Search leftover ingredients",
                                  "fr": "Rechercher les ingrédients de la restauration",
                                  "nl": "Ingrediënten voor restauro zoeken"
                                },
                                "labelLayout": "stacked",
                                "closeButtonLabel": {
                                  "en": "Back",
                                  "fr": "Retour",
                                  "nl": "Terug"
                                },
                                "groupOverride": {
                                  "minRows": 0,
                                  "maxRows": 200,
                                  "addOverlay": {
                                    "title": {
                                      "en": "Select the ingredient(s) representing the leftover that will be added to today's meal.",
                                      "fr": "Sélectionnez le(s) ingrédient(s) représentant la restauration qui sera ajoutée au plat d'aujourd'hui.",
                                      "nl": "Selecteer het/de ingrediënt(en) die de restauro voorstellen die aan de maaltijd van vandaag wordt toegevoegd."
                                    },
                                    "searchHelperText": {
                                      "en": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                      "fr": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                      "nl": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia)."
                                    },
                                    "placeholder": {
                                      "en": "Search leftover ingredients",
                                      "fr": "Rechercher les ingrédients de la restauration",
                                      "nl": "Ingrediënten voor restauro zoeken"
                                    }
                                  },
                                  "ui": {
                                    "tableColumns": [
                                      "ING"
                                    ],
                                    "tableColumnWidths": {
                                      "ING": "100%",
                                      "__remove": "44px"
                                    }
                                  }
                                }
                              },
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Part dish"
                                ]
                              }
                            }
                          ],
                          "actions": [
                            {
                              "id": "editLeftoverIngredientsPart",
                              "variant": "button",
                              "tone": "secondary",
                              "label": {
                                "en": "View/Edit ingredients",
                                "fr": "Voir/Modifier les ingrédients",
                                "nl": "Bekijken/Bewerken van ingrediënten"
                              },
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Part dish"
                                ]
                              },
                              "effects": [
                                {
                                  "type": "openOverlay",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "overlayHelperText": {
                                    "fields": [
                                      {
                                        "fieldRef": "PREP_TYPE",
                                        "label": {
                                          "en": "{{value}}: Add ingredients from previously cooked leftovers that will be added to today's cooked meal",
                                          "fr": "{{value}}: Ajouter les ingrédients des restes précédemment cuisinés qui seront ajoutés au plat cuisiné d'aujourd'hui",
                                          "nl": "{{value}}: Voeg ingrediënten toe van eerder gekookte resten die aan de huidige gekookte maaltijd worden toegevoegd"
                                        }
                                      }
                                    ]
                                  },
                                  "closeButtonLabel": {
                                    "en": "Back",
                                    "fr": "Retour",
                                    "nl": "Terug"
                                  },
                                  "groupOverride": {
                                    "minRows": 0,
                                    "maxRows": 200,
                                    "addOverlay": {
                                      "title": {
                                        "en": "Select the ingredient(s) representing the leftover that will be added to today's meal.",
                                        "fr": "Sélectionnez le(s) ingrédient(s) représentant la restauration qui sera ajoutée au plat d'aujourd'hui.",
                                        "nl": "Selecteer het/de ingrediënt(en) die de restauro voorstellen die aan de maaltijd van vandaag wordt toegevoegd."
                                      },
                                      "searchHelperText": {
                                        "en": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                        "fr": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                        "nl": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia)."
                                      },
                                      "placeholder": {
                                        "en": "Search leftover ingredients",
                                        "fr": "Rechercher les ingrédients de la restauration",
                                        "nl": "Ingrediënten voor restauro zoeken"
                                      }
                                    },
                                    "ui": {
                                      "tableColumns": [
                                        "ING"
                                      ],
                                      "tableColumnWidths": {
                                        "ING": "100%",
                                        "__remove": "44px"
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "id": "editLeftoverIngredientsEntire",
                              "variant": "button",
                              "tone": "secondary",
                              "label": {
                                "en": "View/Edit ingredients",
                                "fr": "Voir/Modifier les ingrédients",
                                "nl": "Bekijken/Bewerken van ingrediënten"
                              },
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Entire dish"
                                ]
                              },
                              "effects": [
                                {
                                  "type": "openOverlay",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "overlayHelperText": {
                                    "fields": [
                                      {
                                        "fieldRef": "PREP_TYPE",
                                        "label": {
                                          "en": "{{value}}: Review and edit below list of ingredients by removing or adding to reflect the correct ingredients that were used to cook the leftover dish",
                                          "fr": "{{value}}: Revoir et modifier la liste ci-dessous en ajoutant ou en supprimant pour refléter les ingrédients corrects qui ont été utilisés pour cuisiner la restauration",
                                          "nl": "{{value}}: Bekijk en bewerk de lijst hieronder door ingrediënten toe te voegen of te verwijderen om de juiste ingrediënten weer te geven die zijn gebruikt om de restauro te koken"
                                        }
                                      }
                                    ]
                                  },
                                  "closeButtonLabel": {
                                    "en": "Back",
                                    "fr": "Retour",
                                    "nl": "Terug"
                                  },
                                  "groupOverride": {
                                    "minRows": 0,
                                    "maxRows": 200,
                                    "addOverlay": {
                                      "title": {
                                        "en": "Select the ingredient(s) that were used to cook the leftover dish but are missing from the original recipe.",
                                        "fr": "Sélectionnez le(s) ingrédient(s) utilisés pour cuisiner la restauration mais manquants dans la recette originale.",
                                        "nl": "Selecteer het/de ingrediënt(en) die zijn gebruikt om de restauro te koken maar ontbreken in het originele recept."
                                      },
                                      "placeholder": {
                                        "en": "Search leftover ingredients",
                                        "fr": "Rechercher les ingrédients de la restauration",
                                        "nl": "Ingrediënten voor restauro zoeken"
                                      }
                                    },
                                    "ui": {
                                      "tableColumns": [
                                        "ING"
                                      ],
                                      "tableColumnWidths": {
                                        "ING": "100%",
                                        "__remove": "44px"
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "id": "addLeftover",
                              "label": {
                                "en": "+ Add leftover",
                                "fr": "+ une autre restauration",
                                "nl": "+ een andere restauro"
                              },
                              "variant": "button",
                              "tone": "secondary",
                              "effects": [
                                {
                                  "type": "addLineItems"
                                }
                              ]
                            },
                            {
                              "id": "removeLeftover",
                              "icon": "remove",
                              "variant": "icon",
                              "effects": [
                                {
                                  "type": "deleteRow"
                                }
                              ]
                            }
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "id": "editLeftovers",
                    "icon": "edit",
                    "variant": "icon",
                    "showWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "No"
                      ]
                    },
                    "confirm": {
                      "title": {
                        "en": "Change leftovers?"
                      },
                      "body": {
                        "en": "Changing this will clear the selected recipe. Continue?"
                      },
                      "confirmLabel": {
                        "en": "Continue"
                      },
                      "cancelLabel": {
                        "en": "Cancel"
                      },
                      "showCancel": true
                    },
                    "effects": [
                      {
                        "type": "setValue",
                        "fieldRef": "MP_IS_REHEAT",
                        "value": null
                      },
                      {
                        "type": "setValue",
                        "fieldRef": "LEFTOVER_INFO",
                        "value": null
                      },
                      {
                        "type": "deleteLineItems",
                        "targetRef": "cookRow"
                      }
                    ]
                  },
                  {
                    "id": "clearLeftovers",
                    "icon": "remove",
                    "variant": "icon",
                    "showWhen": {
                      "all": [
                        {
                          "fieldId": "MP_IS_REHEAT",
                          "equals": [
                            "Yes"
                          ]
                        },
                        {
                          "lineItems": {
                            "groupId": "MP_MEALS_REQUEST",
                            "subGroupId": "MP_TYPE_LI",
                            "match": "any",
                            "when": {
                              "fieldId": "PREP_TYPE",
                              "equals": [
                                "Entire dish",
                                "Part dish",
                                ""
                              ]
                            }
                          }
                        }
                      ]
                    },
                    "confirm": {
                      "title": {
                        "en": "Remove leftover information?"
                      },
                      "body": {
                        "en": "This action will delete all leftover details you entered. Do you want to continue?"
                      },
                      "confirmLabel": {
                        "en": "Remove leftover"
                      },
                      "cancelLabel": {
                        "en": "Keep leftover"
                      }
                    },
                    "effects": [
                      {
                        "type": "deleteLineItems",
                        "targetRef": "leftoverRows"
                      },
                      {
                        "type": "setValue",
                        "fieldRef": "MP_IS_REHEAT",
                        "value": "No"
                      },
                      {
                        "type": "setValue",
                        "fieldRef": "LEFTOVER_INFO",
                        "value": "No leftover"
                      }
                    ]
                  }
                ]
              },
              "subGroups": {
                "displayMode": "overlay",
                "include": [
                  {
                    "id": "MP_TYPE_LI",
                    "displayMode": "overlay"
                  }
                ]
              }
            },
            {
              "kind": "question",
              "id": "ING_PREVIEW"
            },
            {
              "kind": "question",
              "id": "ING_EVD"
            }
          ],
          "label": {
            "en": "Production",
            "fr": "Formulaire de production",
            "nl": "Productieformulier"
          },
          "navigation": {
            "autoAdvance": "off"
          },
          "render": {
            "subGroups": {
              "mode": "overlay"
            }
          }
        },
        {
          "id": "foodSafety",
          "contextHeader": {
            "parts": [
              "MP_DISTRIBUTOR",
              "MP_SERVICE",
              "MP_PREP_DATE"
            ]
          },
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_SERVICE",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE",
              "renderAsLabel": true
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                {
                  "id": "MEAL_TYPE",
                  "renderAsLabel": true
                },
                "MP_COOK_TEMP",
                "TEMP_EVD"
              ],
              "readOnlyFields": [
                "MEAL_TYPE",
                "ORD_QTY"
              ],
              "rows": {
                "includeWhen": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                }
              },
              "collapsedFieldsInHeader": true,
              "displayMode": "inline"
            }
          ],
          "label": {
            "en": "Food safety",
            "fr": "Sécurité alimentaire",
            "nl": "Voedselveiligheid"
          },
          "navigation": {
            "forwardGate": "whenValid",
            "autoAdvance": "onValid"
          },
          "helpText": {
            "en": "Confirm that all cooking pots reached at least 63°C and add one photo per pot for each dietary type, including reheated leftover full dish.",
            "fr": "Confirmez que toutes les marmites ont atteint au moins 63°C et ajoutez une photo par marmite pour chaque type de régime, y compris les restes réchauffés du plat complet.",
            "nl": "Bevestig dat alle kookpotten minstens 63°C hebben bereikt en voeg één foto per pot toe voor elk dieettype, inclusief opgewarmde restanten van het volledige gerecht."
          }
        },
        {
          "id": "portioning",
          "contextHeader": {
            "parts": [
              "MP_DISTRIBUTOR",
              "MP_SERVICE",
              "MP_PREP_DATE"
            ]
          },
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_SERVICE",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE",
              "renderAsLabel": true
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                "MEAL_TYPE",
                "ORD_QTY",
                "FINAL_QTY"
              ],
              "readOnlyFields": [
                "MEAL_TYPE",
                "ORD_QTY"
              ],
              "rows": {
                "includeWhen": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                }
              },
              "collapsedFieldsInHeader": true,
              "displayMode": "inline"
            },
            {
              "kind": "question",
              "id": "MP_NOTES"
            },
            {
              "kind": "question",
              "id": "MP_COOK_NAME"
            },
            {
              "kind": "question",
              "id": "MP_VOLUNTEER"
            }
          ],
          "label": {
            "en": "Portioning",
            "fr": "Portionnement",
            "nl": "Portionering"
          },
          "helpText": {
            "en": "Update the number of portions delivered to reflect reality. You must deliver at least the ordered number of portions.",
            "fr": "Mettez à jour le nombre de portions livrées pour refléter la réalité. Vous devez livrer au moins le nombre de portions demandées.",
            "nl": "Werk het aantal geleverde porties bij zodat het de werkelijkheid weerspiegelt. Je moet minstens het gevraagde aantal porties leveren."
          }
        }
      ],
      "stateFields": {
        "prefix": "__ckStep"
      },
      "defaultForwardGate": "whenValid",
      "defaultAutoAdvance": "onValid",
      "stepSubmitLabel": {
        "en": "Next",
        "fr": "Suivant",
        "nl": "Volgende"
      },
      "backButtonLabel": {
        "en": "Back",
        "fr": "Retour",
        "nl": "Terug"
      },
      "showBackButton": true
    },
    "portraitOnly": true,
    "dedupDialog": {
      "title": {
        "en": "Creating duplicate record for the same customer, service and date is not allowed."
      },
      "intro": {
        "en": "A meal production record already exists for:"
      },
      "outro": {
        "en": "What do you want to do?"
      },
      "changeLabel": {
        "en": "Change customer, service or date"
      },
      "openLabel": {
        "en": "Open existing record"
      }
    },
    "languages": [
      "EN",
      "FR",
      "NL"
    ],
    "defaultLanguage": "EN",
    "languageSelectorEnabled": true,
    "auditLogging": {
      "enabled": true,
      "statuses": [
        "In production"
      ],
      "snapshotButtons": [
        "MP_READY_FOR_PRODUCTION"
      ]
    },
    "fieldDisableRules": [
      {
        "id": "ready-for-production-order-lock",
        "when": {
          "all": [
            {
              "fieldId": "status",
              "equals": "In production"
            },
            {
              "fieldId": "__ckStep",
              "equals": "orderInfo"
            }
          ]
        },
        "bypassFields": [],
        "unlockStatus": "In progress"
      }
    ],
    "listViewRowClickEnabled": false
  },
  "questions": [
    {
      "id": "MP_ID",
      "type": "TEXT",
      "qEn": "Meal Production ID",
      "qFr": "Meal Production ID",
      "qNl": "Meal Production ID",
      "required": true,
      "ui": {
        "summaryVisibility": "always"
      },
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "fieldId": "NEVER_SHOW",
          "equals": "1"
        }
      },
      "autoIncrement": {
        "prefix": "MP-AA",
        "padLength": 6
      }
    },
    {
      "id": "MP_DISTRIBUTOR",
      "type": "CHOICE",
      "qEn": "Customer",
      "qFr": "Client",
      "qNl": "Klant",
      "required": true,
      "ui": {
        "labelLayout": "inline"
      },
      "listView": true,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "dataSource": {
        "id": "Distributor Data",
        "mode": "options",
        "statusAllowList": [
          "Active"
        ],
        "projection": [
          "DIST_NAME",
          "NICKNAME",
          "DIST_EMAIL",
          "DIST_PH",
          "DIST_ADDR_1",
          "DIST_ADDR_2",
          "DIST_CITY",
          "DIST_REGION",
          "DIST_COUNTRY",
          "DIST_POST_CODE"
        ],
        "limit": 100,
        "mapping": {
          "value": "NICKNAME"
        }
      },
      "changeDialog": {
        "when": {
          "fieldId": "MP_PREP_DATE",
          "notEmpty": true
        },
        "title": {
          "en": "Change Customer",
          "fr": "Changer de client?",
          "nl": "Klant wijzigen?"
        },
        "message": {
          "en": "Changing the customer will permanently delete production date and service as well as any data or photos you may have entered after service.\n\nA meal production record can only exist when customer, production date, and service are all filled in.\n\nIf you wish to proceed with the change, make sure you enter the production date and the service before leaving the page otherwise the record will be permanently deleted.\n\nThis action cannot be undone.",
          "fr": "Changer de client effacera toutes les informations d'ordre que vous avez entrées et toutes les données de production que vous avez entrées, voulez-vous continuer?",
          "nl": "Wijzigen van de klant zal alle orderinformatie die u hebt ingevoerd en alle productiedata die u hebt ingevoerd wissen, wilt u doorgaan?"
        },
        "confirmLabel": {
          "en": "Continue and delete subsequent data.",
          "fr": "Continuer et effacer les portions",
          "nl": "Doorgaan en klaren de porties"
        },
        "cancelLabel": {
          "en": "Cancel and keep current customer",
          "fr": "Annuler",
          "nl": "Annuleren"
        }
      },
      "clearOnChange": {
        "mode": "ordered"
      },
      "listViewSort": {
        "direction": "asc",
        "priority": 3
      }
    },
    {
      "id": "MP_SERVICE",
      "type": "CHOICE",
      "qEn": "Service",
      "qFr": "Service",
      "qNl": "Dienst",
      "required": true,
      "listView": true,
      "ui": {
        "labelLayout": "inline"
      },
      "optionSort": "source",
      "options": [
        "Lunch",
        "Dinner"
      ],
      "optionsFr": [
        "Service de midi",
        "Service du soir"
      ],
      "optionsNl": [
        "Lunch",
        "Avonddienst"
      ],
      "optionsRaw": [
        {
          "Options (EN)": "Lunch",
          "Options (FR)": "Service de midi",
          "Options (NL)": "Lunch",
          "__ckOptionValue": "Lunch"
        },
        {
          "Options (EN)": "Dinner",
          "Options (FR)": "Service du soir",
          "Options (NL)": "Avonddienst",
          "__ckOptionValue": "Dinner"
        }
      ],
      "status": "Active",
      "changeDialog": {
        "when": {
          "any": [
            {
              "fieldId": "MP_COOK_NAME",
              "notEmpty": true
            },
            {
              "fieldId": "MP_VOLUNTEER",
              "notEmpty": true
            },
            {
              "lineItems": {
                "groupId": "MP_MEALS_REQUEST",
                "when": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                },
                "match": "any"
              }
            }
          ]
        },
        "title": {
          "en": "Change service",
          "fr": "Changer de service?",
          "nl": "Service wijzigen?"
        },
        "message": {
          "en": "Changing the service will permanently delete any data or photos entered after the service.\n\nThis action cannot be undone.",
          "fr": "Changer de service effacera toutes les portions que vous avez entrées et toutes les données de production que vous avez entrées, voulez-vous continuer?",
          "nl": "Wijzigen van de service zal alle portions die u hebt ingevoerd en alle productiedata die u hebt ingevoerd wissen, wilt u doorgaan?"
        },
        "confirmLabel": {
          "en": "Continue — Delete subsequent data",
          "fr": "Continuer et effacer les portions",
          "nl": "Doorgaan en klaren de porties"
        },
        "cancelLabel": {
          "en": "Cancel — Keep current service",
          "fr": "Annuler",
          "nl": "Annuleren"
        }
      },
      "clearOnChange": {
        "mode": "ordered"
      },
      "listViewSort": {
        "direction": "asc",
        "priority": 2
      }
    },
    {
      "id": "MP_COOK_NAME",
      "type": "CHOICE",
      "qEn": "Responsible cook ",
      "qFr": "Cuisinier responsable",
      "qNl": "Verantwoordelijke kok",
      "required": true,
      "listView": true,
      "ui": {
        "labelLayout": "inline"
      },
      "options": [
        "⁠Akkara",
        "⁠Anjali",
        "⁠Roya",
        "⁠Saga",
        "⁠Nezka",
        "⁠Haven",
        "⁠Ruby",
        "⁠Aline"
      ],
      "optionsFr": [
        "⁠Akkara",
        "⁠Anjali",
        "⁠Roya",
        "⁠Saga",
        "⁠Nezka",
        "⁠Haven",
        "⁠Ruby",
        "⁠Aline"
      ],
      "optionsNl": [
        "⁠Akkara",
        "⁠Anjali",
        "⁠Roya",
        "⁠Saga",
        "⁠Nezka",
        "⁠Haven",
        "⁠Ruby",
        "⁠Aline"
      ],
      "optionsRaw": [
        {
          "Options (EN)": "⁠Akkara",
          "Options (FR)": "⁠Akkara",
          "Options (NL)": "⁠Akkara",
          "__ckOptionValue": "⁠Akkara"
        },
        {
          "Options (EN)": "⁠Anjali",
          "Options (FR)": "⁠Anjali",
          "Options (NL)": "⁠Anjali",
          "__ckOptionValue": "⁠Anjali"
        },
        {
          "Options (EN)": "⁠Roya",
          "Options (FR)": "⁠Roya",
          "Options (NL)": "⁠Roya",
          "__ckOptionValue": "⁠Roya"
        },
        {
          "Options (EN)": "⁠Saga",
          "Options (FR)": "⁠Saga",
          "Options (NL)": "⁠Saga",
          "__ckOptionValue": "⁠Saga"
        },
        {
          "Options (EN)": "⁠Nezka",
          "Options (FR)": "⁠Nezka",
          "Options (NL)": "⁠Nezka",
          "__ckOptionValue": "⁠Nezka"
        },
        {
          "Options (EN)": "⁠Haven",
          "Options (FR)": "⁠Haven",
          "Options (NL)": "⁠Haven",
          "__ckOptionValue": "⁠Haven"
        },
        {
          "Options (EN)": "⁠Ruby",
          "Options (FR)": "⁠Ruby",
          "Options (NL)": "⁠Ruby",
          "__ckOptionValue": "⁠Ruby"
        },
        {
          "Options (EN)": "⁠Aline",
          "Options (FR)": "⁠Aline",
          "Options (NL)": "⁠Aline",
          "__ckOptionValue": "⁠Aline"
        }
      ],
      "status": "Active"
    },
    {
      "id": "MP_VOLUNTEER",
      "type": "TEXT",
      "qEn": "Volunteer cook",
      "qFr": "Cuisinier bénévole",
      "qNl": "Vrijwillige kok",
      "required": false,
      "listView": false,
      "ui": {
        "labelLayout": "inline"
      },
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active"
    },
    {
      "id": "MP_PREP_DATE",
      "type": "DATE",
      "qEn": "Date",
      "qFr": "Date",
      "qNl": "Datum",
      "required": true,
      "listView": true,
      "ui": {
        "labelLayout": "inline"
      },
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "changeDialog": {
        "when": {
          "all": [
            {
              "fieldId": "MP_SERVICE",
              "notEmpty": true
            },
            {
              "fieldId": "MP_PREP_DATE",
              "isInFuture": true
            }
          ]
        },
        "title": {
          "en": "Change Production date",
          "fr": "Changer la date de production ?",
          "nl": "Productiedatum wijzigen?"
        },
        "message": {
          "en": "Changing the production date will permanently delete service as well as any data or photos entered after service.\n\nA meal production record can only exist when customer, production date, and service are all filled in.\n\nIf you wish to proceed with the change, make sure you enter the service before leaving the page otherwise the record will be permanently deleted.\n\nThis action cannot be undone.",
          "fr": "Changer la date de production d'une production de repas en cours supprimera définitivement toutes les données de service déjà enregistrées. Voulez-vous continuer ?",
          "nl": "Als u de productiedatum van een lopende maaltijdproductie wijzigt, worden alle eerder opgeslagen servicegegevens definitief verwijderd. Wilt u doorgaan?"
        },
        "confirmLabel": {
          "en": "Continue and delete subsequent data.",
          "fr": "Oui, supprimer définitivement les données déjà saisies",
          "nl": "Ja, verwijder de eerder ingevoerde gegevens definitief"
        },
        "cancelLabel": {
          "en": "Cancel and keep current production date",
          "fr": "Non, conserver la date de production actuelle",
          "nl": "Nee, behoud de huidige productiedatum"
        },
        "dedupMode": "never"
      },
      "clearOnChange": {
        "mode": "ordered"
      },
      "selectionEffects": [
        {
          "id": "reset_step_on_prep_date_change",
          "type": "setValue",
          "fieldId": "__ckStep",
          "value": "order"
        }
      ],
      "listViewSort": {
        "direction": "desc",
        "priority": 1
      }
    },
    {
      "id": "MP_EXP_DATE",
      "type": "DATE",
      "qEn": "Expiration Date",
      "qFr": "Date d'expiration",
      "qNl": "Vervaldatum",
      "required": false,
      "ui": {
        "summaryVisibility": "always"
      },
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "fieldId": "MP_SERVICE",
          "equals": "Ski"
        }
      },
      "derivedValue": {
        "op": "addDays",
        "dependsOn": "MP_PREP_DATE",
        "offsetDays": 2,
        "hidden": true
      }
    },
    {
      "id": "MP_MEALS_REQUEST",
      "type": "LINE_ITEM_GROUP",
      "qEn": "Meals",
      "qFr": "Repas",
      "qNl": "Meals",
      "required": false,
      "ui": {
        "hideLabel": true
      },
      "listView": false,
      "options": [
        "MEAL_TYPE",
        "ORD_QTY",
        "MP_IS_REHEAT",
        "LEFTOVER_INFO",
        "MP_TO_COOK",
        "LEFTOVER_VAL",
        "MP_COOK_TEMP",
        "TEMP_EVD",
        "FINAL_QTY"
      ],
      "optionsFr": [
        "CHOICE",
        "NUMBER",
        "CHOICE",
        "CHOICE",
        "NUMBER",
        "NUMBER",
        "CHECKBOX",
        "FILE_UPLOAD",
        "NUMBER"
      ],
      "optionsNl": [
        "Dietary category",
        "Ordered",
        "Will you use leftovers?",
        "Leftover information",
        "To Cook",
        "Leftover",
        "All pots ≥63°C: Confirm",
        "Add photo",
        "Delivered Portions"
      ],
      "optionsRaw": [
        {
          "ID": "MEAL_TYPE",
          "Type": "CHOICE",
          "Label EN": "Dietary category",
          "Label FR": "Catégorie alimentaire",
          "Label NL": "Dieetcategorie",
          "Required?": true,
          "Options (EN)": "REF:PortionTypeOptions",
          "Options (FR)": "",
          "Options (NL)": "",
          "Config (JSON/REF)": "{\n  \"pair\": \"meal_qty\",\n  \"control\": \"select\",\n  \"optionFilter\": {\n    \"dependsOn\": [\"MP_DISTRIBUTOR\", \"MP_SERVICE\", \"MP_PREP_DATE\"],\n    \"optionMap\": {\n      \"HUB\": [\n        \"Vegetarian\"\n      ],\n      \"Belliard||Lunch||Sunday\": [\n        \"Vegetarian\",\n        \"Vegan\",\n        \"Diabetic\",\n        \"No-salt\",\n        \"Standard\"\n      ],\n      \"Belliard||Lunch\": [\n        \"Vegetarian\",\n        \"Vegan\",\n        \"Diabetic\",\n        \"No-salt\"\n      ],\n      \"Belliard||Dinner\": [\n        \"Vegetarian\",\n        \"Vegan\",\n        \"Diabetic\",\n        \"No-salt\",\n        \"Standard\"\n      ],\n      \"Le Phare\": [\n        \"Vegetarian\"\n      ]\n    }\n  },\n  \"ui\": {\n    \"hideLabel\": true\n  }\n}",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "Edit",
          "__ckOptionValue": "MEAL_TYPE"
        },
        {
          "ID": "ORD_QTY",
          "Type": "NUMBER",
          "Label EN": "Ordered",
          "Label FR": "Commandé",
          "Label NL": "Besteld",
          "Required?": true,
          "Options (EN)": "",
          "Options (FR)": "",
          "Options (NL)": "",
          "Config (JSON/REF)": "{\n  \"pair\": \"meal_qty\",\n  \"validationRules\": [\n    {\n      \"phase\": \"submit\",\n      \"then\": { \"fieldId\": \"ORD_QTY\", \"integer\": true },\n      \"message\": { \"en\": \"Enter a whole number\", \"fr\": \"Entrez un nombre entier\", \"nl\": \"Voer een geheel getal in\" },\n      \"when\": { \"fieldId\": \"ORD_QTY\", \"notEmpty\": true }\n    },\n    {\n      \"when\": { \"fieldId\": \"ORD_QTY\", \"lessThan\": 0 },\n      \"then\": { \"fieldId\": \"ORD_QTY\", \"min\": 0 },\n      \"message\": {\n        \"en\": \"Ordered portions must be 0 or more\",\n        \"fr\": \"Les portions demandées doivent être égales ou supérieures à 0\",\n        \"nl\": \"Gevraagde porties moeten 0 of meer zijn\"\n      },\n      \"phase\": \"submit\"\n    }\n  ],\n  \"requiredMessage\": {\n    \"en\": \"Enter the number of portions.\",\n    \"fr\": \"Entrez le nombre de portions.\",\n    \"nl\": \"Voer het aantal porties in.\"\n  }\n}\n",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "",
          "__ckOptionValue": "ORD_QTY"
        },
        {
          "ID": "MP_IS_REHEAT",
          "Type": "CHOICE",
          "Label EN": "Will you use leftovers?",
          "Label FR": "On utilise des restes réchauffés ?",
          "Label NL": "Is dit gerecht opgewarmde rest ?",
          "Required?": true,
          "Options (EN)": "REF:YesNoOptions",
          "Options (FR)": "",
          "Options (NL)": "",
          "Config (JSON/REF)": "{\n  \"pair\": \"meal_qty\",\n  \"selectionEffects\": [\n    {\n      \"id\": \"delete_mp_to_cook_sync\",\n      \"type\": \"deleteLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"targetEffectId\": \"mp_to_cook_sync\"\n    },\n    {\n      \"id\": \"mp_to_cook_sync\",\n      \"type\": \"addLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"preset\": { \"PREP_QTY\": \"$row.MP_TO_COOK\", \"PREP_TYPE\": \"Cook\" },\n      \"hideRemoveButton\": true\n    },\n    {\n      \"id\": \"mp_left_overs_init\",\n      \"type\": \"addLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"triggerValues\": [\"Yes\"],\n      \"preset\": { \"PREP_TYPE\": \"\" }\n    }\n  ]\n}",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "Edit",
          "__ckOptionValue": "MP_IS_REHEAT"
        },
        {
          "ID": "LEFTOVER_INFO",
          "Type": "CHOICE",
          "Label EN": "Leftover information",
          "Label FR": "Leftover information",
          "Label NL": "Leftover information",
          "Required?": false,
          "Options (EN)": "No leftover, Leftover Yes",
          "Options (FR)": "No leftover, Leftover Yes",
          "Options (NL)": "No leftover, Leftover Yes",
          "Config (JSON/REF)": "{\n    \"optionFilter\": {\n        \"dependsOn\": [\n            \"MP_IS_REHEAT\"\n        ],\n        \"optionMap\": {\n            \"Yes\": [\n                \"Leftover Yes\"\n            ],\n            \"No\": [\n                \"No leftover\"\n            ]\n        }\n    },\n    \"ui\": {\n        \"hideLabel\": true\n    }\n}",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "",
          "__ckOptionValue": "LEFTOVER_INFO"
        },
        {
          "ID": "MP_TO_COOK",
          "Type": "NUMBER",
          "Label EN": "To Cook",
          "Label FR": "To Cook",
          "Label NL": "To Cook",
          "Required?": true,
          "Options (EN)": "",
          "Options (FR)": "",
          "Options (NL)": "",
          "Config (JSON/REF)": "{\n  \"derivedValue\": {\n    \"op\": \"calc\",\n    \"expression\": \"{ORD_QTY} - SUM(MP_TYPE_LI.PREP_QTY)\",\n    \"lineItemFilters\": [\n      {\n        \"ref\": \"MP_TYPE_LI.PREP_QTY\",\n        \"when\": {\n          \"fieldId\": \"PREP_TYPE\",\n          \"equals\": [\n            \"Entire dish\"\n          ]\n        }\n      }\n    ]\n  },\n  \"selectionEffects\": [\n    {\n      \"id\": \"delete_mp_to_cook_sync\",\n      \"type\": \"deleteLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"targetEffectId\": \"mp_to_cook_sync\"\n    },\n    {\n      \"id\": \"mp_to_cook_sync\",\n      \"type\": \"addLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"when\": {\n        \"fieldId\": \"MP_TO_COOK\",\n        \"greaterThan\": 0\n      },\n      \"preset\": {\n        \"PREP_QTY\": \"$row.MP_TO_COOK\",\n        \"PREP_TYPE\": \"Cook\"\n      },\n      \"hideRemoveButton\": true\n    }\n  ],\n  \"visibility\": {\n    \"showWhen\": {\n      \"any\": [\n        {\n          \"fieldId\": \"MP_IS_REHEAT\",\n          \"equals\": [\"No\"]\n        },\n        {\n          \"all\": [\n            {\n              \"fieldId\": \"MP_IS_REHEAT\",\n              \"equals\": [\"Yes\"]\n            },\n            {\n              \"lineItems\": {\n                \"groupId\": \"MP_MEALS_REQUEST\",\n                \"subGroupPath\": [\"MP_TYPE_LI\", \"MP_INGREDIENTS_LI\"],\n                \"match\": \"any\"\n              }\n            }\n          ]\n        }\n      ]\n    }\n  }\n}",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "",
          "__ckOptionValue": "MP_TO_COOK"
        },
        {
          "ID": "LEFTOVER_VAL",
          "Type": "NUMBER",
          "Label EN": "Leftover",
          "Label FR": "Restes",
          "Label NL": "Resten",
          "Required?": false,
          "Options (EN)": "",
          "Options (FR)": "",
          "Options (NL)": "",
          "Config (JSON/REF)": "{\n  \"derivedValue\": {\n    \"op\": \"calc\",\n    \"expression\": \"{ORD_QTY} - {MP_TO_COOK}\"\n  },\n  \"visibility\": {\n    \"showWhen\": {\n      \"fieldId\": \"LEFTOVER_VAL\",\n      \"greaterThan\": 0\n    }\n  }\n}",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "",
          "__ckOptionValue": "LEFTOVER_VAL"
        },
        {
          "ID": "MP_COOK_TEMP",
          "Type": "CHECKBOX",
          "Label EN": "All pots ≥63°C: Confirm",
          "Label FR": "Toutes les marmites ≥63°C : confirmer",
          "Label NL": "Alle kookpotten ≥63°C: bevestigen",
          "Required?": true,
          "Options (EN)": [],
          "Options (FR)": [],
          "Options (NL)": [],
          "Config (JSON/REF)": "{\n  \"pair\": \"core_temp\",\n  \"requiredMessage\": {\n    \"en\": \"Confirm that all pots reached at least 63°C.\",\n    \"fr\": \"Confirmez que toutes les marmites ont atteint au moins 63°C.\",\n    \"nl\": \"Bevestig dat alle kookpotten minstens 63°C hebben bereikt.\"\n  }\n}",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "",
          "__ckOptionValue": "MP_COOK_TEMP"
        },
        {
          "ID": "TEMP_EVD",
          "Type": "FILE_UPLOAD",
          "Label EN": "Add photo",
          "Label FR": "Ajouter une photo",
          "Label NL": "Foto toevoegen",
          "Required?": true,
          "Options (EN)": "",
          "Options (FR)": "",
          "Options (NL)": "",
          "Config (JSON/REF)": "{\n  \"uploadConfig\": {\n    \"destinationFolderId\": \"1xiEjwfcbMaF6XqqAPlqbA8LNd5HiwjGV\",\n    \"linkLabel\": {\n      \"en\": \"Photo {n}\",\n      \"fr\": \"Photo {n}\",\n      \"nl\": \"Foto {n}\"\n    },\n    \"minFiles\": 1,\n    \"maxFiles\": 5,\n    \"maxFileSizeMb\": 10,\n    \"allowedMimeTypes\": [\n      \"image/*\"\n    ],\n    \"errorMessages\": {\n      \"minFiles\": {\n        \"en\": \"Add one photo per cooking pot.\",\n        \"fr\": \"Ajoutez une photo par marmite de cuisson.\",\n        \"nl\": \"Voeg één foto per kookpot toe.\"\n      },\n      \"maxFiles\": {\n        \"en\": \"The maximum number of photos is {max}\",\n        \"fr\": \"Le nombre maximum de photos est de {max}\",\n        \"nl\": \"Het maximum aantal foto's is {max}\"\n      },\n      \"maxFileSizeMb\": {\n        \"en\": \"The selected photo(s) exceed the {mb}MB limit. Please take other photo(s) using normal camera mode (avoid zoom, no filters, no HD mode).\",\n        \"fr\": \"La taille maximale de la photo est de {mb}MB\",\n        \"nl\": \"De maximale bestandsgrootte is {mb}MB\"\n      }\n    },\n    \"compression\": {\n      \"images\": {\n        \"maxDimension\": 1600,\n        \"quality\": 0.82,\n        \"outputType\": \"keep\"\n      }\n    },\n    \"helperText\": {\n      \"remainingOne\": {\n        \"en\": \"You need to add {count} more photo\",\n        \"fr\": \"Vous devez ajouter {count} photo supplémentaire\",\n        \"nl\": \"Je moet {count} foto toevoegen\"\n      },\n      \"remainingMany\": {\n        \"en\": \"You need to add {count} more photos\",\n        \"fr\": \"Vous devez ajouter {count} photos supplémentaires\",\n        \"nl\": \"Je moet {count} foto's toevoegen\"\n      }\n    },\n    \"ui\": {\n      \"variant\": \"progressive\"\n    }\n  },\n  \"pair\": \"core_temp\",\n  \"requiredMessage\": {\n    \"en\": \"Add one photo per cooking pot.\",\n    \"fr\": \"Ajoutez une photo par marmite de cuisson.\",\n    \"nl\": \"Voeg één foto per kookpot toe.\"\n  }\n}",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "",
          "__ckOptionValue": "TEMP_EVD"
        },
        {
          "ID": "FINAL_QTY",
          "Type": "NUMBER",
          "Label EN": "Delivered Portions",
          "Label FR": "Portions livrées",
          "Label NL": "Maaltijden",
          "Required?": true,
          "Options (EN)": "",
          "Options (FR)": "",
          "Options (NL)": "",
          "Config (JSON/REF)": "{\n    \"pair\": \"meal_qty\",\n    \"validationRules\": [\n        {\n            \"when\": {\n                \"fieldId\": \"ORD_QTY\",\n                \"notEmpty\": true\n            },\n            \"then\": {\n                \"fieldId\": \"FINAL_QTY\",\n                \"minFieldId\": \"ORD_QTY\"\n            },\n            \"message\": {\n                \"en\": \"Delivered portions must be equal to or greater than ordered portions.\",\n                \"fr\": \"Les portions livrées doivent être égales ou supérieures aux portions demandées.\",\n                \"nl\": \"De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties.\"\n            }\n        }\n    ],\n    \"derivedValue\": {\n        \"op\": \"copy\",\n        \"dependsOn\": \"ORD_QTY\",\n        \"applyOn\": \"change\",\n        \"when\": \"always\",\n        \"copyMode\": \"allowIncrease\"\n    },\n    \"requiredMessage\": {\n      \"en\": \"Delivered portions must be equal to or greater than ordered portions.\",\n      \"fr\": \"Les portions livrées doivent être égales ou supérieures aux portions demandées.\",\n      \"nl\": \"De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties.\"\n    }\n  }",
          "Option Filter (JSON)": "",
          "Validation Rules (JSON)": "",
          "List View?": "",
          "Edit Options": "",
          "__ckOptionValue": "FINAL_QTY"
        }
      ],
      "status": "Active",
      "lineItemConfig": {
        "ui": {
          "mode": "table",
          "tableColumnWidths": {
            "MEAL_TYPE": "20%",
            "ORD_QTY": "20%",
            "MP_COOK_TEMP": "25%",
            "TEMP_EVD": "25%",
            "FINAL_QTY": "40%"
          },
          "collapsedFields": [
            {
              "fieldId": "MEAL_TYPE",
              "showLabel": false
            },
            {
              "fieldId": "ORD_QTY",
              "showLabel": true
            },
            {
              "fieldId": "MP_IS_REHEAT",
              "showLabel": true
            }
          ],
          "expandGate": "collapsedFieldsValid",
          "defaultCollapsed": true,
          "rowDisclaimer": {
            "cases": [
              {
                "text": {
                  "en": "Update ordered portions if required",
                  "fr": "Mettre à jour les portions demandées si nécessaire",
                  "nl": "Bijwerken van gevraagde porties als nodig"
                },
                "when": {
                  "all": [
                    {
                      "fieldId": "__ckSelectionEffectId",
                      "equals": "leftover"
                    },
                    {
                      "not": {
                        "fieldId": "__ckStep",
                        "equals": [
                          "foodSafety",
                          "portioning"
                        ]
                      }
                    }
                  ]
                }
              }
            ]
          },
          "showItemPill": false,
          "addButtonPlacement": "hidden",
          "allowRemoveAutoRows": false,
          "saveDisabledRows": true
        },
        "maxRows": 200,
        "addButtonLabel": {
          "en": "Add meals",
          "fr": "Ajouter des repas",
          "nl": "Repas toevoegen"
        },
        "anchorFieldId": "MEAL_TYPE",
        "addMode": "auto",
        "totals": [
          {
            "type": "sum",
            "fieldId": "ORD_QTY",
            "label": {
              "en": "Total ordered",
              "fr": "Total commandé",
              "nl": "Totaal besteld"
            },
            "decimalPlaces": 0
          },
          {
            "type": "sum",
            "fieldId": "FINAL_QTY",
            "label": {
              "en": "Total delivered",
              "fr": "Total livré",
              "nl": "Totaal geleverd"
            },
            "decimalPlaces": 0
          }
        ],
        "fields": [
          {
            "id": "MEAL_TYPE",
            "type": "CHOICE",
            "labelEn": "Dietary category",
            "labelFr": "Catégorie alimentaire",
            "labelNl": "Dieetcategorie",
            "required": true,
            "pair": "meal_qty",
            "ui": {
              "hideLabel": true
            },
            "options": [
              "Standard",
              "Vegetarian",
              "Vegan",
              "Diabetic",
              "No-salt"
            ],
            "optionsFr": [
              "Standard",
              "Végétarien",
              "Végan",
              "Diabétique",
              "Sans sel"
            ],
            "optionsNl": [
              "Standard_NL",
              "Végétarien_NL",
              "Végan_NL",
              "Diabétique_NL",
              "Sans sel_NL"
            ],
            "optionsRaw": [
              {
                "optionEn": "Standard",
                "optionFr": "Standard",
                "optionNl": "Standard_NL",
                "Icon": "🍽",
                "__ckOptionValue": "Standard"
              },
              {
                "optionEn": "Vegetarian",
                "optionFr": "Végétarien",
                "optionNl": "Végétarien_NL",
                "Icon": "🥕",
                "__ckOptionValue": "Vegetarian"
              },
              {
                "optionEn": "Vegan",
                "optionFr": "Végan",
                "optionNl": "Végan_NL",
                "Icon": "🌱",
                "__ckOptionValue": "Vegan"
              },
              {
                "optionEn": "Diabetic",
                "optionFr": "Diabétique",
                "optionNl": "Diabétique_NL",
                "Icon": "🩺",
                "__ckOptionValue": "Diabetic"
              },
              {
                "optionEn": "No-salt",
                "optionFr": "Sans sel",
                "optionNl": "Sans sel_NL",
                "Icon": "svg:no_salt.min.svg",
                "__ckOptionValue": "No-salt"
              }
            ],
            "optionFilter": {
              "dependsOn": [
                "MP_DISTRIBUTOR",
                "MP_SERVICE",
                "MP_PREP_DATE"
              ],
              "optionMap": {
                "HUB": [
                  "Vegetarian"
                ],
                "Belliard||Lunch||Sunday": [
                  "Vegetarian",
                  "Vegan",
                  "Diabetic",
                  "No-salt",
                  "Standard"
                ],
                "Belliard||Lunch": [
                  "Vegetarian",
                  "Vegan",
                  "Diabetic",
                  "No-salt"
                ],
                "Belliard||Dinner": [
                  "Vegetarian",
                  "Vegan",
                  "Diabetic",
                  "No-salt",
                  "Standard"
                ],
                "Le Phare": [
                  "Vegetarian"
                ]
              }
            }
          },
          {
            "id": "ORD_QTY",
            "type": "NUMBER",
            "labelEn": "Ordered",
            "labelFr": "Portions demandées",
            "labelNl": "Aantal",
            "required": true,
            "requiredMessage": {
              "en": "Enter the number of portions.",
              "fr": "Entrez le nombre de portions.",
              "nl": "Voer het aantal porties in."
            },
            "ui": {
              "helperText": {
                "en": "Enter the number of portions.",
                "fr": "Entrez le nombre de portions.",
                "nl": "Voer het aantal porties in."
              },
              "helperPlacement": "belowLabel"
            },
            "pair": "meal_qty",
            "options": [],
            "optionsFr": [],
            "optionsNl": [],
            "validationRules": [
              {
                "phase": "submit",
                "then": {
                  "fieldId": "ORD_QTY",
                  "integer": true
                },
                "message": {
                  "en": "Enter a whole number",
                  "fr": "Entrez un nombre entier",
                  "nl": "Voer een geheel getal in"
                },
                "when": {
                  "fieldId": "ORD_QTY",
                  "notEmpty": true
                }
              },
              {
                "when": {
                  "fieldId": "ORD_QTY",
                  "lessThan": 0
                },
                "then": {
                  "fieldId": "ORD_QTY",
                  "min": 0
                },
                "message": {
                  "en": "Ordered portions must be 0 or more",
                  "fr": "Les portions demandées doivent être égales ou supérieures à 0",
                  "nl": "Gevraagde porties moeten 0 of meer zijn"
                },
                "phase": "submit"
              }
            ],
            "changeDialog": {
              "when": {
                "fieldId": "ORD_QTY",
                "equals": 0
              },
              "title": {
                "en": "Update ordered portions",
                "fr": "Mettre à jour les portions demandées",
                "nl": "Bijwerken van gevraagde porties"
              },
              "message": {
                "en": "Changing the ordered number will remove any production data (leftover, recipe to cook, changes to ingredients, ingredients receipt photo) you may have previously entered. Do you want to proceed?",
                "fr": "Changer le nombre de portions commandées supprimera toutes les données de production (restes, recette à cuisiner, modifications des ingrédients, photos de réception des ingrédients) que vous avez peut-être précédemment entrées. Voulez-vous continuer ?",
                "nl": "Wijzigen van het aantal gevraagde porties zal alle productiedata (resten, recept te koken, wijzigingen in ingrediënten, foto's van ingrediëntenontvangst) die u mogelijk eerder hebt ingevoerd, verwijderen. Wilt u doorgaan?"
              },
              "confirmLabel": {
                "en": "Yes, change the ordered number and clear out data previously entered.",
                "fr": "Oui, changer le nombre de portions commandées et effacer les données précédemment entrées.",
                "nl": "Ja, wijzig het aantal gevraagde porties en verwijder de eerder ingevoerde data."
              },
              "cancelLabel": {
                "en": "No, keep current data and ordered number",
                "fr": "Non, garder les données actuelles et le nombre commandé",
                "nl": "Nee, houd de huidige gegevens en het bestelde aantal"
              },
              "primaryAction": "confirm"
            },
            "selectionEffects": [
              {
                "type": "deleteLineItems",
                "groupId": "MP_TYPE_LI",
                "when": {
                  "fieldId": "ORD_QTY",
                  "equals": 0
                }
              },
              {
                "type": "setValue",
                "fieldId": "MP_IS_REHEAT",
                "when": {
                  "fieldId": "ORD_QTY",
                  "equals": 0
                },
                "value": null
              },
              {
                "id": "sync_final_qty_from_ord_qty",
                "type": "setValue",
                "fieldId": "FINAL_QTY",
                "value": "$row.ORD_QTY"
              }
            ]
          },
          {
            "id": "MP_IS_REHEAT",
            "type": "CHOICE",
            "labelEn": "Will you use leftovers?",
            "labelFr": "On utilise des restes réchauffés ?",
            "labelNl": "Is dit gerecht opgewarmde rest ?",
            "required": true,
            "pair": "meal_qty",
            "options": [
              "No",
              "Yes"
            ],
            "optionsFr": [
              "Non",
              "Oui"
            ],
            "optionsNl": [
              "Nee",
              "Ja"
            ],
            "optionsRaw": [
              {
                "Options (EN)": "No",
                "Options (FR)": "Non",
                "Options (NL)": "Nee",
                "__ckOptionValue": "No"
              },
              {
                "Options (EN)": "Yes",
                "Options (FR)": "Oui",
                "Options (NL)": "Ja",
                "__ckOptionValue": "Yes"
              }
            ],
            "selectionEffects": [
              {
                "type": "deleteLineItems",
                "groupId": "MP_TYPE_LI",
                "id": "delete_mp_to_cook_sync",
                "targetEffectId": "mp_to_cook_sync"
              },
              {
                "type": "deleteLineItems",
                "groupId": "MP_TYPE_LI",
                "id": "delete_mp_left_overs_init",
                "targetEffectId": "mp_left_overs_init",
                "triggerValues": [
                  "No"
                ]
              },
              {
                "type": "addLineItems",
                "groupId": "MP_TYPE_LI",
                "id": "mp_to_cook_sync",
                "hideRemoveButton": true,
                "preset": {
                  "PREP_QTY": "$row.MP_TO_COOK",
                  "PREP_TYPE": "Cook"
                }
              },
              {
                "type": "addLineItems",
                "groupId": "MP_TYPE_LI",
                "id": "mp_left_overs_init",
                "triggerValues": [
                  "Yes"
                ],
                "preset": {
                  "PREP_TYPE": ""
                }
              }
            ]
          },
          {
            "id": "LEFTOVER_INFO",
            "type": "CHOICE",
            "labelEn": "Leftover information",
            "labelFr": "Leftover information",
            "labelNl": "Leftover information",
            "required": false,
            "ui": {
              "hideLabel": true
            },
            "options": [
              "No leftover",
              "Leftover Yes"
            ],
            "optionsFr": [
              "No leftover",
              "Leftover Yes"
            ],
            "optionsNl": [
              "No leftover",
              "Leftover Yes"
            ],
            "optionFilter": {
              "dependsOn": [
                "MP_IS_REHEAT"
              ],
              "optionMap": {
                "Yes": [
                  "Leftover Yes"
                ],
                "No": [
                  "No leftover"
                ]
              }
            }
          },
          {
            "id": "MP_TO_COOK",
            "type": "NUMBER",
            "labelEn": "To Cook",
            "labelFr": "To Cook",
            "labelNl": "To Cook",
            "required": true,
            "options": [],
            "optionsFr": [],
            "optionsNl": [],
            "visibility": {
              "showWhen": {
                "any": [
                  {
                    "fieldId": "MP_IS_REHEAT",
                    "equals": [
                      "No"
                    ]
                  },
                  {
                    "all": [
                      {
                        "fieldId": "MP_IS_REHEAT",
                        "equals": [
                          "Yes"
                        ]
                      },
                      {
                        "lineItems": {
                          "groupId": "MP_MEALS_REQUEST",
                          "subGroupPath": [
                            "MP_TYPE_LI",
                            "MP_INGREDIENTS_LI"
                          ],
                          "match": "any"
                        }
                      }
                    ]
                  }
                ]
              }
            },
            "selectionEffects": [
              {
                "type": "deleteLineItems",
                "groupId": "MP_TYPE_LI",
                "id": "delete_mp_to_cook_sync",
                "targetEffectId": "mp_to_cook_sync"
              },
              {
                "type": "addLineItems",
                "groupId": "MP_TYPE_LI",
                "id": "mp_to_cook_sync",
                "when": {
                  "fieldId": "MP_TO_COOK",
                  "greaterThan": 0
                },
                "hideRemoveButton": true,
                "preset": {
                  "PREP_QTY": "$row.MP_TO_COOK",
                  "PREP_TYPE": "Cook"
                }
              }
            ],
            "derivedValue": {
              "op": "calc",
              "expression": "{ORD_QTY} - SUM(MP_TYPE_LI.PREP_QTY)",
              "lineItemFilters": [
                {
                  "ref": "MP_TYPE_LI.PREP_QTY",
                  "when": {
                    "fieldId": "PREP_TYPE",
                    "equals": [
                      "Entire dish"
                    ]
                  }
                }
              ]
            }
          },
          {
            "id": "LEFTOVER_VAL",
            "labelEn": "Leftover",
            "labelFr": "Restes",
            "labelNl": "Resten",
            "options": [],
            "optionsFr": [],
            "optionsNl": [],
            "required": false,
            "type": "NUMBER",
            "derivedValue": {
              "op": "calc",
              "expression": "{ORD_QTY} - {MP_TO_COOK}"
            },
            "visibility": {
              "showWhen": {
                "fieldId": "LEFTOVER_VAL",
                "greaterThan": 0
              }
            }
          },
          {
            "id": "MP_COOK_TEMP",
            "type": "CHECKBOX",
            "labelEn": "All pots ≥63°C: Confirm",
            "labelFr": "Toutes les marmites ≥63°C : confirmer",
            "labelNl": "Alle kookpotten ≥63°C: bevestigen",
            "required": true,
            "requiredMessage": {
              "en": "Confirm that all pots reached at least 63°C.",
              "fr": "Confirmez que toutes les marmites ont atteint au moins 63°C.",
              "nl": "Bevestig dat alle kookpotten minstens 63°C hebben bereikt."
            },
            "validationRules": [
              {
                "when": {
                  "all": [
                    {
                      "not": {
                        "fieldId": "MP_COOK_TEMP",
                        "equals": [
                          "__never__"
                        ]
                      }
                    },
                    {
                      "fieldId": "MP_PREP_DATE",
                      "isInFuture": true
                    },
                    {
                      "fieldId": "__ckStep",
                      "equals": [
                        "foodSafety"
                      ]
                    }
                  ]
                },
                "message": {
                  "en": "Food safety and portioning can only be recorded on the day of production.",
                  "fr": "La sécurité alimentaire et la portionnement ne peuvent être enregistrés que le jour de la production.",
                  "nl": "Voedselveiligheid en portieering kunnen alleen worden vastgelegd op de dag van productie."
                }
              }
            ],
            "pair": "core_temp",
            "options": [],
            "optionsFr": [],
            "optionsNl": []
          },
          {
            "id": "TEMP_EVD",
            "type": "FILE_UPLOAD",
            "labelEn": "Add photo",
            "labelFr": "Ajouter une photo",
            "labelNl": "Foto toevoegen",
            "required": true,
            "requiredMessage": {
              "en": "Add one photo per cooking pot.",
              "fr": "Ajoutez une photo par marmite de cuisson.",
              "nl": "Voeg één foto per kookpot toe."
            },
            "validationRules": [
              {
                "when": {
                  "all": [
                    {
                      "not": {
                        "fieldId": "TEMP_EVD",
                        "equals": [
                          "__never__"
                        ]
                      }
                    },
                    {
                      "fieldId": "MP_PREP_DATE",
                      "isInFuture": true
                    },
                    {
                      "fieldId": "__ckStep",
                      "equals": [
                        "foodSafety"
                      ]
                    }
                  ]
                },
                "message": {
                  "en": "Food safety and portioning can only be recorded on the day of production.",
                  "fr": "La sécurité alimentaire et la portionnement ne peuvent être enregistrés que le jour de la production.",
                  "nl": "Voedselveiligheid en portieering kunnen alleen worden vastgelegd op de dag van productie."
                }
              }
            ],
            "pair": "core_temp",
            "options": [],
            "optionsFr": [],
            "optionsNl": [],
            "uploadConfig": {
              "destinationFolderId": "1xiEjwfcbMaF6XqqAPlqbA8LNd5HiwjGV",
              "minFiles": 0,
              "maxFiles": 10,
              "maxFileSizeMb": 10,
              "allowedMimeTypes": [
                "image/*"
              ],
              "errorMessages": {
                "minFiles": {
                  "en": "Add one photo per cooking pot.",
                  "fr": "Ajoutez une photo par marmite de cuisson.",
                  "nl": "Voeg één foto per kookpot toe."
                },
                "maxFiles": {
                  "en": "The maximum number of photos is {max}",
                  "fr": "Le nombre maximum de photos est de {max}",
                  "nl": "Het maximum aantal foto's is {max}"
                },
                "maxFileSizeMb": {
                  "en": "The selected photo(s) exceed the {mb}MB limit. Please take other photo(s) using normal camera mode (avoid zoom, no filters, no HD mode).",
                  "fr": "La taille maximale de la photo est de {mb}MB",
                  "nl": "De maximale bestandsgrootte is {mb}MB"
                }
              },
              "helperText": {
                "remainingOne": {
                  "en": "You need to add {count} more photo",
                  "fr": "Vous devez ajouter {count} photo supplémentaire",
                  "nl": "Je moet {count} foto toevoegen"
                },
                "remainingMany": {
                  "en": "You need to add {count} more photos",
                  "fr": "Vous devez ajouter {count} photos supplémentaires",
                  "nl": "Je moet {count} foto's toevoegen"
                }
              },
              "linkLabel": {
                "en": "Photo {n}",
                "fr": "Photo {n}",
                "nl": "Foto {n}"
              },
              "ui": {
                "variant": "progressive"
              },
              "compression": {
                "images": {
                  "maxDimension": 1280,
                  "quality": 0.78,
                  "outputType": "keep"
                }
              }
            }
          },
          {
            "id": "FINAL_QTY",
            "type": "NUMBER",
            "labelEn": "Delivered Portions",
            "labelFr": "Portions livrées",
            "labelNl": "Maaltijden",
            "required": true,
            "requiredMessage": {
              "en": "Delivered portions must be equal to or greater than ordered portions.",
              "fr": "Les portions livrées doivent être égales ou supérieures aux portions demandées.",
              "nl": "De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties."
            },
            "pair": "meal_qty",
            "options": [],
            "optionsFr": [],
            "optionsNl": [],
            "validationRules": [
              {
                "when": {
                  "fieldId": "ORD_QTY",
                  "notEmpty": true
                },
                "then": {
                  "fieldId": "FINAL_QTY",
                  "minFieldId": "ORD_QTY"
                },
                "message": {
                  "en": "Delivered portions must be equal to or greater than ordered portions.",
                  "fr": "Les portions livrées doivent être égales ou supérieures aux portions demandées.",
                  "nl": "De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties."
                }
              }
            ]
          }
        ],
        "subGroups": [
          {
            "fields": [
              {
                "id": "PREP_TYPE",
                "type": "CHOICE",
                "labelEn": "Type",
                "labelFr": "Type",
                "labelNl": "Type",
                "required": true,
                "ui": {
                  "control": "select"
                },
                "options": [
                  "Cook",
                  "Entire dish",
                  "Part dish"
                ],
                "optionsFr": [
                  "Cuisiner",
                  "Plat entier",
                  "Plat partiel"
                ],
                "optionsNl": [
                  "Koken",
                  "Volledig gerecht",
                  "Deel gerecht"
                ]
              },
              {
                "id": "RECIPE",
                "type": "CHOICE",
                "labelEn": "Recipe",
                "labelFr": "Recette",
                "labelNl": "Recept",
                "required": false,
                "ui": {
                  "control": "select"
                },
                "options": [],
                "optionsFr": [],
                "optionsNl": [],
                "optionFilter": {
                  "dependsOn": "MEAL_TYPE",
                  "dataSourceField": "DISH_TYPE",
                  "dataSourceDelimiter": ",",
                  "bypassValues": [
                    "No-salt"
                  ]
                },
                "validationRules": [
                  {
                    "when": {
                      "fieldId": "PREP_TYPE",
                      "equals": [
                        "Cook"
                      ]
                    },
                    "then": {
                      "fieldId": "RECIPE",
                      "required": true
                    },
                    "message": {
                      "en": "Please select a recipe",
                      "fr": "Veuillez sélectionner une recette",
                      "nl": "Veelijks selecteren een recept"
                    }
                  }
                ],
                "dataSource": {
                  "id": "Recipes Data",
                  "mode": "options",
                  "statusAllowList": [
                    "Active"
                  ],
                  "projection": [
                    "QFTD5RD2EM",
                    "NUM_PORTIONS",
                    "DISH_TYPE",
                    "Q65ILNUSGL",
                    "REC_INST"
                  ],
                  "tooltipField": "REC_INST",
                  "tooltipLabel": {
                    "en": "Instructions",
                    "fr": "Instructions",
                    "nl": "Instructies"
                  }
                },
                "selectionEffects": [
                  {
                    "type": "addLineItemsFromDataSource",
                    "groupId": "MP_INGREDIENTS_LI",
                    "targetPath": "MP_INGREDIENTS_LI",
                    "lookupField": "QFTD5RD2EM",
                    "dataField": "Q65ILNUSGL",
                    "lineItemMapping": {
                      "ING": "ING",
                      "QTY": "QTY",
                      "UNIT": "UNIT"
                    },
                    "aggregateBy": [
                      "ING",
                      "UNIT",
                      "RECIPE"
                    ],
                    "aggregateNumericFields": [
                      "QTY"
                    ],
                    "rowMultiplierFieldId": "PREP_QTY",
                    "dataSourceMultiplierField": "NUM_PORTIONS",
                    "scaleNumericFields": [
                      "QTY"
                    ],
                    "preserveManualRows": false
                  },
                  {
                    "type": "setValue",
                    "fieldId": "__ckRecipeIngredientsDirty",
                    "value": false
                  }
                ],
                "changeDialog": {
                  "when": {
                    "fieldId": "__ckRecipeIngredientsDirty",
                    "equals": true
                  },
                  "title": "Change recipe?",
                  "message": "You have modified the ingredients for this recipe. If you change the recipe now, all ingredient changes will be lost. Do you want to continue?",
                  "cancelLabel": "Cancel",
                  "confirmLabel": "Change recipe",
                  "primaryAction": "cancel"
                }
              },
              {
                "id": "PREP_QTY",
                "type": "NUMBER",
                "labelEn": "Quantity",
                "labelFr": "Quantity",
                "labelNl": "Quantity",
                "required": false,
                "options": [],
                "optionsFr": [],
                "optionsNl": []
              }
            ],
            "id": "MP_TYPE_LI",
            "label": {
              "en": "View/edit meal",
              "fr": "Voir/modifier repas",
              "nl": "Bekijken/bewerken repas"
            },
            "ui": {
              "mode": "table",
              "tableHideUntilAnchor": true,
              "needsAttentionMessage": {
                "en": "Each ingredient must have a quantity and a unit.",
                "fr": "Chaque ingrédient doit avoir une quantité et une unité.",
                "nl": "Elke ingrediënt moet een hoeveelheid en een eenheid hebben."
              },
              "showItemPill": false,
              "addButtonPlacement": "hidden",
              "openInOverlay": true,
              "closeButtonLabel": {
                "en": "Back",
                "fr": "Retour",
                "nl": "Terug"
              },
              "overlayDetail": {
                "enabled": true,
                "header": {
                  "tableColumns": [
                    "PREP_TYPE",
                    "PREP_QTY",
                    "RECIPE"
                  ],
                  "tableColumnWidths": {
                    "PREP_TYPE": "20%",
                    "PREP_QTY": "25%",
                    "RECIPE": "55%"
                  },
                  "addButtonPlacement": "hidden"
                },
                "body": {
                  "subGroupId": "MP_INGREDIENTS_LI",
                  "edit": {
                    "mode": "table",
                    "tableColumns": [
                      "ING",
                      "QTY",
                      "UNIT"
                    ],
                    "tableColumnWidths": {
                      "ING": "50%",
                      "QTY": "25%",
                      "UNIT": "25%",
                      "__remove": "44px"
                    }
                  },
                  "view": {
                    "mode": "html",
                    "templateId": "bundle:mp.ing_recipe.html"
                  }
                },
                "rowActions": {
                  "viewLabel": {
                    "en": "View"
                  },
                  "editLabel": {
                    "en": "Edit"
                  },
                  "viewPlacement": "hidden",
                  "editPlacement": "hidden"
                }
              }
            },
            "minRows": 0,
            "maxRows": 200,
            "addMode": "inline",
            "addButtonLabel": {
              "en": "Add",
              "fr": "Ajouter",
              "nl": "Toevoegen"
            },
            "anchorFieldId": "PREP_TYPE",
            "subGroups": [
              {
                "fields": [
                  {
                    "id": "ING",
                    "type": "CHOICE",
                    "labelEn": "Ingredient",
                    "labelFr": "Ingrédient",
                    "labelNl": "Ingrediënt",
                    "required": true,
                    "ui": {
                      "labelLayout": "stacked",
                      "readOnlyAppendFieldId": "ALLERGEN",
                      "readOnlyAppendHideValues": [
                        "None"
                      ]
                    },
                    "readOnly": true,
                    "optionFilter": {
                      "dependsOn": "MEAL_TYPE",
                      "optionMapRef": {
                        "ref": "REF:Ingredients Data",
                        "keyColumn": "DIETARY_APPLICABILITY",
                        "lookupColumn": "INGREDIENT_NAME",
                        "splitKey": true
                      },
                      "dataSourceField": "DIETARY_APPLICABILITY",
                      "dataSourceDelimiter": ","
                    },
                    "dataSource": {
                      "id": "Ingredients Data",
                      "mode": "options",
                      "statusAllowList": [
                        "Active"
                      ],
                      "projection": [
                        "INGREDIENT_NAME",
                        "SUPPLIER",
                        "DIETARY_APPLICABILITY",
                        "ALLOWED_UNIT",
                        "CATEGORY",
                        "ALLERGEN",
                        "STATUS"
                      ]
                    }
                  },
                  {
                    "id": "QTY",
                    "type": "NUMBER",
                    "labelEn": "Quantity",
                    "labelFr": "Quantité",
                    "labelNl": "Aantal",
                    "required": false,
                    "pair": "qty_unt",
                    "options": [],
                    "optionsFr": [],
                    "optionsNl": [],
                    "validationRules": [
                      {
                        "when": {
                          "fieldId": "PREP_TYPE",
                          "equals": [
                            "Cook"
                          ]
                        },
                        "then": {
                          "fieldId": "QTY",
                          "required": true
                        },
                        "message": {
                          "en": "Please enter the quantity",
                          "fr": "Veuillez entrer la quantité",
                          "nl": "Voer de hoeveelheid in"
                        }
                      }
                    ]
                  },
                  {
                    "id": "UNIT",
                    "type": "CHOICE",
                    "labelEn": "Unit",
                    "labelFr": "Unité",
                    "labelNl": "Eenheid",
                    "required": false,
                    "pair": "qty_unt",
                    "ui": {
                      "control": "select"
                    },
                    "optionFilter": {
                      "dependsOn": "ING",
                      "optionMapRef": {
                        "ref": "REF:Ingredients Data",
                        "keyColumn": "INGREDIENT_NAME",
                        "lookupColumn": "ALLOWED_UNIT"
                      }
                    },
                    "validationRules": [
                      {
                        "when": {
                          "fieldId": "PREP_TYPE",
                          "equals": [
                            "Cook"
                          ]
                        },
                        "then": {
                          "fieldId": "UNIT",
                          "required": true
                        },
                        "message": {
                          "en": "Please select a unit",
                          "fr": "Veuillez sélectionner une unité",
                          "nl": "Veelijks selecteren een eenheid"
                        }
                      }
                    ]
                  },
                  {
                    "id": "CAT",
                    "type": "TEXT",
                    "labelEn": "Category",
                    "labelFr": "Catégorie",
                    "labelNl": "Categorie",
                    "required": false,
                    "pair": "cat_all",
                    "readOnly": true,
                    "valueMap": {
                      "dependsOn": "ING",
                      "optionMapRef": {
                        "ref": "REF:Ingredients Data",
                        "keyColumn": "INGREDIENT_NAME",
                        "lookupColumn": "CATEGORY"
                      }
                    }
                  },
                  {
                    "id": "ALLERGEN",
                    "type": "TEXT",
                    "labelEn": "Allergen",
                    "labelFr": "Allergène",
                    "labelNl": "Allergeen",
                    "required": false,
                    "pair": "cat_all",
                    "readOnly": true,
                    "valueMap": {
                      "dependsOn": "ING",
                      "optionMapRef": {
                        "ref": "REF:Ingredients Data",
                        "keyColumn": "INGREDIENT_NAME",
                        "lookupColumn": "ALLERGEN"
                      }
                    }
                  }
                ],
                "id": "MP_INGREDIENTS_LI",
                "label": {
                  "en": "View/edit ingredients",
                  "fr": "Voir/modifier les ingrédients",
                  "nl": "Bekijken/bewerken van ingrediënten"
                },
                "ui": {
                  "mode": "table",
                  "rowDisclaimer": {
                    "cases": [
                      {
                        "text": {
                          "en": "Please enter the `Quantity` based on the ordered number of portions",
                          "fr": "Veuillez entrer la `Quantité` en fonction du nombre de portions demandé",
                          "nl": "Voer de `Aantal` in op basis van het gevraagde aantal porties"
                        },
                        "when": {
                          "all": [
                            {
                              "fieldId": "__ckRowSource",
                              "equals": "manual"
                            },
                            {
                              "fieldId": "PREP_TYPE",
                              "equals": "Cook"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "tableColumns": [
                    "ING",
                    "QTY",
                    "UNIT"
                  ],
                  "tableColumnWidths": {
                    "ING": "50%",
                    "QTY": "25%",
                    "UNIT": "25%",
                    "__remove": "44px"
                  },
                  "tableHideUntilAnchor": true,
                  "needsAttentionMessage": {
                    "en": "Each ingredient must have a quantity and a unit.",
                    "fr": "Chaque ingrédient doit avoir une quantité et une unité.",
                    "nl": "Elke ingrediënt moet een hoeveelheid en een eenheid hebben."
                  },
                  "showItemPill": false,
                  "openInOverlay": true,
                  "addButtonPlacement": "top"
                },
                "minRows": 0,
                "maxRows": 200,
                "addMode": "overlay",
                "addOverlay": {
                  "title": {
                    "en": "Select the ingredient(s) not mentioned in the original recipe that you will use to cook today's dish.",
                    "fr": "Sélectionnez le(s) ingrédient(s) non mentionné(s) dans la recette originale que vous utiliserez pour cuisiner le plat d'aujourd'hui.",
                    "nl": "Selecteer het/de ingrediënt(en) die niet in het originele recept staan en die je zult gebruiken om het gerecht van vandaag te koken."
                  },
                  "helperText": {
                    "en": "",
                    "fr": "",
                    "nl": ""
                  },
                  "searchHelperText": {
                    "en": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                    "fr": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                    "nl": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia)."
                  },
                  "placeholder": {
                    "en": "Search ingredients",
                    "fr": "Rechercher des ingrédients",
                    "nl": "Ingrediënten zoeken"
                  }
                },
                "addButtonLabel": {
                  "en": "Add ingredient",
                  "fr": "Ajouter un ingrédient",
                  "nl": "Ingrediënt toevoegen"
                },
                "anchorFieldId": "ING",
                "dedupRules": [
                  {
                    "fields": [
                      "ING",
                      "UNIT"
                    ],
                    "message": {
                      "en": "{value} is already in the list, change the quantity",
                      "fr": "{value} est déjà dans la liste, modifiez la quantité",
                      "nl": "{value} staat al in de lijst, pas de hoeveelheid aan"
                    }
                  }
                ]
              }
            ]
          }
        ]
      },
      "validationRules": [
        {
          "phase": "submit",
          "when": {
            "not": {
              "lineItems": {
                "groupId": "MP_MEALS_REQUEST",
                "when": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                },
                "match": "any"
              }
            }
          },
          "message": {
            "en": "Enter at least one quantity greater than 0.",
            "fr": "Veuillez entrer au moins une quantité supérieure à 0.",
            "nl": "Voer minstens één hoeveelheid in die groter is dan 0."
          }
        }
      ]
    },
    {
      "id": "ING_PREVIEW",
      "type": "BUTTON",
      "qEn": "Ingredients Needed",
      "qFr": "Ingrédients nécessaires",
      "qNl": "Benodigde ingrediënten",
      "required": false,
      "pair": "ing_ph",
      "listView": false,
      "ui": {
        "helperText": {
          "en": "Use \"Ingredients needed\" as the reference shopping list"
        },
        "helperPlacement": "belowLabel"
      },
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "any": [
            {
              "lineItems": {
                "groupId": "MP_MEALS_REQUEST",
                "subGroupId": "MP_TYPE_LI",
                "when": {
                  "all": [
                    {
                      "fieldId": "PREP_TYPE",
                      "equals": "Cook"
                    },
                    {
                      "fieldId": "RECIPE",
                      "notEmpty": true
                    }
                  ]
                }
              }
            },
            {
              "lineItems": {
                "groupId": "MP_MEALS_REQUEST",
                "subGroupPath": "MP_TYPE_LI.MP_INGREDIENTS_LI",
                "when": {
                  "fieldId": "__ckRowSource",
                  "equals": "manual"
                },
                "parentWhen": {
                  "fieldId": "PREP_TYPE",
                  "equals": "Full"
                }
              }
            }
          ]
        }
      },
      "button": {
        "action": "renderHtmlTemplate",
        "templateId": {
          "EN": "bundle:ingredients_needed.html",
          "FR": "bundle:ingredients_needed.html",
          "NL": "bundle:ingredients_needed.html"
        },
        "placements": [
          "form"
        ]
      }
    },
    {
      "id": "ING_EVD",
      "type": "FILE_UPLOAD",
      "qEn": "Ingredients receipt photo",
      "qFr": "Photo du reçu des ingrédients",
      "qNl": "Foto van het ingrediëntenbewijs",
      "required": true,
      "pair": "ing_ph",
      "listView": false,
      "ui": {
        "helperText": {
          "en": "Take a photo of delivery tags before cooking."
        },
        "helperPlacement": "belowLabel"
      },
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "hideWhen": {
          "fieldId": "MP_PREP_DATE",
          "isInFuture": true
        },
        "showWhen": {
          "any": [
            {
              "lineItems": {
                "groupId": "MP_MEALS_REQUEST",
                "subGroupId": "MP_TYPE_LI",
                "when": {
                  "all": [
                    {
                      "fieldId": "PREP_TYPE",
                      "equals": "Cook"
                    },
                    {
                      "fieldId": "RECIPE",
                      "notEmpty": true
                    }
                  ]
                }
              }
            },
            {
              "lineItems": {
                "groupId": "MP_MEALS_REQUEST",
                "subGroupPath": "MP_TYPE_LI.MP_INGREDIENTS_LI",
                "when": {
                  "fieldId": "__ckRowSource",
                  "equals": "manual"
                },
                "parentWhen": {
                  "fieldId": "PREP_TYPE",
                  "equals": "Full"
                }
              }
            }
          ]
        }
      },
      "uploadConfig": {
        "destinationFolderId": "1xiEjwfcbMaF6XqqAPlqbA8LNd5HiwjGV",
        "minFiles": 1,
        "maxFiles": 10,
        "maxFileSizeMb": 10,
        "allowedMimeTypes": [
          "image/*"
        ],
        "errorMessages": {
          "minFiles": {
            "en": "Please upload one photo",
            "fr": "Veuillez télécharger une photo",
            "nl": "Upload een foto"
          },
          "maxFiles": {
            "en": "The maximum number of photos is {max}",
            "fr": "Le nombre maximum de photos est de {max}",
            "nl": "Het maximum aantal foto's is {max}"
          },
          "maxFileSizeMb": {
            "en": "The selected photo(s) exceed the {mb}MB limit. Please take other photo(s) using normal camera mode (avoid zoom, no filters, no HD mode).",
            "fr": "La taille maximale de la photo est de {mb}MB",
            "nl": "De maximale bestandsgrootte is {mb}MB"
          }
        },
        "helperText": {
          "remainingOne": {
            "en": "You need to add {count} more photo",
            "fr": "Vous devez ajouter {count} photo supplémentaire",
            "nl": "Je moet {count} foto toevoegen"
          },
          "remainingMany": {
            "en": "You need to add {count} more photos",
            "fr": "Vous devez ajouter {count} photos supplémentaires",
            "nl": "Je moet {count} foto's toevoegen"
          }
        },
        "linkLabel": {
          "en": "Photo {n}",
          "fr": "Photo {n}",
          "nl": "Foto {n}"
        },
        "ui": {
          "variant": "progressive"
        },
        "compression": {
          "images": {
            "maxDimension": 1280,
            "quality": 0.78,
            "outputType": "keep"
          }
        }
      }
    },
    {
      "id": "MP_NOTES",
      "type": "PARAGRAPH",
      "qEn": "Note to customer",
      "qFr": "Note au client",
      "qNl": "Notitie aan klant",
      "required": false,
      "ui": {
        "labelLayout": "stacked"
      },
      "group": {
        "id": "notes",
        "header": false,
        "title": {
          "en": "Notes & Consent",
          "fr": "Notes et consentement",
          "nl": "Notities en toestemming"
        },
        "collapsible": true,
        "defaultCollapsed": false
      },
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active"
    },
    {
      "id": "PDF_PREVIEW",
      "type": "BUTTON",
      "qEn": "Final report",
      "qFr": "Rapport final",
      "qNl": "Eindrapport",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "fieldId": "status",
          "equals": "Closed"
        }
      },
      "button": {
        "action": "openUrlField",
        "fieldId": "pdfUrl",
        "placements": [
          "summaryBar"
        ]
      }
    },
    {
      "id": "BELL_BTN",
      "type": "BUTTON",
      "qEn": "Belliard",
      "qFr": "Belliard",
      "qNl": "Belliard",
      "required": false,
      "group": {
        "id": "issues"
      },
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "fieldId": "status",
          "equals": "Closed"
        }
      },
      "button": {
        "action": "createRecordPreset",
        "presetValues": {
          "MP_DISTRIBUTOR": "Belliard"
        },
        "placements": [
          "topBarList"
        ]
      }
    },
    {
      "id": "HUB_BTN",
      "type": "BUTTON",
      "qEn": "Hub",
      "qFr": "Hub",
      "qNl": "Hub",
      "required": false,
      "group": {
        "id": "issues"
      },
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "fieldId": "status",
          "equals": "Closed"
        }
      },
      "button": {
        "action": "createRecordPreset",
        "presetValues": {
          "MP_DISTRIBUTOR": "HUB"
        },
        "placements": [
          "topBarList"
        ]
      }
    },
    {
      "id": "PHARE_BTN",
      "type": "BUTTON",
      "qEn": "Le Phare",
      "qFr": "Le Phare",
      "qNl": "Le Phare",
      "required": false,
      "group": {
        "id": "issues"
      },
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "fieldId": "status",
          "equals": "Closed"
        }
      },
      "button": {
        "action": "createRecordPreset",
        "presetValues": {
          "MP_DISTRIBUTOR": "Le Phare"
        },
        "placements": [
          "topBarList"
        ]
      }
    },
    {
      "id": "MP_PROCEDURE",
      "type": "BUTTON",
      "qEn": "Meal Production Procedure",
      "qFr": "Procédure de production des repas",
      "qNl": "Procedure voor de maaltijdproductie",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "button": {
        "action": "renderHtmlTemplate",
        "templateId": {
          "EN": "bundle:procedure_meal_production.html",
          "FR": "bundle:procedure_meal_production.html",
          "NL": "bundle:procedure_meal_production.html"
        },
        "placements": [
          "topBarList"
        ]
      }
    },
    {
      "id": "MP_HYGIENE",
      "type": "BUTTON",
      "qEn": "Hygiene rules",
      "qFr": "Règles d’hygiène",
      "qNl": "Hygiënereglement",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "button": {
        "action": "renderMarkdownTemplate",
        "templateId": {
          "EN": "1T7ffxFfQlw3DH1gPVIre5qRJYrwHrGpv",
          "FR": "1T7ffxFfQlw3DH1gPVIre5qRJYrwHrGpv",
          "NL": "1T7ffxFfQlw3DH1gPVIre5qRJYrwHrGpv"
        },
        "placements": [
          "topBarList"
        ]
      }
    },
    {
      "id": "BELL_SH_BTN",
      "type": "BUTTON",
      "qEn": "Belliard – last 7 days",
      "qFr": "Belliard – last 7 days",
      "qNl": "Belliard – last 7 days",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "button": {
        "action": "listViewSearchPreset",
        "mode": "advanced",
        "fieldFilters": {
          "MP_DISTRIBUTOR": "Belliard"
        }
      }
    },
    {
      "id": "HUB_SH_BTN",
      "type": "BUTTON",
      "qEn": "HUB – last 7 days",
      "qFr": "HUB – last 7 days",
      "qNl": "HUB – last 7 days",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "button": {
        "action": "listViewSearchPreset",
        "mode": "advanced",
        "fieldFilters": {
          "MP_DISTRIBUTOR": "HUB"
        }
      }
    },
    {
      "id": "PHARE_SH_BTN",
      "type": "BUTTON",
      "qEn": "Le Phare – last 7 days",
      "qFr": "Le Phare – last 7 days",
      "qNl": "Le Phare – last 7 days",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "button": {
        "action": "listViewSearchPreset",
        "mode": "advanced",
        "fieldFilters": {
          "MP_DISTRIBUTOR": "Le Phare"
        }
      }
    },
    {
      "id": "MP_READY_FOR_PRODUCTION",
      "type": "BUTTON",
      "qEn": "Ready for Production",
      "qFr": "Ready for Production",
      "qNl": "Ready for Production",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "all": [
            {
              "fieldId": "__ckStep",
              "equals": "orderInfo"
            },
            {
              "fieldId": "status",
              "equals": "In progress"
            }
          ]
        }
      },
      "button": {
        "action": "updateRecord",
        "placements": [
          "form"
        ],
        "tone": "primary",
        "set": {
          "status": "In production"
        },
        "navigateTo": "form",
        "confirm": {
          "message": {
            "en": "You are about to lock the customer, service, production date and ordered quantities. Once locked:\n- these fields can no longer be changed\n- production data will be protected from accidental deletion\n- This action cannot be undone.\nDo you want to continue?",
            "fr": "You are about to lock the customer, service, production date and ordered quantities. Once locked:\n- these fields can no longer be changed\n- production data will be protected from accidental deletion\n- This action cannot be undone.\nDo you want to continue?",
            "nl": "You are about to lock the customer, service, production date and ordered quantities. Once locked:\n- these fields can no longer be changed\n- production data will be protected from accidental deletion\n- This action cannot be undone.\nDo you want to continue?"
          },
          "confirmLabel": {
            "en": "Yes, lock for production",
            "fr": "Yes, lock for production",
            "nl": "Yes, lock for production"
          },
          "cancelLabel": {
            "en": "Cancel",
            "fr": "Cancel",
            "nl": "Cancel"
          }
        }
      }
    },
    {
      "id": "MP_UNLOCK_FOR_EDIT",
      "type": "BUTTON",
      "qEn": "Unlock for Editing",
      "qFr": "Unlock for Editing",
      "qNl": "Unlock for Editing",
      "required": false,
      "listView": false,
      "options": [],
      "optionsFr": [],
      "optionsNl": [],
      "status": "Active",
      "visibility": {
        "showWhen": {
          "all": [
            {
              "fieldId": "status",
              "equals": "In production"
            },
            {
              "fieldId": "__ckRequestParam_admin",
              "equals": [
                "true",
                "1",
                "yes"
              ]
            }
          ]
        }
      },
      "button": {
        "action": "updateRecord",
        "placements": [
          "summaryBar"
        ],
        "set": {
          "status": "In progress"
        },
        "navigateTo": "form",
        "confirm": {
          "message": {
            "en": "Unlock this record to return it to In progress so you can edit order details again?"
          },
          "confirmLabel": {
            "en": "Unlock and edit"
          },
          "cancelLabel": {
            "en": "Cancel"
          }
        }
      }
    }
  ],
  "dedupRules": [
    {
      "id": "uniqueDailyCustService",
      "scope": "form",
      "keys": [
        "MP_DISTRIBUTOR",
        "MP_SERVICE",
        "MP_PREP_DATE"
      ],
      "matchMode": "caseInsensitive",
      "onConflict": "reject",
      "message": {
        "en": "This service is already exists for this customer and date."
      }
    }
  ],
  "definition": {
    "title": "Meal Production",
    "description": "Capture data of the Meal Production process",
    "destinationTab": "Meal Production Data",
    "languages": [
      "EN",
      "FR",
      "NL"
    ],
    "defaultLanguage": "EN",
    "languageSelectorEnabled": true,
    "questions": [
      {
        "id": "MP_ID",
        "type": "TEXT",
        "label": {
          "en": "Meal Production ID",
          "fr": "Meal Production ID",
          "nl": "Meal Production ID"
        },
        "required": true,
        "ui": {
          "summaryVisibility": "always"
        },
        "listView": false,
        "visibility": {
          "showWhen": {
            "fieldId": "NEVER_SHOW",
            "equals": "1"
          }
        },
        "autoIncrement": {
          "prefix": "MP-AA",
          "padLength": 6
        }
      },
      {
        "id": "MP_DISTRIBUTOR",
        "type": "CHOICE",
        "label": {
          "en": "Customer",
          "fr": "Client",
          "nl": "Klant"
        },
        "required": true,
        "ui": {
          "labelLayout": "inline"
        },
        "listView": true,
        "dataSource": {
          "id": "Distributor Data",
          "mode": "options",
          "statusAllowList": [
            "Active"
          ],
          "projection": [
            "DIST_NAME",
            "NICKNAME",
            "DIST_EMAIL",
            "DIST_PH",
            "DIST_ADDR_1",
            "DIST_ADDR_2",
            "DIST_CITY",
            "DIST_REGION",
            "DIST_COUNTRY",
            "DIST_POST_CODE"
          ],
          "limit": 100,
          "mapping": {
            "value": "NICKNAME"
          }
        },
        "changeDialog": {
          "when": {
            "fieldId": "MP_PREP_DATE",
            "notEmpty": true
          },
          "title": {
            "en": "Change Customer",
            "fr": "Changer de client?",
            "nl": "Klant wijzigen?"
          },
          "message": {
            "en": "Changing the customer will permanently delete production date and service as well as any data or photos you may have entered after service.\n\nA meal production record can only exist when customer, production date, and service are all filled in.\n\nIf you wish to proceed with the change, make sure you enter the production date and the service before leaving the page otherwise the record will be permanently deleted.\n\nThis action cannot be undone.",
            "fr": "Changer de client effacera toutes les informations d'ordre que vous avez entrées et toutes les données de production que vous avez entrées, voulez-vous continuer?",
            "nl": "Wijzigen van de klant zal alle orderinformatie die u hebt ingevoerd en alle productiedata die u hebt ingevoerd wissen, wilt u doorgaan?"
          },
          "confirmLabel": {
            "en": "Continue and delete subsequent data.",
            "fr": "Continuer et effacer les portions",
            "nl": "Doorgaan en klaren de porties"
          },
          "cancelLabel": {
            "en": "Cancel and keep current customer",
            "fr": "Annuler",
            "nl": "Annuleren"
          }
        },
        "clearOnChange": {
          "mode": "ordered"
        },
        "listViewSort": {
          "direction": "asc",
          "priority": 3
        }
      },
      {
        "id": "MP_SERVICE",
        "type": "CHOICE",
        "label": {
          "en": "Service",
          "fr": "Service",
          "nl": "Dienst"
        },
        "required": true,
        "listView": true,
        "ui": {
          "labelLayout": "inline"
        },
        "options": {
          "en": [
            "Lunch",
            "Dinner"
          ],
          "fr": [
            "Service de midi",
            "Service du soir"
          ],
          "nl": [
            "Lunch",
            "Avonddienst"
          ],
          "raw": [
            {
              "Options (EN)": "Lunch",
              "Options (FR)": "Service de midi",
              "Options (NL)": "Lunch",
              "__ckOptionValue": "Lunch"
            },
            {
              "Options (EN)": "Dinner",
              "Options (FR)": "Service du soir",
              "Options (NL)": "Avonddienst",
              "__ckOptionValue": "Dinner"
            }
          ]
        },
        "changeDialog": {
          "when": {
            "any": [
              {
                "fieldId": "MP_COOK_NAME",
                "notEmpty": true
              },
              {
                "fieldId": "MP_VOLUNTEER",
                "notEmpty": true
              },
              {
                "lineItems": {
                  "groupId": "MP_MEALS_REQUEST",
                  "when": {
                    "fieldId": "ORD_QTY",
                    "greaterThan": 0
                  },
                  "match": "any"
                }
              }
            ]
          },
          "title": {
            "en": "Change service",
            "fr": "Changer de service?",
            "nl": "Service wijzigen?"
          },
          "message": {
            "en": "Changing the service will permanently delete any data or photos entered after the service.\n\nThis action cannot be undone.",
            "fr": "Changer de service effacera toutes les portions que vous avez entrées et toutes les données de production que vous avez entrées, voulez-vous continuer?",
            "nl": "Wijzigen van de service zal alle portions die u hebt ingevoerd en alle productiedata die u hebt ingevoerd wissen, wilt u doorgaan?"
          },
          "confirmLabel": {
            "en": "Continue — Delete subsequent data",
            "fr": "Continuer et effacer les portions",
            "nl": "Doorgaan en klaren de porties"
          },
          "cancelLabel": {
            "en": "Cancel — Keep current service",
            "fr": "Annuler",
            "nl": "Annuleren"
          }
        },
        "clearOnChange": {
          "mode": "ordered"
        },
        "listViewSort": {
          "direction": "asc",
          "priority": 2
        }
      },
      {
        "id": "MP_COOK_NAME",
        "type": "CHOICE",
        "label": {
          "en": "Responsible cook ",
          "fr": "Cuisinier responsable",
          "nl": "Verantwoordelijke kok"
        },
        "required": true,
        "listView": true,
        "ui": {
          "labelLayout": "inline"
        },
        "options": {
          "en": [
            "⁠Akkara",
            "⁠Anjali",
            "⁠Roya",
            "⁠Saga",
            "⁠Nezka",
            "⁠Haven",
            "⁠Ruby",
            "⁠Aline"
          ],
          "fr": [
            "⁠Akkara",
            "⁠Anjali",
            "⁠Roya",
            "⁠Saga",
            "⁠Nezka",
            "⁠Haven",
            "⁠Ruby",
            "⁠Aline"
          ],
          "nl": [
            "⁠Akkara",
            "⁠Anjali",
            "⁠Roya",
            "⁠Saga",
            "⁠Nezka",
            "⁠Haven",
            "⁠Ruby",
            "⁠Aline"
          ],
          "raw": [
            {
              "Options (EN)": "⁠Akkara",
              "Options (FR)": "⁠Akkara",
              "Options (NL)": "⁠Akkara",
              "__ckOptionValue": "⁠Akkara"
            },
            {
              "Options (EN)": "⁠Anjali",
              "Options (FR)": "⁠Anjali",
              "Options (NL)": "⁠Anjali",
              "__ckOptionValue": "⁠Anjali"
            },
            {
              "Options (EN)": "⁠Roya",
              "Options (FR)": "⁠Roya",
              "Options (NL)": "⁠Roya",
              "__ckOptionValue": "⁠Roya"
            },
            {
              "Options (EN)": "⁠Saga",
              "Options (FR)": "⁠Saga",
              "Options (NL)": "⁠Saga",
              "__ckOptionValue": "⁠Saga"
            },
            {
              "Options (EN)": "⁠Nezka",
              "Options (FR)": "⁠Nezka",
              "Options (NL)": "⁠Nezka",
              "__ckOptionValue": "⁠Nezka"
            },
            {
              "Options (EN)": "⁠Haven",
              "Options (FR)": "⁠Haven",
              "Options (NL)": "⁠Haven",
              "__ckOptionValue": "⁠Haven"
            },
            {
              "Options (EN)": "⁠Ruby",
              "Options (FR)": "⁠Ruby",
              "Options (NL)": "⁠Ruby",
              "__ckOptionValue": "⁠Ruby"
            },
            {
              "Options (EN)": "⁠Aline",
              "Options (FR)": "⁠Aline",
              "Options (NL)": "⁠Aline",
              "__ckOptionValue": "⁠Aline"
            }
          ]
        }
      },
      {
        "id": "MP_VOLUNTEER",
        "type": "TEXT",
        "label": {
          "en": "Volunteer cook",
          "fr": "Cuisinier bénévole",
          "nl": "Vrijwillige kok"
        },
        "required": false,
        "listView": false,
        "ui": {
          "labelLayout": "inline"
        }
      },
      {
        "id": "MP_PREP_DATE",
        "type": "DATE",
        "label": {
          "en": "Date",
          "fr": "Date",
          "nl": "Datum"
        },
        "required": true,
        "listView": true,
        "ui": {
          "labelLayout": "inline"
        },
        "changeDialog": {
          "when": {
            "all": [
              {
                "fieldId": "MP_SERVICE",
                "notEmpty": true
              },
              {
                "fieldId": "MP_PREP_DATE",
                "isInFuture": true
              }
            ]
          },
          "title": {
            "en": "Change Production date",
            "fr": "Changer la date de production ?",
            "nl": "Productiedatum wijzigen?"
          },
          "message": {
            "en": "Changing the production date will permanently delete service as well as any data or photos entered after service.\n\nA meal production record can only exist when customer, production date, and service are all filled in.\n\nIf you wish to proceed with the change, make sure you enter the service before leaving the page otherwise the record will be permanently deleted.\n\nThis action cannot be undone.",
            "fr": "Changer la date de production d'une production de repas en cours supprimera définitivement toutes les données de service déjà enregistrées. Voulez-vous continuer ?",
            "nl": "Als u de productiedatum van een lopende maaltijdproductie wijzigt, worden alle eerder opgeslagen servicegegevens definitief verwijderd. Wilt u doorgaan?"
          },
          "confirmLabel": {
            "en": "Continue and delete subsequent data.",
            "fr": "Oui, supprimer définitivement les données déjà saisies",
            "nl": "Ja, verwijder de eerder ingevoerde gegevens definitief"
          },
          "cancelLabel": {
            "en": "Cancel and keep current production date",
            "fr": "Non, conserver la date de production actuelle",
            "nl": "Nee, behoud de huidige productiedatum"
          },
          "dedupMode": "never"
        },
        "clearOnChange": {
          "mode": "ordered"
        },
        "selectionEffects": [
          {
            "id": "reset_step_on_prep_date_change",
            "type": "setValue",
            "fieldId": "__ckStep",
            "value": "order"
          }
        ],
        "listViewSort": {
          "direction": "desc",
          "priority": 1
        }
      },
      {
        "id": "MP_EXP_DATE",
        "type": "DATE",
        "label": {
          "en": "Expiration Date",
          "fr": "Date d'expiration",
          "nl": "Vervaldatum"
        },
        "required": false,
        "ui": {
          "summaryVisibility": "always"
        },
        "listView": false,
        "options": {
          "en": [],
          "fr": [],
          "nl": []
        },
        "derivedValue": {
          "op": "addDays",
          "dependsOn": "MP_PREP_DATE",
          "offsetDays": 2,
          "hidden": true
        },
        "visibility": {
          "showWhen": {
            "fieldId": "MP_SERVICE",
            "equals": "Ski"
          }
        }
      },
      {
        "id": "MP_MEALS_REQUEST",
        "type": "LINE_ITEM_GROUP",
        "label": {
          "en": "Meals",
          "fr": "Repas",
          "nl": "Meals"
        },
        "required": false,
        "ui": {
          "hideLabel": true
        },
        "listView": false,
        "options": {
          "en": [
            "MEAL_TYPE",
            "ORD_QTY",
            "MP_IS_REHEAT",
            "LEFTOVER_INFO",
            "MP_TO_COOK",
            "LEFTOVER_VAL",
            "MP_COOK_TEMP",
            "TEMP_EVD",
            "FINAL_QTY"
          ],
          "fr": [
            "CHOICE",
            "NUMBER",
            "CHOICE",
            "CHOICE",
            "NUMBER",
            "NUMBER",
            "CHECKBOX",
            "FILE_UPLOAD",
            "NUMBER"
          ],
          "nl": [
            "Dietary category",
            "Ordered",
            "Will you use leftovers?",
            "Leftover information",
            "To Cook",
            "Leftover",
            "All pots ≥63°C: Confirm",
            "Add photo",
            "Delivered Portions"
          ],
          "raw": [
            {
              "ID": "MEAL_TYPE",
              "Type": "CHOICE",
              "Label EN": "Dietary category",
              "Label FR": "Catégorie alimentaire",
              "Label NL": "Dieetcategorie",
              "Required?": true,
              "Options (EN)": "REF:PortionTypeOptions",
              "Options (FR)": "",
              "Options (NL)": "",
              "Config (JSON/REF)": "{\n  \"pair\": \"meal_qty\",\n  \"control\": \"select\",\n  \"optionFilter\": {\n    \"dependsOn\": [\"MP_DISTRIBUTOR\", \"MP_SERVICE\", \"MP_PREP_DATE\"],\n    \"optionMap\": {\n      \"HUB\": [\n        \"Vegetarian\"\n      ],\n      \"Belliard||Lunch||Sunday\": [\n        \"Vegetarian\",\n        \"Vegan\",\n        \"Diabetic\",\n        \"No-salt\",\n        \"Standard\"\n      ],\n      \"Belliard||Lunch\": [\n        \"Vegetarian\",\n        \"Vegan\",\n        \"Diabetic\",\n        \"No-salt\"\n      ],\n      \"Belliard||Dinner\": [\n        \"Vegetarian\",\n        \"Vegan\",\n        \"Diabetic\",\n        \"No-salt\",\n        \"Standard\"\n      ],\n      \"Le Phare\": [\n        \"Vegetarian\"\n      ]\n    }\n  },\n  \"ui\": {\n    \"hideLabel\": true\n  }\n}",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "Edit",
              "__ckOptionValue": "MEAL_TYPE"
            },
            {
              "ID": "ORD_QTY",
              "Type": "NUMBER",
              "Label EN": "Ordered",
              "Label FR": "Commandé",
              "Label NL": "Besteld",
              "Required?": true,
              "Options (EN)": "",
              "Options (FR)": "",
              "Options (NL)": "",
              "Config (JSON/REF)": "{\n  \"pair\": \"meal_qty\",\n  \"validationRules\": [\n    {\n      \"phase\": \"submit\",\n      \"then\": { \"fieldId\": \"ORD_QTY\", \"integer\": true },\n      \"message\": { \"en\": \"Enter a whole number\", \"fr\": \"Entrez un nombre entier\", \"nl\": \"Voer een geheel getal in\" },\n      \"when\": { \"fieldId\": \"ORD_QTY\", \"notEmpty\": true }\n    },\n    {\n      \"when\": { \"fieldId\": \"ORD_QTY\", \"lessThan\": 0 },\n      \"then\": { \"fieldId\": \"ORD_QTY\", \"min\": 0 },\n      \"message\": {\n        \"en\": \"Ordered portions must be 0 or more\",\n        \"fr\": \"Les portions demandées doivent être égales ou supérieures à 0\",\n        \"nl\": \"Gevraagde porties moeten 0 of meer zijn\"\n      },\n      \"phase\": \"submit\"\n    }\n  ],\n  \"requiredMessage\": {\n    \"en\": \"Enter the number of portions.\",\n    \"fr\": \"Entrez le nombre de portions.\",\n    \"nl\": \"Voer het aantal porties in.\"\n  }\n}\n",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "",
              "__ckOptionValue": "ORD_QTY"
            },
            {
              "ID": "MP_IS_REHEAT",
              "Type": "CHOICE",
              "Label EN": "Will you use leftovers?",
              "Label FR": "On utilise des restes réchauffés ?",
              "Label NL": "Is dit gerecht opgewarmde rest ?",
              "Required?": true,
              "Options (EN)": "REF:YesNoOptions",
              "Options (FR)": "",
              "Options (NL)": "",
              "Config (JSON/REF)": "{\n  \"pair\": \"meal_qty\",\n  \"selectionEffects\": [\n    {\n      \"id\": \"delete_mp_to_cook_sync\",\n      \"type\": \"deleteLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"targetEffectId\": \"mp_to_cook_sync\"\n    },\n    {\n      \"id\": \"mp_to_cook_sync\",\n      \"type\": \"addLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"preset\": { \"PREP_QTY\": \"$row.MP_TO_COOK\", \"PREP_TYPE\": \"Cook\" },\n      \"hideRemoveButton\": true\n    },\n    {\n      \"id\": \"mp_left_overs_init\",\n      \"type\": \"addLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"triggerValues\": [\"Yes\"],\n      \"preset\": { \"PREP_TYPE\": \"\" }\n    }\n  ]\n}",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "Edit",
              "__ckOptionValue": "MP_IS_REHEAT"
            },
            {
              "ID": "LEFTOVER_INFO",
              "Type": "CHOICE",
              "Label EN": "Leftover information",
              "Label FR": "Leftover information",
              "Label NL": "Leftover information",
              "Required?": false,
              "Options (EN)": "No leftover, Leftover Yes",
              "Options (FR)": "No leftover, Leftover Yes",
              "Options (NL)": "No leftover, Leftover Yes",
              "Config (JSON/REF)": "{\n    \"optionFilter\": {\n        \"dependsOn\": [\n            \"MP_IS_REHEAT\"\n        ],\n        \"optionMap\": {\n            \"Yes\": [\n                \"Leftover Yes\"\n            ],\n            \"No\": [\n                \"No leftover\"\n            ]\n        }\n    },\n    \"ui\": {\n        \"hideLabel\": true\n    }\n}",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "",
              "__ckOptionValue": "LEFTOVER_INFO"
            },
            {
              "ID": "MP_TO_COOK",
              "Type": "NUMBER",
              "Label EN": "To Cook",
              "Label FR": "To Cook",
              "Label NL": "To Cook",
              "Required?": true,
              "Options (EN)": "",
              "Options (FR)": "",
              "Options (NL)": "",
              "Config (JSON/REF)": "{\n  \"derivedValue\": {\n    \"op\": \"calc\",\n    \"expression\": \"{ORD_QTY} - SUM(MP_TYPE_LI.PREP_QTY)\",\n    \"lineItemFilters\": [\n      {\n        \"ref\": \"MP_TYPE_LI.PREP_QTY\",\n        \"when\": {\n          \"fieldId\": \"PREP_TYPE\",\n          \"equals\": [\n            \"Entire dish\"\n          ]\n        }\n      }\n    ]\n  },\n  \"selectionEffects\": [\n    {\n      \"id\": \"delete_mp_to_cook_sync\",\n      \"type\": \"deleteLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"targetEffectId\": \"mp_to_cook_sync\"\n    },\n    {\n      \"id\": \"mp_to_cook_sync\",\n      \"type\": \"addLineItems\",\n      \"groupId\": \"MP_TYPE_LI\",\n      \"when\": {\n        \"fieldId\": \"MP_TO_COOK\",\n        \"greaterThan\": 0\n      },\n      \"preset\": {\n        \"PREP_QTY\": \"$row.MP_TO_COOK\",\n        \"PREP_TYPE\": \"Cook\"\n      },\n      \"hideRemoveButton\": true\n    }\n  ],\n  \"visibility\": {\n    \"showWhen\": {\n      \"any\": [\n        {\n          \"fieldId\": \"MP_IS_REHEAT\",\n          \"equals\": [\"No\"]\n        },\n        {\n          \"all\": [\n            {\n              \"fieldId\": \"MP_IS_REHEAT\",\n              \"equals\": [\"Yes\"]\n            },\n            {\n              \"lineItems\": {\n                \"groupId\": \"MP_MEALS_REQUEST\",\n                \"subGroupPath\": [\"MP_TYPE_LI\", \"MP_INGREDIENTS_LI\"],\n                \"match\": \"any\"\n              }\n            }\n          ]\n        }\n      ]\n    }\n  }\n}",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "",
              "__ckOptionValue": "MP_TO_COOK"
            },
            {
              "ID": "LEFTOVER_VAL",
              "Type": "NUMBER",
              "Label EN": "Leftover",
              "Label FR": "Restes",
              "Label NL": "Resten",
              "Required?": false,
              "Options (EN)": "",
              "Options (FR)": "",
              "Options (NL)": "",
              "Config (JSON/REF)": "{\n  \"derivedValue\": {\n    \"op\": \"calc\",\n    \"expression\": \"{ORD_QTY} - {MP_TO_COOK}\"\n  },\n  \"visibility\": {\n    \"showWhen\": {\n      \"fieldId\": \"LEFTOVER_VAL\",\n      \"greaterThan\": 0\n    }\n  }\n}",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "",
              "__ckOptionValue": "LEFTOVER_VAL"
            },
            {
              "ID": "MP_COOK_TEMP",
              "Type": "CHECKBOX",
              "Label EN": "All pots ≥63°C: Confirm",
              "Label FR": "Toutes les marmites ≥63°C : confirmer",
              "Label NL": "Alle kookpotten ≥63°C: bevestigen",
              "Required?": true,
              "Options (EN)": [],
              "Options (FR)": [],
              "Options (NL)": [],
              "Config (JSON/REF)": "{\n  \"pair\": \"core_temp\",\n  \"requiredMessage\": {\n    \"en\": \"Confirm that all pots reached at least 63°C.\",\n    \"fr\": \"Confirmez que toutes les marmites ont atteint au moins 63°C.\",\n    \"nl\": \"Bevestig dat alle kookpotten minstens 63��C hebben bereikt.\"\n  }\n}",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "",
              "__ckOptionValue": "MP_COOK_TEMP"
            },
            {
              "ID": "TEMP_EVD",
              "Type": "FILE_UPLOAD",
              "Label EN": "Add photo",
              "Label FR": "Ajouter une photo",
              "Label NL": "Foto toevoegen",
              "Required?": true,
              "Options (EN)": "",
              "Options (FR)": "",
              "Options (NL)": "",
              "Config (JSON/REF)": "{\n  \"uploadConfig\": {\n    \"destinationFolderId\": \"1xiEjwfcbMaF6XqqAPlqbA8LNd5HiwjGV\",\n    \"linkLabel\": {\n      \"en\": \"Photo {n}\",\n      \"fr\": \"Photo {n}\",\n      \"nl\": \"Foto {n}\"\n    },\n    \"minFiles\": 1,\n    \"maxFiles\": 5,\n    \"maxFileSizeMb\": 10,\n    \"allowedMimeTypes\": [\n      \"image/*\"\n    ],\n    \"errorMessages\": {\n      \"minFiles\": {\n        \"en\": \"Add one photo per cooking pot.\",\n        \"fr\": \"Ajoutez une photo par marmite de cuisson.\",\n        \"nl\": \"Voeg één foto per kookpot toe.\"\n      },\n      \"maxFiles\": {\n        \"en\": \"The maximum number of photos is {max}\",\n        \"fr\": \"Le nombre maximum de photos est de {max}\",\n        \"nl\": \"Het maximum aantal foto's is {max}\"\n      },\n      \"maxFileSizeMb\": {\n        \"en\": \"The selected photo(s) exceed the {mb}MB limit. Please take other photo(s) using normal camera mode (avoid zoom, no filters, no HD mode).\",\n        \"fr\": \"La taille maximale de la photo est de {mb}MB\",\n        \"nl\": \"De maximale bestandsgrootte is {mb}MB\"\n      }\n    },\n    \"compression\": {\n      \"images\": {\n        \"maxDimension\": 1600,\n        \"quality\": 0.82,\n        \"outputType\": \"keep\"\n      }\n    },\n    \"helperText\": {\n      \"remainingOne\": {\n        \"en\": \"You need to add {count} more photo\",\n        \"fr\": \"Vous devez ajouter {count} photo supplémentaire\",\n        \"nl\": \"Je moet {count} foto toevoegen\"\n      },\n      \"remainingMany\": {\n        \"en\": \"You need to add {count} more photos\",\n        \"fr\": \"Vous devez ajouter {count} photos supplémentaires\",\n        \"nl\": \"Je moet {count} foto's toevoegen\"\n      }\n    },\n    \"ui\": {\n      \"variant\": \"progressive\"\n    }\n  },\n  \"pair\": \"core_temp\",\n  \"requiredMessage\": {\n    \"en\": \"Add one photo per cooking pot.\",\n    \"fr\": \"Ajoutez une photo par marmite de cuisson.\",\n    \"nl\": \"Voeg één foto per kookpot toe.\"\n  }\n}",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "",
              "__ckOptionValue": "TEMP_EVD"
            },
            {
              "ID": "FINAL_QTY",
              "Type": "NUMBER",
              "Label EN": "Delivered Portions",
              "Label FR": "Portions livrées",
              "Label NL": "Maaltijden",
              "Required?": true,
              "Options (EN)": "",
              "Options (FR)": "",
              "Options (NL)": "",
              "Config (JSON/REF)": "{\n    \"pair\": \"meal_qty\",\n    \"validationRules\": [\n        {\n            \"when\": {\n                \"fieldId\": \"ORD_QTY\",\n                \"notEmpty\": true\n            },\n            \"then\": {\n                \"fieldId\": \"FINAL_QTY\",\n                \"minFieldId\": \"ORD_QTY\"\n            },\n            \"message\": {\n                \"en\": \"Delivered portions must be equal to or greater than ordered portions.\",\n                \"fr\": \"Les portions livrées doivent être égales ou supérieures aux portions demandées.\",\n                \"nl\": \"De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties.\"\n            }\n        }\n    ],\n    \"derivedValue\": {\n        \"op\": \"copy\",\n        \"dependsOn\": \"ORD_QTY\",\n        \"applyOn\": \"change\",\n        \"when\": \"always\",\n        \"copyMode\": \"allowIncrease\"\n    },\n    \"requiredMessage\": {\n      \"en\": \"Delivered portions must be equal to or greater than ordered portions.\",\n      \"fr\": \"Les portions livrées doivent être égales ou supérieures aux portions demandées.\",\n      \"nl\": \"De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties.\"\n    }\n  }",
              "Option Filter (JSON)": "",
              "Validation Rules (JSON)": "",
              "List View?": "",
              "Edit Options": "",
              "__ckOptionValue": "FINAL_QTY"
            }
          ]
        },
        "lineItemConfig": {
          "ui": {
            "mode": "table",
            "tableColumnWidths": {
              "MEAL_TYPE": "20%",
              "ORD_QTY": "20%",
              "MP_COOK_TEMP": "25%",
              "TEMP_EVD": "25%",
              "FINAL_QTY": "40%"
            },
            "collapsedFields": [
              {
                "fieldId": "MEAL_TYPE",
                "showLabel": false
              },
              {
                "fieldId": "ORD_QTY",
                "showLabel": true
              },
              {
                "fieldId": "MP_IS_REHEAT",
                "showLabel": true
              }
            ],
            "expandGate": "collapsedFieldsValid",
            "defaultCollapsed": true,
            "rowDisclaimer": {
              "cases": [
                {
                  "text": {
                    "en": "Update Ordered portions if required",
                    "fr": "Mettre à jour les portions demandées si nécessaire",
                    "nl": "Bijwerken van gevraagde porties als nodig"
                  },
                  "when": {
                    "all": [
                      {
                        "fieldId": "__ckSelectionEffectId",
                        "equals": "leftover"
                      },
                      {
                        "not": {
                          "fieldId": "__ckStep",
                          "equals": [
                            "foodSafety",
                            "portioning"
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            },
            "showItemPill": false,
            "addButtonPlacement": "hidden",
            "allowRemoveAutoRows": false,
            "saveDisabledRows": true
          },
          "maxRows": 200,
          "addButtonLabel": {
            "en": "Add meals",
            "fr": "Ajouter des repas",
            "nl": "Repas toevoegen"
          },
          "anchorFieldId": "MEAL_TYPE",
          "addMode": "auto",
          "totals": [
            {
              "type": "sum",
              "fieldId": "ORD_QTY",
              "label": {
                "en": "Total ordered",
                "fr": "Total commandé",
                "nl": "Totaal besteld"
              },
              "decimalPlaces": 0
            },
            {
              "type": "sum",
              "fieldId": "FINAL_QTY",
              "label": {
                "en": "Total delivered",
                "fr": "Total livré",
                "nl": "Totaal geleverd"
              },
              "decimalPlaces": 0
            }
          ],
          "fields": [
            {
              "id": "MEAL_TYPE",
              "type": "CHOICE",
              "labelEn": "Dietary category",
              "labelFr": "Catégorie alimentaire",
              "labelNl": "Dieetcategorie",
              "required": true,
              "pair": "meal_qty",
              "ui": {
                "hideLabel": true
              },
              "options": [
                "Standard",
                "Vegetarian",
                "Vegan",
                "Diabetic",
                "No-salt"
              ],
              "optionsFr": [
                "Standard",
                "Végétarien",
                "Végan",
                "Diabétique",
                "Sans sel"
              ],
              "optionsNl": [
                "Standard_NL",
                "Végétarien_NL",
                "Végan_NL",
                "Diabétique_NL",
                "Sans sel_NL"
              ],
              "optionsRaw": [
                {
                  "optionEn": "Standard",
                  "optionFr": "Standard",
                  "optionNl": "Standard_NL",
                  "Icon": "🍽",
                  "__ckOptionValue": "Standard"
                },
                {
                  "optionEn": "Vegetarian",
                  "optionFr": "Végétarien",
                  "optionNl": "Végétarien_NL",
                  "Icon": "🥕",
                  "__ckOptionValue": "Vegetarian"
                },
                {
                  "optionEn": "Vegan",
                  "optionFr": "Végan",
                  "optionNl": "Végan_NL",
                  "Icon": "🌱",
                  "__ckOptionValue": "Vegan"
                },
                {
                  "optionEn": "Diabetic",
                  "optionFr": "Diabétique",
                  "optionNl": "Diabétique_NL",
                  "Icon": "🩺",
                  "__ckOptionValue": "Diabetic"
                },
                {
                  "optionEn": "No-salt",
                  "optionFr": "Sans sel",
                  "optionNl": "Sans sel_NL",
                  "Icon": "svg:no_salt.min.svg",
                  "__ckOptionValue": "No-salt"
                }
              ],
              "optionFilter": {
                "dependsOn": [
                  "MP_DISTRIBUTOR",
                  "MP_SERVICE",
                  "MP_PREP_DATE"
                ],
                "optionMap": {
                  "HUB": [
                    "Vegetarian"
                  ],
                  "Belliard||Lunch||Sunday": [
                    "Vegetarian",
                    "Vegan",
                    "Diabetic",
                    "No-salt",
                    "Standard"
                  ],
                  "Belliard||Lunch": [
                    "Vegetarian",
                    "Vegan",
                    "Diabetic",
                    "No-salt"
                  ],
                  "Belliard||Dinner": [
                    "Vegetarian",
                    "Vegan",
                    "Diabetic",
                    "No-salt",
                    "Standard"
                  ],
                  "Le Phare": [
                    "Vegetarian"
                  ]
                }
              }
            },
            {
              "id": "ORD_QTY",
              "type": "NUMBER",
              "labelEn": "Ordered",
              "labelFr": "Portions demandées",
              "labelNl": "Aantal",
              "required": true,
              "requiredMessage": {
                "en": "Enter the number of portions.",
                "fr": "Entrez le nombre de portions.",
                "nl": "Voer het aantal porties in."
              },
              "ui": {
                "helperText": {
                  "en": "Enter the number of portions.",
                  "fr": "Entrez le nombre de portions.",
                  "nl": "Voer het aantal porties in."
                },
                "helperPlacement": "belowLabel"
              },
              "pair": "meal_qty",
              "options": [],
              "optionsFr": [],
              "optionsNl": [],
              "validationRules": [
                {
                  "phase": "submit",
                  "then": {
                    "fieldId": "ORD_QTY",
                    "integer": true
                  },
                  "message": {
                    "en": "Enter a whole number",
                    "fr": "Entrez un nombre entier",
                    "nl": "Voer een geheel getal in"
                  },
                  "when": {
                    "fieldId": "ORD_QTY",
                    "notEmpty": true
                  }
                },
                {
                  "when": {
                    "fieldId": "ORD_QTY",
                    "lessThan": 0
                  },
                  "then": {
                    "fieldId": "ORD_QTY",
                    "min": 0
                  },
                  "message": {
                    "en": "Ordered portions must be 0 or more",
                    "fr": "Les portions demandées doivent être égales ou supérieures à 0",
                    "nl": "Gevraagde porties moeten 0 of meer zijn"
                  },
                  "phase": "submit"
                }
              ],
              "changeDialog": {
                "when": {
                  "fieldId": "ORD_QTY",
                  "equals": 0
                },
                "title": {
                  "en": "Update ordered portions",
                  "fr": "Mettre à jour les portions demandées",
                  "nl": "Bijwerken van gevraagde porties"
                },
                "message": {
                  "en": "Changing the ordered number will remove any production data (leftover, recipe to cook, changes to ingredients, ingredients receipt photo) you may have previously entered. Do you want to proceed?",
                  "fr": "Changer le nombre de portions commandées supprimera toutes les données de production (restes, recette à cuisiner, modifications des ingrédients, photos de réception des ingrédients) que vous avez peut-être précédemment entrées. Voulez-vous continuer ?",
                  "nl": "Wijzigen van het aantal gevraagde porties zal alle productiedata (resten, recept te koken, wijzigingen in ingrediënten, foto's van ingrediëntenontvangst) die u mogelijk eerder hebt ingevoerd, verwijderen. Wilt u doorgaan?"
                },
                "confirmLabel": {
                  "en": "Yes, change the ordered number and clear out data previously entered.",
                  "fr": "Oui, changer le nombre de portions commandées et effacer les données précédemment entrées.",
                  "nl": "Ja, wijzig het aantal gevraagde porties en verwijder de eerder ingevoerde data."
                },
                "cancelLabel": {
                  "en": "No, keep current data and ordered number",
                  "fr": "Non, garder les données actuelles et le nombre commandé",
                  "nl": "Nee, houd de huidige gegevens en het bestelde aantal"
                },
                "primaryAction": "confirm"
              },
              "selectionEffects": [
                {
                  "type": "deleteLineItems",
                  "groupId": "MP_TYPE_LI",
                  "when": {
                    "fieldId": "ORD_QTY",
                    "equals": 0
                  }
                },
                {
                  "type": "setValue",
                  "fieldId": "MP_IS_REHEAT",
                  "when": {
                    "fieldId": "ORD_QTY",
                    "equals": 0
                  },
                  "value": null
                },
                {
                  "id": "sync_final_qty_from_ord_qty",
                  "type": "setValue",
                  "fieldId": "FINAL_QTY",
                  "value": "$row.ORD_QTY"
                }
              ]
            },
            {
              "id": "MP_IS_REHEAT",
              "type": "CHOICE",
              "labelEn": "Will you use leftovers?",
              "labelFr": "On utilise des restes réchauffés ?",
              "labelNl": "Is dit gerecht opgewarmde rest ?",
              "required": true,
              "pair": "meal_qty",
              "options": [
                "No",
                "Yes"
              ],
              "optionsFr": [
                "Non",
                "Oui"
              ],
              "optionsNl": [
                "Nee",
                "Ja"
              ],
              "optionsRaw": [
                {
                  "Options (EN)": "No",
                  "Options (FR)": "Non",
                  "Options (NL)": "Nee",
                  "__ckOptionValue": "No"
                },
                {
                  "Options (EN)": "Yes",
                  "Options (FR)": "Oui",
                  "Options (NL)": "Ja",
                  "__ckOptionValue": "Yes"
                }
              ],
              "selectionEffects": [
                {
                  "type": "deleteLineItems",
                  "groupId": "MP_TYPE_LI",
                  "id": "delete_mp_to_cook_sync",
                  "targetEffectId": "mp_to_cook_sync"
                },
                {
                  "type": "deleteLineItems",
                  "groupId": "MP_TYPE_LI",
                  "id": "delete_mp_left_overs_init",
                  "targetEffectId": "mp_left_overs_init",
                  "triggerValues": [
                    "No"
                  ]
                },
                {
                  "type": "addLineItems",
                  "groupId": "MP_TYPE_LI",
                  "id": "mp_to_cook_sync",
                  "hideRemoveButton": true,
                  "preset": {
                    "PREP_QTY": "$row.MP_TO_COOK",
                    "PREP_TYPE": "Cook"
                  }
                },
                {
                  "type": "addLineItems",
                  "groupId": "MP_TYPE_LI",
                  "id": "mp_left_overs_init",
                  "triggerValues": [
                    "Yes"
                  ],
                  "preset": {
                    "PREP_TYPE": ""
                  }
                }
              ]
            },
            {
              "id": "LEFTOVER_INFO",
              "type": "CHOICE",
              "labelEn": "Leftover information",
              "labelFr": "Leftover information",
              "labelNl": "Leftover information",
              "required": false,
              "ui": {
                "hideLabel": true
              },
              "options": [
                "No leftover",
                "Leftover Yes"
              ],
              "optionsFr": [
                "No leftover",
                "Leftover Yes"
              ],
              "optionsNl": [
                "No leftover",
                "Leftover Yes"
              ],
              "optionFilter": {
                "dependsOn": [
                  "MP_IS_REHEAT"
                ],
                "optionMap": {
                  "Yes": [
                    "Leftover Yes"
                  ],
                  "No": [
                    "No leftover"
                  ]
                }
              }
            },
            {
              "id": "MP_TO_COOK",
              "type": "NUMBER",
              "labelEn": "To Cook",
              "labelFr": "To Cook",
              "labelNl": "To Cook",
              "required": true,
              "options": [],
              "optionsFr": [],
              "optionsNl": [],
              "visibility": {
                "showWhen": {
                  "any": [
                    {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "No"
                      ]
                    },
                    {
                      "all": [
                        {
                          "fieldId": "MP_IS_REHEAT",
                          "equals": [
                            "Yes"
                          ]
                        },
                        {
                          "lineItems": {
                            "groupId": "MP_MEALS_REQUEST",
                            "subGroupPath": [
                              "MP_TYPE_LI",
                              "MP_INGREDIENTS_LI"
                            ],
                            "match": "any"
                          }
                        }
                      ]
                    }
                  ]
                }
              },
              "selectionEffects": [
                {
                  "type": "deleteLineItems",
                  "groupId": "MP_TYPE_LI",
                  "id": "delete_mp_to_cook_sync",
                  "targetEffectId": "mp_to_cook_sync"
                },
                {
                  "type": "addLineItems",
                  "groupId": "MP_TYPE_LI",
                  "id": "mp_to_cook_sync",
                  "when": {
                    "fieldId": "MP_TO_COOK",
                    "greaterThan": 0
                  },
                  "hideRemoveButton": true,
                  "preset": {
                    "PREP_QTY": "$row.MP_TO_COOK",
                    "PREP_TYPE": "Cook"
                  }
                }
              ],
              "derivedValue": {
                "op": "calc",
                "expression": "{ORD_QTY} - SUM(MP_TYPE_LI.PREP_QTY)",
                "lineItemFilters": [
                  {
                    "ref": "MP_TYPE_LI.PREP_QTY",
                    "when": {
                      "fieldId": "PREP_TYPE",
                      "equals": [
                        "Entire dish"
                      ]
                    }
                  }
                ]
              }
            },
            {
              "id": "LEFTOVER_VAL",
              "labelEn": "Leftover",
              "labelFr": "Restes",
              "labelNl": "Resten",
              "options": [],
              "optionsFr": [],
              "optionsNl": [],
              "required": false,
              "type": "NUMBER",
              "derivedValue": {
                "op": "calc",
                "expression": "{ORD_QTY} - {MP_TO_COOK}"
              },
              "visibility": {
                "showWhen": {
                  "fieldId": "LEFTOVER_VAL",
                  "greaterThan": 0
                }
              }
            },
            {
              "id": "MP_COOK_TEMP",
              "type": "CHECKBOX",
              "labelEn": "All pots ≥63°C: Confirm",
              "labelFr": "Toutes les marmites ≥63°C : confirmer",
              "labelNl": "Alle kookpotten ≥63°C: bevestigen",
              "required": true,
              "requiredMessage": {
                "en": "Confirm that all pots reached at least 63°C.",
                "fr": "Confirmez que toutes les marmites ont atteint au moins 63°C.",
                "nl": "Bevestig dat alle kookpotten minstens 63°C hebben bereikt."
              },
              "validationRules": [
                {
                  "when": {
                    "all": [
                      {
                        "not": {
                          "fieldId": "MP_COOK_TEMP",
                          "equals": [
                            "__never__"
                          ]
                        }
                      },
                      {
                        "fieldId": "MP_PREP_DATE",
                        "isInFuture": true
                      },
                      {
                        "fieldId": "__ckStep",
                        "equals": [
                          "foodSafety"
                        ]
                      }
                    ]
                  },
                  "message": {
                    "en": "Food safety and portioning can only be recorded on the day of production.",
                    "fr": "La sécurité alimentaire et la portionnement ne peuvent être enregistrés que le jour de la production.",
                    "nl": "Voedselveiligheid en portieering kunnen alleen worden vastgelegd op de dag van productie."
                  }
                }
              ],
              "pair": "core_temp",
              "options": [],
              "optionsFr": [],
              "optionsNl": []
            },
            {
              "id": "TEMP_EVD",
              "type": "FILE_UPLOAD",
              "labelEn": "Add photo",
              "labelFr": "Ajouter une photo",
              "labelNl": "Foto toevoegen",
              "required": true,
              "requiredMessage": {
                "en": "Add one photo per cooking pot.",
                "fr": "Ajoutez une photo par marmite de cuisson.",
                "nl": "Voeg één foto per kookpot toe."
              },
              "pair": "core_temp",
              "options": [],
              "optionsFr": [],
              "optionsNl": [],
              "validationRules": [
                {
                  "when": {
                    "all": [
                      {
                        "not": {
                          "fieldId": "TEMP_EVD",
                          "equals": [
                            "__never__"
                          ]
                        }
                      },
                      {
                        "fieldId": "MP_PREP_DATE",
                        "isInFuture": true
                      },
                      {
                        "fieldId": "__ckStep",
                        "equals": [
                          "foodSafety"
                        ]
                      }
                    ]
                  },
                  "message": {
                    "en": "Food safety and portioning can only be recorded on the day of production.",
                    "fr": "La sécurité alimentaire et la portionnement ne peuvent être enregistrés que le jour de la production.",
                    "nl": "Voedselveiligheid en portieering kunnen alleen worden vastgelegd op de dag van productie."
                  }
                }
              ],
              "uploadConfig": {
                "destinationFolderId": "1xiEjwfcbMaF6XqqAPlqbA8LNd5HiwjGV",
                "minFiles": 0,
                "maxFiles": 10,
                "maxFileSizeMb": 10,
                "allowedMimeTypes": [
                  "image/*"
                ],
                "errorMessages": {
                  "minFiles": {
                    "en": "Add one photo per cooking pot.",
                    "fr": "Ajoutez une photo par marmite de cuisson.",
                    "nl": "Voeg één foto per kookpot toe."
                  },
                  "maxFiles": {
                    "en": "The maximum number of photos is {max}",
                    "fr": "Le nombre maximum de photos est de {max}",
                    "nl": "Het maximum aantal foto's is {max}"
                  },
                  "maxFileSizeMb": {
                    "en": "The selected photo(s) exceed the {mb}MB limit. Please take other photo(s) using normal camera mode (avoid zoom, no filters, no HD mode).",
                    "fr": "La taille maximale de la photo est de {mb}MB",
                    "nl": "De maximale bestandsgrootte is {mb}MB"
                  }
                },
                "helperText": {
                  "remainingOne": {
                    "en": "You need to add {count} more photo",
                    "fr": "Vous devez ajouter {count} photo supplémentaire",
                    "nl": "Je moet {count} foto toevoegen"
                  },
                  "remainingMany": {
                    "en": "You need to add {count} more photos",
                    "fr": "Vous devez ajouter {count} photos supplémentaires",
                    "nl": "Je moet {count} foto's toevoegen"
                  }
                },
                "linkLabel": {
                  "en": "Photo {n}",
                  "fr": "Photo {n}",
                  "nl": "Foto {n}"
                },
                "ui": {
                  "variant": "progressive"
                },
                "compression": {
                  "images": {
                    "maxDimension": 1280,
                    "quality": 0.78,
                    "outputType": "keep"
                  }
                }
              }
            },
            {
              "id": "FINAL_QTY",
              "type": "NUMBER",
              "labelEn": "Delivered Portions",
              "labelFr": "Portions livrées",
              "labelNl": "Maaltijden",
              "required": true,
              "requiredMessage": {
                "en": "Delivered portions must be equal to or greater than ordered portions.",
                "fr": "Les portions livrées doivent être égales ou supérieures aux portions demandées.",
                "nl": "De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties."
              },
              "pair": "meal_qty",
              "options": [],
              "optionsFr": [],
              "optionsNl": [],
              "validationRules": [
                {
                  "when": {
                    "fieldId": "ORD_QTY",
                    "notEmpty": true
                  },
                  "then": {
                    "fieldId": "FINAL_QTY",
                    "minFieldId": "ORD_QTY"
                  },
                  "message": {
                    "en": "Delivered portions must be equal to or greater than ordered portions.",
                    "fr": "Les portions livrées doivent être égales ou supérieures aux portions demandées.",
                    "nl": "De geleverde porties moeten gelijk of groter zijn dan de gevraagde porties."
                  }
                }
              ]
            }
          ],
          "subGroups": [
            {
              "fields": [
                {
                  "id": "PREP_TYPE",
                  "type": "CHOICE",
                  "labelEn": "Type",
                  "labelFr": "Type",
                  "labelNl": "Type",
                  "required": true,
                  "ui": {
                    "control": "select"
                  },
                  "options": [
                    "Cook",
                    "Entire dish",
                    "Part dish"
                  ],
                  "optionsFr": [
                    "Cuisiner",
                    "Plat entier",
                    "Plat partiel"
                  ],
                  "optionsNl": [
                    "Koken",
                    "Volledig gerecht",
                    "Deel gerecht"
                  ]
                },
                {
                  "id": "RECIPE",
                  "type": "CHOICE",
                  "labelEn": "Recipe",
                  "labelFr": "Recette",
                  "labelNl": "Recept",
                  "required": false,
                  "ui": {
                    "control": "select"
                  },
                  "options": [],
                  "optionsFr": [],
                  "optionsNl": [],
                  "optionFilter": {
                    "dependsOn": "MEAL_TYPE",
                    "dataSourceField": "DISH_TYPE",
                    "dataSourceDelimiter": ",",
                    "bypassValues": [
                      "No-salt"
                    ]
                  },
                  "validationRules": [
                    {
                      "when": {
                        "fieldId": "PREP_TYPE",
                        "equals": [
                          "Cook"
                        ]
                      },
                      "then": {
                        "fieldId": "RECIPE",
                        "required": true
                      },
                      "message": {
                        "en": "Please select a recipe",
                        "fr": "Veuillez sélectionner une recette",
                        "nl": "Veelijks selecteren een recept"
                      }
                    }
                  ],
                  "dataSource": {
                    "id": "Recipes Data",
                    "mode": "options",
                    "statusAllowList": [
                      "Active"
                    ],
                    "projection": [
                      "QFTD5RD2EM",
                      "NUM_PORTIONS",
                      "DISH_TYPE",
                      "Q65ILNUSGL",
                      "REC_INST"
                    ],
                    "tooltipField": "REC_INST",
                    "tooltipLabel": {
                      "en": "Instructions",
                      "fr": "Instructions",
                      "nl": "Instructies"
                    }
                  },
                  "selectionEffects": [
                    {
                      "type": "addLineItemsFromDataSource",
                      "groupId": "MP_INGREDIENTS_LI",
                      "targetPath": "MP_INGREDIENTS_LI",
                      "lookupField": "QFTD5RD2EM",
                      "dataField": "Q65ILNUSGL",
                      "lineItemMapping": {
                        "ING": "ING",
                        "QTY": "QTY",
                        "UNIT": "UNIT"
                      },
                      "aggregateBy": [
                        "ING",
                        "UNIT",
                        "RECIPE"
                      ],
                      "aggregateNumericFields": [
                        "QTY"
                      ],
                      "rowMultiplierFieldId": "PREP_QTY",
                      "dataSourceMultiplierField": "NUM_PORTIONS",
                      "scaleNumericFields": [
                        "QTY"
                      ],
                      "preserveManualRows": false
                    },
                    {
                      "type": "setValue",
                      "fieldId": "__ckRecipeIngredientsDirty",
                      "value": false
                    }
                  ],
                  "changeDialog": {
                    "when": {
                      "fieldId": "__ckRecipeIngredientsDirty",
                      "equals": true
                    },
                    "title": "Change recipe?",
                    "message": "You have modified the ingredients for this recipe. If you change the recipe now, all ingredient changes will be lost. Do you want to continue?",
                    "cancelLabel": "Cancel",
                    "confirmLabel": "Change recipe",
                    "primaryAction": "cancel"
                  }
                },
                {
                  "id": "PREP_QTY",
                  "type": "NUMBER",
                  "labelEn": "Quantity",
                  "labelFr": "Quantity",
                  "labelNl": "Quantity",
                  "required": false,
                  "options": [],
                  "optionsFr": [],
                  "optionsNl": []
                }
              ],
              "id": "MP_TYPE_LI",
              "label": {
                "en": "View/edit meal",
                "fr": "Voir/modifier repas",
                "nl": "Bekijken/bewerken repas"
              },
              "ui": {
                "mode": "table",
                "tableHideUntilAnchor": true,
                "needsAttentionMessage": {
                  "en": "Each ingredient must have a quantity and a unit.",
                  "fr": "Chaque ingrédient doit avoir une quantité et une unité.",
                  "nl": "Elke ingrediënt moet een hoeveelheid en een eenheid hebben."
                },
                "showItemPill": false,
                "addButtonPlacement": "hidden",
                "openInOverlay": true,
                "closeButtonLabel": {
                  "en": "Back",
                  "fr": "Retour",
                  "nl": "Terug"
                },
                "overlayDetail": {
                  "enabled": true,
                  "header": {
                    "tableColumns": [
                      "PREP_TYPE",
                      "PREP_QTY",
                      "RECIPE"
                    ],
                    "tableColumnWidths": {
                      "PREP_TYPE": "20%",
                      "PREP_QTY": "25%",
                      "RECIPE": "55%"
                    },
                    "addButtonPlacement": "hidden"
                  },
                  "body": {
                    "subGroupId": "MP_INGREDIENTS_LI",
                    "edit": {
                      "mode": "table",
                      "tableColumns": [
                        "ING",
                        "QTY",
                        "UNIT"
                      ],
                      "tableColumnWidths": {
                        "ING": "50%",
                        "QTY": "25%",
                        "UNIT": "25%",
                        "__remove": "44px"
                      }
                    },
                    "view": {
                      "mode": "html",
                      "templateId": "bundle:mp.ing_recipe.html"
                    }
                  },
                  "rowActions": {
                    "viewLabel": {
                      "en": "View"
                    },
                    "editLabel": {
                      "en": "Edit"
                    },
                    "viewPlacement": "hidden",
                    "editPlacement": "hidden"
                  }
                }
              },
              "minRows": 0,
              "maxRows": 200,
              "addMode": "inline",
              "addButtonLabel": {
                "en": "Add",
                "fr": "Ajouter",
                "nl": "Toevoegen"
              },
              "anchorFieldId": "PREP_TYPE",
              "subGroups": [
                {
                  "fields": [
                    {
                      "id": "ING",
                      "type": "CHOICE",
                      "labelEn": "Ingredient",
                      "labelFr": "Ingrédient",
                      "labelNl": "Ingrediënt",
                      "required": true,
                      "ui": {
                        "labelLayout": "stacked",
                        "readOnlyAppendFieldId": "ALLERGEN",
                        "readOnlyAppendHideValues": [
                          "None"
                        ]
                      },
                      "readOnly": true,
                      "optionFilter": {
                        "dependsOn": "MEAL_TYPE",
                        "optionMapRef": {
                          "ref": "REF:Ingredients Data",
                          "keyColumn": "DIETARY_APPLICABILITY",
                          "lookupColumn": "INGREDIENT_NAME",
                          "splitKey": true
                        },
                        "dataSourceField": "DIETARY_APPLICABILITY",
                        "dataSourceDelimiter": ","
                      },
                      "dataSource": {
                        "id": "Ingredients Data",
                        "mode": "options",
                        "statusAllowList": [
                          "Active"
                        ],
                        "projection": [
                          "INGREDIENT_NAME",
                          "SUPPLIER",
                          "DIETARY_APPLICABILITY",
                          "ALLOWED_UNIT",
                          "CATEGORY",
                          "ALLERGEN",
                          "STATUS"
                        ]
                      }
                    },
                    {
                      "id": "QTY",
                      "type": "NUMBER",
                      "labelEn": "Quantity",
                      "labelFr": "Quantité",
                      "labelNl": "Aantal",
                      "required": false,
                      "pair": "qty_unt",
                      "options": [],
                      "optionsFr": [],
                      "optionsNl": [],
                      "validationRules": [
                        {
                          "when": {
                            "fieldId": "PREP_TYPE",
                            "equals": [
                              "Cook"
                            ]
                          },
                          "then": {
                            "fieldId": "QTY",
                            "required": true
                          },
                          "message": {
                            "en": "Please enter the quantity",
                            "fr": "Veuillez entrer la quantité",
                            "nl": "Voer de hoeveelheid in"
                          }
                        }
                      ]
                    },
                    {
                      "id": "UNIT",
                      "type": "CHOICE",
                      "labelEn": "Unit",
                      "labelFr": "Unité",
                      "labelNl": "Eenheid",
                      "required": false,
                      "pair": "qty_unt",
                      "ui": {
                        "control": "select"
                      },
                      "optionFilter": {
                        "dependsOn": "ING",
                        "optionMapRef": {
                          "ref": "REF:Ingredients Data",
                          "keyColumn": "INGREDIENT_NAME",
                          "lookupColumn": "ALLOWED_UNIT"
                        }
                      },
                      "validationRules": [
                        {
                          "when": {
                            "fieldId": "PREP_TYPE",
                            "equals": [
                              "Cook"
                            ]
                          },
                          "then": {
                            "fieldId": "UNIT",
                            "required": true
                          },
                          "message": {
                            "en": "Please select a unit",
                            "fr": "Veuillez sélectionner une unité",
                            "nl": "Veelijks selecteren een eenheid"
                          }
                        }
                      ]
                    },
                    {
                      "id": "CAT",
                      "type": "TEXT",
                      "labelEn": "Category",
                      "labelFr": "Catégorie",
                      "labelNl": "Categorie",
                      "required": false,
                      "pair": "cat_all",
                      "readOnly": true,
                      "valueMap": {
                        "dependsOn": "ING",
                        "optionMapRef": {
                          "ref": "REF:Ingredients Data",
                          "keyColumn": "INGREDIENT_NAME",
                          "lookupColumn": "CATEGORY"
                        }
                      }
                    },
                    {
                      "id": "ALLERGEN",
                      "type": "TEXT",
                      "labelEn": "Allergen",
                      "labelFr": "Allergène",
                      "labelNl": "Allergeen",
                      "required": false,
                      "pair": "cat_all",
                      "readOnly": true,
                      "valueMap": {
                        "dependsOn": "ING",
                        "optionMapRef": {
                          "ref": "REF:Ingredients Data",
                          "keyColumn": "INGREDIENT_NAME",
                          "lookupColumn": "ALLERGEN"
                        }
                      }
                    }
                  ],
                  "id": "MP_INGREDIENTS_LI",
                  "label": {
                    "en": "View/edit ingredients",
                    "fr": "Voir/modifier les ingrédients",
                    "nl": "Bekijken/bewerken van ingrediënten"
                  },
                  "ui": {
                    "mode": "table",
                    "rowDisclaimer": {
                      "cases": [
                        {
                          "text": {
                            "en": "Please enter the `Quantity` based on the ordered number of portions",
                            "fr": "Veuillez entrer la `Quantité` en fonction du nombre de portions demandé",
                            "nl": "Voer de `Aantal` in op basis van het gevraagde aantal porties"
                          },
                          "when": {
                            "all": [
                              {
                                "fieldId": "__ckRowSource",
                                "equals": "manual"
                              },
                              {
                                "fieldId": "PREP_TYPE",
                                "equals": "Cook"
                              }
                            ]
                          }
                        }
                      ]
                    },
                    "tableColumns": [
                      "ING",
                      "QTY",
                      "UNIT"
                    ],
                    "tableColumnWidths": {
                      "ING": "50%",
                      "QTY": "25%",
                      "UNIT": "25%",
                      "__remove": "44px"
                    },
                    "tableHideUntilAnchor": true,
                    "needsAttentionMessage": {
                      "en": "Each ingredient must have a quantity and a unit.",
                      "fr": "Chaque ingrédient doit avoir une quantité et une unité.",
                      "nl": "Elke ingrediënt moet een hoeveelheid en een eenheid hebben."
                    },
                    "showItemPill": false,
                    "openInOverlay": true,
                    "closeButtonLabel": {
                      "en": "Back",
                      "fr": "Retour",
                      "nl": "Terug"
                    },
                    "addButtonPlacement": "top"
                  },
                  "minRows": 0,
                  "maxRows": 200,
                  "addMode": "overlay",
                  "addOverlay": {
                    "title": {
                      "en": "Select the ingredient(s) not mentioned in the original recipe that you will use to cook today's dish.",
                      "fr": "Sélectionnez le(s) ingrédient(s) non mentionné(s) dans la recette originale que vous utiliserez pour cuisiner le plat d'aujourd'hui.",
                      "nl": "Selecteer het/de ingrediënt(en) die niet in het originele recept staan en die je zult gebruiken om het gerecht van vandaag te koken."
                    },
                    "helperText": {
                      "en": "",
                      "fr": "",
                      "nl": ""
                    },
                    "searchHelperText": {
                      "en": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                      "fr": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                      "nl": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia)."
                    },
                    "placeholder": {
                      "en": "Search ingredients",
                      "fr": "Rechercher des ingrédients",
                      "nl": "Ingrediënten zoeken"
                    }
                  },
                  "addButtonLabel": {
                    "en": "Add ingredient",
                    "fr": "Ajouter un ingrédient",
                    "nl": "Ingrediënt toevoegen"
                  },
                  "anchorFieldId": "ING",
                  "dedupRules": [
                    {
                      "fields": [
                        "ING",
                        "UNIT"
                      ],
                      "message": {
                        "en": "{value} is already in the list, change the quantity",
                        "fr": "{value} est déjà dans la liste, modifiez la quantité",
                        "nl": "{value} staat al in de lijst, pas de hoeveelheid aan"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        "validationRules": [
          {
            "phase": "submit",
            "when": {
              "not": {
                "lineItems": {
                  "groupId": "MP_MEALS_REQUEST",
                  "when": {
                    "fieldId": "ORD_QTY",
                    "greaterThan": 0
                  },
                  "match": "any"
                }
              }
            },
            "message": {
              "en": "Enter at least one quantity greater than 0.",
              "fr": "Veuillez entrer au moins une quantité supérieure à 0.",
              "nl": "Voer minstens één hoeveelheid in die groter is dan 0."
            }
          }
        ]
      },
      {
        "id": "ING_PREVIEW",
        "type": "BUTTON",
        "label": {
          "en": "Ingredients Needed",
          "fr": "Ingrédients nécessaires",
          "nl": "Benodigde ingrediënten"
        },
        "required": false,
        "pair": "ing_ph",
        "listView": false,
        "ui": {
          "helperText": {
            "en": "Use \"Ingredients needed\" as the reference shopping list"
          },
          "helperPlacement": "belowLabel"
        },
        "button": {
          "action": "renderHtmlTemplate",
          "templateId": {
            "EN": "bundle:ingredients_needed.html",
            "FR": "bundle:ingredients_needed.html",
            "NL": "bundle:ingredients_needed.html"
          },
          "placements": [
            "form"
          ]
        },
        "visibility": {
          "showWhen": {
            "any": [
              {
                "lineItems": {
                  "groupId": "MP_MEALS_REQUEST",
                  "subGroupId": "MP_TYPE_LI",
                  "when": {
                    "all": [
                      {
                        "fieldId": "PREP_TYPE",
                        "equals": "Cook"
                      },
                      {
                        "fieldId": "RECIPE",
                        "notEmpty": true
                      }
                    ]
                  }
                }
              },
              {
                "lineItems": {
                  "groupId": "MP_MEALS_REQUEST",
                  "subGroupPath": "MP_TYPE_LI.MP_INGREDIENTS_LI",
                  "when": {
                    "fieldId": "__ckRowSource",
                    "equals": "manual"
                  },
                  "parentWhen": {
                    "fieldId": "PREP_TYPE",
                    "equals": "Full"
                  }
                }
              }
            ]
          }
        }
      },
      {
        "id": "ING_EVD",
        "type": "FILE_UPLOAD",
        "label": {
          "en": "Ingredients receipt photo",
          "fr": "Photo du reçu des ingrédients",
          "nl": "Foto van het ingrediëntenbewijs"
        },
        "required": true,
        "pair": "ing_ph",
        "listView": false,
        "ui": {
          "helperText": {
            "en": "Take a photo of delivery tags before cooking."
          },
          "helperPlacement": "belowLabel"
        },
        "visibility": {
          "hideWhen": {
            "fieldId": "MP_PREP_DATE",
            "isInFuture": true
          },
          "showWhen": {
            "any": [
              {
                "lineItems": {
                  "groupId": "MP_MEALS_REQUEST",
                  "subGroupId": "MP_TYPE_LI",
                  "when": {
                    "all": [
                      {
                        "fieldId": "PREP_TYPE",
                        "equals": "Cook"
                      },
                      {
                        "fieldId": "RECIPE",
                        "notEmpty": true
                      }
                    ]
                  }
                }
              },
              {
                "lineItems": {
                  "groupId": "MP_MEALS_REQUEST",
                  "subGroupPath": "MP_TYPE_LI.MP_INGREDIENTS_LI",
                  "when": {
                    "fieldId": "__ckRowSource",
                    "equals": "manual"
                  },
                  "parentWhen": {
                    "fieldId": "PREP_TYPE",
                    "equals": "Full"
                  }
                }
              }
            ]
          }
        },
        "uploadConfig": {
          "destinationFolderId": "1xiEjwfcbMaF6XqqAPlqbA8LNd5HiwjGV",
          "minFiles": 1,
          "maxFiles": 10,
          "maxFileSizeMb": 10,
          "allowedMimeTypes": [
            "image/*"
          ],
          "errorMessages": {
            "minFiles": {
              "en": "Please upload one photo",
              "fr": "Veuillez télécharger une photo",
              "nl": "Upload een foto"
            },
            "maxFiles": {
              "en": "The maximum number of photos is {max}",
              "fr": "Le nombre maximum de photos est de {max}",
              "nl": "Het maximum aantal foto's is {max}"
            },
            "maxFileSizeMb": {
              "en": "The selected photo(s) exceed the {mb}MB limit. Please take other photo(s) using normal camera mode (avoid zoom, no filters, no HD mode).",
              "fr": "La taille maximale de la photo est de {mb}MB",
              "nl": "De maximale bestandsgrootte is {mb}MB"
            }
          },
          "helperText": {
            "remainingOne": {
              "en": "You need to add {count} more photo",
              "fr": "Vous devez ajouter {count} photo supplémentaire",
              "nl": "Je moet {count} foto toevoegen"
            },
            "remainingMany": {
              "en": "You need to add {count} more photos",
              "fr": "Vous devez ajouter {count} photos supplémentaires",
              "nl": "Je moet {count} foto's toevoegen"
            }
          },
          "linkLabel": {
            "en": "Photo {n}",
            "fr": "Photo {n}",
            "nl": "Foto {n}"
          },
          "ui": {
            "variant": "progressive"
          },
          "compression": {
            "images": {
              "maxDimension": 1280,
              "quality": 0.78,
              "outputType": "keep"
            }
          }
        }
      },
      {
        "id": "MP_NOTES",
        "type": "PARAGRAPH",
        "label": {
          "en": "Note to customer",
          "fr": "Note au client",
          "nl": "Notitie aan klant"
        },
        "required": false,
        "ui": {
          "labelLayout": "stacked"
        },
        "group": {
          "id": "notes",
          "header": false,
          "title": {
            "en": "Notes & Consent",
            "fr": "Notes et consentement",
            "nl": "Notities en toestemming"
          },
          "collapsible": true,
          "defaultCollapsed": false
        },
        "listView": false
      },
      {
        "id": "PDF_PREVIEW",
        "type": "BUTTON",
        "label": {
          "en": "Final report",
          "fr": "Rapport final",
          "nl": "Eindrapport"
        },
        "required": false,
        "listView": false,
        "button": {
          "action": "openUrlField",
          "fieldId": "pdfUrl",
          "placements": [
            "summaryBar"
          ]
        },
        "visibility": {
          "showWhen": {
            "fieldId": "status",
            "equals": "Closed"
          }
        }
      },
      {
        "id": "BELL_BTN",
        "type": "BUTTON",
        "label": {
          "en": "Belliard",
          "fr": "Belliard",
          "nl": "Belliard"
        },
        "required": false,
        "group": {
          "id": "issues"
        },
        "listView": false,
        "button": {
          "action": "createRecordPreset",
          "presetValues": {
            "MP_DISTRIBUTOR": "Belliard"
          },
          "placements": [
            "topBarList"
          ]
        },
        "visibility": {
          "showWhen": {
            "fieldId": "status",
            "equals": "Closed"
          }
        }
      },
      {
        "id": "HUB_BTN",
        "type": "BUTTON",
        "label": {
          "en": "Hub",
          "fr": "Hub",
          "nl": "Hub"
        },
        "required": false,
        "group": {
          "id": "issues"
        },
        "listView": false,
        "button": {
          "action": "createRecordPreset",
          "presetValues": {
            "MP_DISTRIBUTOR": "HUB"
          },
          "placements": [
            "topBarList"
          ]
        },
        "visibility": {
          "showWhen": {
            "fieldId": "status",
            "equals": "Closed"
          }
        }
      },
      {
        "id": "PHARE_BTN",
        "type": "BUTTON",
        "label": {
          "en": "Le Phare",
          "fr": "Le Phare",
          "nl": "Le Phare"
        },
        "required": false,
        "group": {
          "id": "issues"
        },
        "listView": false,
        "button": {
          "action": "createRecordPreset",
          "presetValues": {
            "MP_DISTRIBUTOR": "Le Phare"
          },
          "placements": [
            "topBarList"
          ]
        },
        "visibility": {
          "showWhen": {
            "fieldId": "status",
            "equals": "Closed"
          }
        }
      },
      {
        "id": "MP_PROCEDURE",
        "type": "BUTTON",
        "label": {
          "en": "Meal Production Procedure",
          "fr": "Procédure de production des repas",
          "nl": "Procedure voor de maaltijdproductie"
        },
        "required": false,
        "listView": false,
        "button": {
          "action": "renderHtmlTemplate",
          "templateId": {
            "EN": "bundle:procedure_meal_production.html",
            "FR": "bundle:procedure_meal_production.html",
            "NL": "bundle:procedure_meal_production.html"
          },
          "placements": [
            "topBarList"
          ]
        }
      },
      {
        "id": "MP_HYGIENE",
        "type": "BUTTON",
        "label": {
          "en": "Hygiene rules",
          "fr": "Règles d’hygiène",
          "nl": "Hygiënereglement"
        },
        "required": false,
        "listView": false,
        "button": {
          "action": "renderMarkdownTemplate",
          "templateId": {
            "EN": "1T7ffxFfQlw3DH1gPVIre5qRJYrwHrGpv",
            "FR": "1T7ffxFfQlw3DH1gPVIre5qRJYrwHrGpv",
            "NL": "1T7ffxFfQlw3DH1gPVIre5qRJYrwHrGpv"
          },
          "placements": [
            "topBarList"
          ]
        }
      },
      {
        "id": "BELL_SH_BTN",
        "type": "BUTTON",
        "label": {
          "en": "Belliard – last 7 days",
          "fr": "Belliard – last 7 days",
          "nl": "Belliard – last 7 days"
        },
        "required": false,
        "listView": false,
        "button": {
          "action": "listViewSearchPreset",
          "mode": "advanced",
          "fieldFilters": {
            "MP_DISTRIBUTOR": "Belliard"
          }
        }
      },
      {
        "id": "HUB_SH_BTN",
        "type": "BUTTON",
        "label": {
          "en": "HUB – last 7 days",
          "fr": "HUB – last 7 days",
          "nl": "HUB – last 7 days"
        },
        "required": false,
        "listView": false,
        "button": {
          "action": "listViewSearchPreset",
          "mode": "advanced",
          "fieldFilters": {
            "MP_DISTRIBUTOR": "HUB"
          }
        }
      },
      {
        "id": "PHARE_SH_BTN",
        "type": "BUTTON",
        "label": {
          "en": "Le Phare – last 7 days",
          "fr": "Le Phare – last 7 days",
          "nl": "Le Phare – last 7 days"
        },
        "required": false,
        "listView": false,
        "button": {
          "action": "listViewSearchPreset",
          "mode": "advanced",
          "fieldFilters": {
            "MP_DISTRIBUTOR": "Le Phare"
          }
        }
      },
      {
        "id": "MP_READY_FOR_PRODUCTION",
        "type": "BUTTON",
        "label": {
          "en": "Ready for Production",
          "fr": "Ready for Production",
          "nl": "Ready for Production"
        },
        "required": false,
        "listView": false,
        "visibility": {
          "showWhen": {
            "all": [
              {
                "fieldId": "__ckStep",
                "equals": "orderInfo"
              },
              {
                "fieldId": "status",
                "equals": "In progress"
              }
            ]
          }
        },
        "button": {
          "action": "updateRecord",
          "placements": [
            "form"
          ],
          "tone": "primary",
          "set": {
            "status": "In production"
          },
          "navigateTo": "form",
          "confirm": {
            "message": {
              "en": "You are about to lock the customer, service, production date and ordered quantities. Once locked:\n- these fields can no longer be changed\n- production data will be protected from accidental deletion\n- This action cannot be undone.\nDo you want to continue?",
              "fr": "You are about to lock the customer, service, production date and ordered quantities. Once locked:\n- these fields can no longer be changed\n- production data will be protected from accidental deletion\n- This action cannot be undone.\nDo you want to continue?",
              "nl": "You are about to lock the customer, service, production date and ordered quantities. Once locked:\n- these fields can no longer be changed\n- production data will be protected from accidental deletion\n- This action cannot be undone.\nDo you want to continue?"
            },
            "confirmLabel": {
              "en": "Yes, lock for production",
              "fr": "Yes, lock for production",
              "nl": "Yes, lock for production"
            },
            "cancelLabel": {
              "en": "Cancel",
              "fr": "Cancel",
              "nl": "Cancel"
            }
          }
        }
      },
      {
        "id": "MP_UNLOCK_FOR_EDIT",
        "type": "BUTTON",
        "qEn": "Unlock for Editing",
        "qFr": "Unlock for Editing",
        "qNl": "Unlock for Editing",
        "required": false,
        "listView": false,
        "options": [],
        "optionsFr": [],
        "optionsNl": [],
        "status": "Active",
        "visibility": {
          "showWhen": {
            "all": [
              {
                "fieldId": "status",
                "equals": "In production"
              },
              {
                "fieldId": "__ckRequestParam_admin",
                "equals": [
                  "true",
                  "1",
                  "yes"
                ]
              }
            ]
          }
        },
        "button": {
          "action": "updateRecord",
          "placements": [
            "summaryBar"
          ],
          "set": {
            "status": "In progress"
          },
          "navigateTo": "form",
          "confirm": {
            "message": {
              "en": "Unlock this record to return it to In progress so you can edit order details again?"
            },
            "confirmLabel": {
              "en": "Unlock and edit"
            },
            "cancelLabel": {
              "en": "Cancel"
            }
          }
        }
      }
    ],
    "dataSources": [],
    "listView": {
      "columns": [
        {
          "type": "rule",
          "fieldId": "action",
          "label": {
            "en": "Action",
            "fr": "Action",
            "nl": "Actie"
          },
          "cases": [
            {
              "text": {
                "en": "Warning",
                "fr": "Avertissement",
                "nl": "Waarschuwing"
              },
              "when": {
                "all": [
                  {
                "fieldId": "status",
                "notEquals": "Closed"
              },
                  {
                    "fieldId": "MP_PREP_DATE",
                    "isInPast": true
                  }
                ]
              },
              "style": "warning",
              "icon": "warning",
              "hideText": true,
              "openView": "summary"
            },
            {
              "text": {
                "en": "Actions",
                "fr": "Actions",
                "nl": "Acties"
              },
              "hideText": true,
              "when": {
                "all": [
                  {
                    "fieldId": "status",
                    "notEquals": "Closed"
                  },
                  {
                    "any": [
                      {
                        "fieldId": "MP_PREP_DATE",
                        "isToday": true
                      },
                      {
                        "fieldId": "MP_PREP_DATE",
                        "isInFuture": true
                      }
                    ]
                  }
                ]
              },
              "actions": [
                {
                  "text": {
                    "en": "View",
                    "fr": "Voir",
                    "nl": "Bekijken"
                  },
                  "hideText": true,
                  "style": "link",
                  "icon": "view",
                  "openView": "summary"
                },
                {
                  "text": {
                    "en": "Edit",
                    "fr": "Modifier",
                    "nl": "Bewerken"
                  },
                  "hideText": true,
                  "style": "link",
                  "icon": "edit",
                  "openView": "form"
                }
              ]
            },
            {
              "text": {
                "en": "Actions",
                "fr": "Actions",
                "nl": "Acties"
              },
              "hideText": true,
              "when": {
                "fieldId": "status",
                "equals": "Closed"
              },
              "actions": [
                {
                  "text": {
                    "en": "View",
                    "fr": "Voir",
                    "nl": "Bekijken"
                  },
                  "hideText": true,
                  "style": "link",
                  "icon": "view",
                  "openView": "summary"
                }
              ]
            }
          ]
        },
        {
          "fieldId": "MP_DISTRIBUTOR",
          "label": {
            "en": "Customer",
            "fr": "Client",
            "nl": "Klant"
          },
          "kind": "question"
        },
        {
          "fieldId": "MP_SERVICE",
          "label": {
            "en": "Service",
            "fr": "Service",
            "nl": "Dienst"
          },
          "kind": "question"
        },
        {
          "fieldId": "MP_COOK_NAME",
          "label": {
            "en": "Responsible cook",
            "fr": "Cuisinier responsable",
            "nl": "Verantwoordelijke kok"
          },
          "kind": "question"
        },
        {
          "fieldId": "MP_PREP_DATE",
          "label": {
            "en": "Date",
            "fr": "Date",
            "nl": "Datum"
          },
          "kind": "question"
        }
      ],
      "metaColumns": [],
      "defaultSort": {
        "fieldId": "MP_PREP_DATE",
        "direction": "desc"
      },
      "title": {
        "en": "Recent activity",
        "fr": "Activité récente",
        "nl": "Recente activiteit"
      },
      "pageSize": 7,
      "paginationControlsEnabled": false,
      "hideHeaderRow": true,
      "legend": [
        {
          "icon": "edit",
          "text": {
            "en": "Edit (not allowed for past records)",
            "fr": "Modifier (non autorisé pour les enregistrements passés)",
            "nl": "Bewerken (niet toegestaan voor eerdere records)"
          }
        },
        {
          "icon": "view",
          "text": {
            "en": "View",
            "fr": "Voir",
            "nl": "Bekijken"
          }
        },
        {
          "icon": "warning",
          "text": {
            "en": "Past record incomplete or missing",
            "fr": "Enregistrement passé incomplet ou manquant",
            "nl": "Vorige record onvolledig of ontbrekend"
          }
        }
      ],
      "search": {
        "mode": "date",
        "dateFieldId": "MP_PREP_DATE",
        "presetsTitle": {
          "en": "Search by customer:",
          "fr": "Rechercher par client:",
          "nl": "Zoeken op klant:"
        }
      },
      "rowClickEnabled": false
    },
    "dedupRules": [
      {
        "id": "uniqueDailyCustService",
        "scope": "form",
        "keys": [
          "MP_DISTRIBUTOR",
          "MP_SERVICE",
          "MP_PREP_DATE"
        ],
        "matchMode": "caseInsensitive",
        "onConflict": "reject",
        "message": {
          "en": "This service is already exists for this customer and date."
        }
      }
    ],
    "startRoute": "list",
    "followup": {
      "pdfTemplateId": {
        "EN": "bundle:meal_production.pdf.html",
        "FR": "bundle:meal_production.pdf.html"
      },
      "pdfFolderId": "1Ktr2j-sL8lzrJxfGIWKZA09SCSiG6cHj",
      "pdfFileNameFieldId": "MP_ID",
      "emailTemplateId": {
        "EN": "1eqlnWV2DAqjKCOCwRLdatAOXMtbxGm-cKwoVgdQDdxk",
        "FR": "1eqlnWV2DAqjKCOCwRLdatAOXMtbxGm-cKwoVgdQDdxk"
      },
      "emailSubject": {
        "en": "Suivi de production des repas",
        "fr": "Suivi de production des repas",
        "nl": "Suivi de production des repas"
      },
      "emailFrom": "operations@communitykitchen.be",
      "emailFromName": "Community Kitchen Operations",
      "emailRecipients": [
        {
          "type": "dataSource",
          "recordFieldId": "MP_DISTRIBUTOR",
          "lookupField": "NICKNAME",
          "valueField": "DIST_EMAIL",
          "dataSource": {
            "id": "Distributor Data",
            "projection": [
              "NICKNAME",
              "DIST_EMAIL",
              "DIST_NAME"
            ]
          }
        }
      ],
      "emailCc": [
        "operations@communitykitchen.be"
      ],
      "emailBcc": [],
      "statusFieldId": "Status",
      "statusTransitions": {
        "onPdf": "PDF ready",
        "onEmail": "Emailed",
        "onClose": "Closed"
      }
    },
    "autoSave": {
      "enabled": true,
      "debounceMs": 2000,
      "status": "In progress"
    },
    "dedupDeleteOnKeyChange": true,
    "summaryHtmlTemplateId": "bundle:meal_production.summary.html",
    "copyCurrentRecordEnabled": false,
    "copyCurrentRecordDropFields": [
      "MP_PREP_DATE"
    ],
    "copyCurrentRecordProfile": {
      "values": [
        "MP_DISTRIBUTOR",
        "MP_SERVICE"
      ],
      "lineItems": [
        {
          "groupId": "MP_MEALS_REQUEST",
          "fields": [
            "MEAL_TYPE",
            "ORD_QTY",
            "FINAL_QTY"
          ]
        }
      ]
    },
    "copyCurrentRecordDialog": {
      "title": {
        "en": "Copying record",
        "fr": "Copie de l'enregistrement",
        "nl": "Record kopiëren"
      },
      "message": {
        "en": "Select a future production date and verify the customer, service and ordered portions information. All changes will be auto-saved and a future dated record will be created.",
        "fr": "Sélectionnez une date de production future et vérifiez les informations client, service et portions demandées. Toutes les modifications seront enregistrées automatiquement et un enregistrement daté future sera créé.",
        "nl": "Selecteer een toekomstige productiedatum en controleer de klant-, service- en gevraagde portie-informatie. Alle wijzigingen worden automatisch opgeslagen en een toekomstige gedateerde record wordt aangemaakt."
      },
      "confirmLabel": {
        "en": "OK",
        "fr": "OK",
        "nl": "OK"
      },
      "showCancel": false,
      "showCloseButton": false,
      "dismissOnBackdrop": false
    },
    "createNewRecordEnabled": false,
    "actionBars": {
      "bottom": {
        "list": {
          "items": [
            "home"
          ]
        },
        "form": {
          "items": [
            "home",
            {
              "type": "system",
              "id": "summary",
              "summaryBehavior": "navigate"
            }
          ],
          "primary": [
            "submit"
          ]
        },
        "summary": {
          "items": [
            "home",
            {
              "type": "system",
              "id": "actions",
              "menuBehavior": "inline",
              "actions": [
                "openUrlField",
                "renderHtmlTemplate",
                "renderMarkdownTemplate"
              ]
            },
            {
              "type": "custom",
              "placements": [
                "summaryBar"
              ],
              "actions": [
                "updateRecord"
              ],
              "display": "inline"
            },
            "edit"
          ],
          "primary": [
            "submit"
          ]
        }
      },
      "system": {
        "home": {
          "hideWhenActive": true,
          "dedupIncompleteDialog": {
            "enabled": true,
            "title": {
              "en": "Incomplete meal production record"
            },
            "message": {
              "en": "A meal production record can only exist when customer, production date, and service are all filled in.\n\nLeaving this page now will permanently delete this record and all data and photos already entered.\n\nThis action cannot be undone."
            },
            "confirmLabel": {
              "en": "Continue — Delete the record"
            },
            "cancelLabel": {
              "en": "Cancel — Continue editing"
            },
            "showCancel": true,
            "showCloseButton": false,
            "dismissOnBackdrop": false,
            "deleteRecordOnConfirm": true,
            "primaryAction": "cancel"
          }
        },
        "gates": {
          "edit": [
            {
              "id": "ck-70.summary.pastNotClosed.hideEdit",
              "when": {
                "all": [
                  {
                    "fieldId": "__ckView",
                    "equals": [
                      "summary"
                    ]
                  },
                  {
                    "fieldId": "status",
                    "notEquals": "Closed"
                  },
                  {
                    "fieldId": "MP_PREP_DATE",
                    "isInPast": true
                  }
                ]
              },
              "hide": true
            }
          ],
          "submit": [
            {
              "id": "ck-70.deliveryForm.futurePrepDate.blockNext",
              "when": {
                "all": [
                  {
                    "fieldId": "__ckView",
                    "equals": [
                      "form"
                    ]
                  },
                  {
                    "fieldId": "__ckStep",
                    "equals": [
                      "deliveryForm"
                    ]
                  },
                  {
                    "fieldId": "MP_PREP_DATE",
                    "isInFuture": true
                  }
                ]
              },
              "disable": true,
              "dialogTrigger": "onEnable",
              "dialog": {
                "message": {
                  "en": "Ingredients receipt photo, food safety and portioning can only be recorded on the day of production.",
                  "fr": "La photo de réception des ingrédients, la sécurité alimentaire et le portionnement ne peuvent être enregistrés que le jour de la production.",
                  "nl": "Foto van ingrediëntenontvangst, voedselveiligheid en portionering kunnen alleen worden vastgelegd op de dag van productie."
                },
                "confirmLabel": {
                  "en": "OK",
                  "fr": "OK",
                  "nl": "OK"
                },
                "showCancel": false,
                "showCloseButton": false,
                "dismissOnBackdrop": false
              }
            },
            {
              "id": "ck-70.summary.closed.hideSubmit",
              "when": {
                "all": [
                  {
                    "fieldId": "__ckView",
                    "equals": [
                      "summary"
                    ]
                  },
                  {
                    "fieldId": "status",
                    "equals": [
                      "Closed"
                    ]
                  }
                ]
              },
              "hide": true
            }
          ],
          "copyCurrentRecord": [
            {
              "id": "ck-70.copy.onlyClosedSummary",
              "when": {
                "any": [
                  {
                    "not": {
                      "fieldId": "__ckView",
                      "equals": [
                        "summary"
                      ]
                    }
                  },
                  {
                    "not": {
                      "fieldId": "status",
                      "equals": [
                        "Closed"
                      ]
                    }
                  }
                ]
              },
              "hide": true
            }
          ]
        }
      }
    },
    "summaryButtonLabel": {
      "en": "Summary",
      "fr": "Summary",
      "nl": "Summary"
    },
    "appHeader": {
      "logoUrl": "https://drive.google.com/uc?export=view&id=1JUaqKbQbGwYIpOmpg1CBNJcOrFJv3EHr"
    },
    "groupBehavior": {
      "autoCollapseOnComplete": true,
      "autoOpenNextIncomplete": true,
      "autoScrollOnExpand": true
    },
    "submitValidation": {
      "enforceFieldOrder": true,
      "submitTopErrorMessage": {
        "en": "Please complete the highlighted fields.",
        "fr": "Veuillez compléter les champs en surbrillance.",
        "nl": "Vul de gemarkeerde velden in."
      }
    },
    "steps": {
      "mode": "guided",
      "items": [
        {
          "id": "orderInfo",
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR"
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE"
            },
            {
              "kind": "question",
              "id": "MP_SERVICE"
            },
            {
              "kind": "question",
              "id": "MP_COOK_NAME"
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                {
                  "id": "MEAL_TYPE",
                  "renderAsLabel": true
                },
                "ORD_QTY"
              ],
              "collapsedFieldsInHeader": true,
              "displayMode": "inline"
            },
            {
              "kind": "question",
              "id": "MP_READY_FOR_PRODUCTION"
            }
          ],
          "label": {
            "en": "Order"
          },
          "helpText": {
            "en": "To create a meal production record, you must select a customer, a service, and a production date.\nUntil all three are selected, no record is created and no production data can be entered."
          },
          "navigation": {
            "forwardGate": "whenValid",
            "autoAdvance": "onValid"
          }
        },
        {
          "helpText": {
            "en": "Review if there is any entire dish leftover to be reheated before portioning. Use part dish leftover, if any, in today's dish. Cook only the stated number of portions as per the recipe. Follow the Instructions for cooking and portioning. Cook only the stated number of portions as per the recipe. Follow the Instructions for cooking and portioning."
          },
          "id": "deliveryForm",
          "contextHeader": {
            "parts": [
              "MP_DISTRIBUTOR",
              "MP_SERVICE",
              "MP_PREP_DATE"
            ]
          },
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_SERVICE",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE",
              "renderAsLabel": true
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                {
                  "id": "MEAL_TYPE",
                  "renderAsLabel": true
                },
                {
                  "id": "ORD_QTY",
                  "renderAsLabel": true
                },
                {
                  "id": "LEFTOVER_INFO",
                  "renderAsLabel": true
                },
                "MP_IS_REHEAT",
                {
                  "id": "MP_TO_COOK",
                  "renderAsLabel": true
                }
              ],
              "readOnlyFields": [
                "MEAL_TYPE",
                "ORD_QTY"
              ],
              "rows": {
                "includeWhen": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                }
              },
              "collapsedFieldsInHeader": true,
              "displayMode": "inline",
              "groupOverride": {
                "totals": [
                  {
                    "type": "sum",
                    "fieldId": "ORD_QTY",
                    "label": {
                      "en": "Total ordered",
                      "fr": "Total commandé",
                      "nl": "Totaal besteld"
                    },
                    "decimalPlaces": 0
                  }
                ]
              },
              "rowFlow": {
                "mode": "progressive",
                "references": {
                  "cookRow": {
                    "groupId": "MP_TYPE_LI",
                    "match": "first",
                    "rowFilter": {
                      "includeWhen": {
                        "fieldId": "PREP_TYPE",
                        "equals": [
                          "Cook"
                        ]
                      }
                    }
                  },
                  "leftoverRows": {
                    "groupId": "MP_TYPE_LI",
                    "match": "any",
                    "rowFilter": {
                      "includeWhen": {
                        "any": [
                          {
                            "fieldId": "PREP_TYPE",
                            "equals": [
                              "Entire dish",
                              "Part dish",
                              ""
                            ]
                          },
                          {
                            "fieldId": "PREP_TYPE",
                            "isEmpty": true
                          }
                        ]
                      }
                    }
                  }
                },
                "output": {
                  "separator": " | ",
                  "hideEmpty": true,
                  "segments": [
                    {
                      "fieldRef": "MEAL_TYPE"
                    },
                    {
                      "fieldRef": "ORD_QTY"
                    },
                    {
                      "fieldRef": "LEFTOVER_INFO",
                      "showWhen": {
                        "fieldId": "MP_IS_REHEAT",
                        "equals": [
                          "No"
                        ]
                      },
                      "editAction": "editLeftovers"
                    },
                    {
                      "fieldRef": "LEFTOVER_INFO",
                      "showWhen": {
                        "fieldId": "MP_IS_REHEAT",
                        "equals": [
                          "Yes"
                        ]
                      },
                      "editActions": [
                        "openLeftoversOverlay",
                        "clearLeftovers"
                      ]
                    },
                    {
                      "fieldRef": "MP_TO_COOK",
                      "label": {
                        "en": "To cook"
                      },
                      "showWhen": {
                        "fieldId": "MP_TO_COOK",
                        "greaterThan": 0
                      }
                    }
                  ]
                },
                "prompts": [
                  {
                    "id": "leftoversUsed",
                    "fieldRef": "MP_IS_REHEAT",
                    "hideWhenFilled": true
                  },
                  {
                    "id": "leftoversInfo",
                    "fieldRef": "LEFTOVER_INFO",
                    "showWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "Yes"
                      ]
                    },
                    "completedWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "Yes"
                      ]
                    },
                    "onCompleteActions": [
                      "openLeftoversOverlay"
                    ],
                    "hideWhenFilled": true
                  },
                  {
                    "id": "recipe",
                    "fieldRef": "cookRow.RECIPE",
                    "showWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "No",
                        "Yes"
                      ]
                    },
                    "keepVisibleWhenFilled": true,
                    "actions": [
                      {
                        "id": "openCookOverlay",
                        "position": "end"
                      }
                    ],
                    "actionsLayout": "inline",
                    "input": {
                      "labelLayout": "inline"
                    }
                  }
                ],
                "actions": [
                  {
                    "id": "openCookOverlay",
                    "label": {
                      "en": "View/Edit"
                    },
                    "variant": "button",
                    "effects": [
                      {
                        "type": "openOverlay",
                        "groupId": "MP_TYPE_LI",
                        "rowFilter": {
                          "includeWhen": {
                            "fieldId": "PREP_TYPE",
                            "equals": [
                              "Cook"
                            ]
                          }
                        },
                        "overlayContextHeader": {
                          "fields": [
                            {
                              "fieldRef": "MEAL_TYPE",
                              "label": {
                                "en": "{{value}} -"
                              }
                            },
                            {
                              "fieldRef": "MP_TO_COOK",
                              "label": {
                                "en": "{{value}} portions to cook\nRecipe:"
                              }
                            },
                            {
                              "fieldRef": "cookRow.RECIPE",
                              "label": {
                                "en": "{{value}}"
                              }
                            }
                          ]
                        },
                        "label": {
                          "en": "Check the ingredients for the selected recipe. Tap 'Edit ingredients' to add, change quantity or remove ingredients to reflect what is really used to cook today's dish.",
                          "fr": "Vérifiez les ingrédients de la recette sélectionnée. Appuyez sur « Modifier les ingrédients » pour ajouter, changer la quantité ou supprimer des ingrédients afin de refléter ce qui est réellement utilisé pour cuisiner le plat d'aujourd'hui.",
                          "nl": "Controleer de ingrediënten voor het geselecteerde recept. Tik op 'Ingrediënten bewerken' om ingrediënten toe te voegen, hoeveelheden aan te passen of ingrediënten te verwijderen zodat het overeenkomt met wat je vandaag echt gebruikt om te koken."
                        },
                        "closeButtonLabel": {
                          "en": "Back to Production"
                        },
                        "closeConfirm": {
                          "allowCloseFromEdit": true,
                          "cases": [
                            {
                              "when": {
                                "not": {
                                  "lineItems": {
                                    "groupId": "MP_MEALS_REQUEST",
                                    "subGroupPath": [
                                      "MP_TYPE_LI",
                                      "MP_INGREDIENTS_LI"
                                    ],
                                    "parentWhen": {
                                      "fieldId": "PREP_TYPE",
                                      "equals": [
                                        "Cook"
                                      ]
                                    },
                                    "match": "any"
                                  }
                                }
                              },
                              "title": {
                                "en": "Missing ingredients"
                              },
                              "body": {
                                "en": "No ingredients have been added. Do you want to exit?"
                              },
                              "confirmLabel": {
                                "en": "Yes"
                              },
                              "cancelLabel": {
                                "en": "No, continue editing"
                              },
                              "validateOnReopen": true
                            },
                            {
                              "when": {
                                "lineItems": {
                                  "groupId": "MP_MEALS_REQUEST",
                                  "subGroupPath": [
                                    "MP_TYPE_LI",
                                    "MP_INGREDIENTS_LI"
                                  ],
                                  "parentWhen": {
                                    "fieldId": "PREP_TYPE",
                                    "equals": [
                                      "Cook"
                                    ]
                                  },
                                  "when": {
                                    "all": [
                                      {
                                        "fieldId": "ING",
                                        "notEmpty": true
                                      },
                                      {
                                        "any": [
                                          {
                                            "fieldId": "QTY",
                                            "notEmpty": false
                                          },
                                          {
                                            "fieldId": "UNIT",
                                            "notEmpty": false
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "match": "any"
                                }
                              },
                              "title": {
                                "en": "Missing quantity/unit"
                              },
                              "body": {
                                "en": "One or more ingredients do not have a quantity and/or unit. If you close this page now, the ingredient selection will be lost."
                              },
                              "confirmLabel": {
                                "en": "Close, data will be lost"
                              },
                              "cancelLabel": {
                                "en": "Continue editing"
                              },
                              "highlightFirstError": true,
                              "validateOnReopen": true,
                              "onConfirmEffects": [
                                {
                                  "type": "deleteLineItems",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "rowFilter": {
                                    "includeWhen": {
                                      "all": [
                                        {
                                          "fieldId": "ING",
                                          "notEmpty": true
                                        },
                                        {
                                          "any": [
                                            {
                                              "fieldId": "QTY",
                                              "notEmpty": false
                                            },
                                            {
                                              "fieldId": "UNIT",
                                              "notEmpty": false
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        "groupOverride": {
                          "id": "MP_TYPE_LI",
                          "minRows": 0,
                          "maxRows": 1,
                          "ui": {
                            "addButtonPlacement": "hidden",
                            "overlayDetail": {
                              "header": {
                                "tableColumns": []
                              },
                              "rowActions": {
                                "editPlacement": "hidden",
                                "viewPlacement": "hidden"
                              }
                            }
                          },
                          "fields": [
                            {
                              "labelEn": "To cook",
                              "labelFr": "À cuisiner",
                              "labelNl": "A koken",
                              "id": "PREP_QTY",
                              "type": "NUMBER",
                              "required": true,
                              "readOnly": true
                            },
                            {
                              "labelEn": "Select Recipe",
                              "labelFr": "Sélectionner la recette",
                              "labelNl": "Selecteer de recept",
                              "id": "RECIPE",
                              "type": "CHOICE",
                              "required": true,
                              "dataSource": {
                                "id": "Recipes Data",
                                "projection": [
                                  "QFTD5RD2EM",
                                  "NUM_PORTIONS",
                                  "DISH_TYPE",
                                  "Q65ILNUSGL",
                                  "REC_INST"
                                ],
                                "mode": "options",
                                "tooltipField": "REC_INST",
                                "tooltipLabel": {
                                  "en": "Instructions",
                                  "fr": "Instructions",
                                  "nl": "Instructies"
                                },
                                "statusAllowList": [
                                  "Active"
                                ]
                              },
                              "optionFilter": {
                                "dependsOn": "MEAL_TYPE",
                                "dataSourceField": "DISH_TYPE",
                                "dataSourceDelimiter": ",",
                                "bypassValues": [
                                  "No-salt"
                                ]
                              },
                              "selectionEffects": [
                                {
                                  "type": "addLineItemsFromDataSource",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "targetPath": "MP_INGREDIENTS_LI",
                                  "lookupField": "QFTD5RD2EM",
                                  "dataField": "Q65ILNUSGL",
                                  "rowMultiplierFieldId": "PREP_QTY",
                                  "dataSourceMultiplierField": "NUM_PORTIONS",
                                  "scaleNumericFields": [
                                    "QTY"
                                  ],
                                  "preserveManualRows": false,
                                  "lineItemMapping": {
                                    "ING": "ING",
                                    "QTY": "QTY",
                                    "UNIT": "UNIT"
                                  },
                                  "aggregateBy": [
                                    "ING",
                                    "UNIT",
                                    "RECIPE"
                                  ],
                                  "aggregateNumericFields": [
                                    "QTY"
                                  ]
                                },
                                {
                                  "type": "setValue",
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "value": false
                                }
                              ],
                              "changeDialog": {
                                "when": {
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "equals": true
                                },
                                "title": "Change recipe?",
                                "message": "You have modified the ingredients for this recipe. If you change the recipe now, all ingredient changes will be lost. Do you want to continue?",
                                "cancelLabel": "Cancel",
                                "confirmLabel": "Change recipe",
                                "primaryAction": "cancel"
                              },
                              "ui": {
                                "control": "select"
                              }
                            }
                          ],
                          "label": {
                            "en": "Cook",
                            "fr": "Cuisiner",
                            "nl": "Koken"
                          }
                        }
                      }
                    ]
                  },
                  {
                    "id": "openLeftoversOverlay",
                    "label": {
                      "en": "View/edit"
                    },
                    "variant": "button",
                    "effects": [
                      {
                        "type": "openOverlay",
                        "groupId": "MP_TYPE_LI",
                        "rowFilter": {
                          "includeWhen": {
                            "any": [
                              {
                                "equals": [
                                  "Entire dish",
                                  "Part dish"
                                ],
                                "fieldId": "PREP_TYPE"
                              },
                              {
                                "isEmpty": true,
                                "fieldId": "PREP_TYPE"
                              }
                            ]
                          }
                        },
                        "hideInlineSubgroups": true,
                        "closeButtonLabel": {
                          "en": "Back to Production",
                          "fr": "Retour à la production",
                          "nl": "Terug naar productie"
                        },
                        "overlayContextHeader": {
                          "fields": [
                            {
                              "fieldRef": "MP_DISTRIBUTOR",
                              "label": {
                                "en": "{{value}}"
                              }
                            },
                            {
                              "fieldRef": "MP_SERVICE",
                              "label": {
                                "en": "| {{value}}"
                              }
                            },
                            {
                              "fieldRef": "MP_PREP_DATE",
                              "label": {
                                "en": "| {{value}}"
                              }
                            },
                            {
                              "fieldRef": "MEAL_TYPE",
                              "label": {
                                "en": "\nLeftovers for {{value}}"
                              }
                            },
                            {
                              "fieldRef": "ORD_QTY",
                              "label": {
                                "en": "| {{value}} ordered portions"
                              }
                            }
                          ]
                        },
                        "groupOverride": {
                          "id": "MP_TYPE_LI",
                          "minRows": 1,
                          "maxRows": 50,
                          "fields": [
                            {
                              "labelEn": "Type",
                              "labelFr": "Type",
                              "labelNl": "Type",
                              "id": "PREP_TYPE",
                              "type": "CHOICE",
                              "options": [
                                "Entire dish",
                                "Part dish"
                              ],
                              "optionsFr": [
                                "Plat entier",
                                "Plat partiel"
                              ],
                              "optionsNl": [
                                "Volledig gerecht",
                                "Deel gerecht"
                              ],
                              "defaultValue": "Entire dish",
                              "ui": {
                                "control": "select"
                              }
                            },
                            {
                              "labelEn": "Recipe",
                              "labelFr": "Recette",
                              "labelNl": "Recept",
                              "id": "RECIPE",
                              "type": "CHOICE",
                              "required": true,
                              "visibility": {
                                "hideWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": "Part dish"
                                }
                              },
                              "dataSource": {
                                "id": "Recipes Data",
                                "projection": [
                                  "QFTD5RD2EM",
                                  "NUM_PORTIONS",
                                  "DISH_TYPE",
                                  "Q65ILNUSGL",
                                  "REC_INST"
                                ],
                                "mode": "options",
                                "tooltipField": "REC_INST",
                                "tooltipLabel": {
                                  "en": "Instructions",
                                  "fr": "Instructions",
                                  "nl": "Instructies"
                                },
                                "statusAllowList": [
                                  "Active"
                                ]
                              },
                              "optionFilter": {
                                "dependsOn": "MEAL_TYPE",
                                "dataSourceField": "DISH_TYPE",
                                "dataSourceDelimiter": ",",
                                "bypassValues": [
                                  "No-salt"
                                ]
                              },
                              "selectionEffects": [
                                {
                                  "type": "addLineItemsFromDataSource",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "targetPath": "MP_INGREDIENTS_LI",
                                  "lookupField": "QFTD5RD2EM",
                                  "dataField": "Q65ILNUSGL",
                                  "rowMultiplierFieldId": "PREP_QTY",
                                  "dataSourceMultiplierField": "NUM_PORTIONS",
                                  "scaleNumericFields": [
                                    "QTY"
                                  ],
                                  "preserveManualRows": false,
                                  "lineItemMapping": {
                                    "ING": "ING",
                                    "QTY": "QTY",
                                    "UNIT": "UNIT"
                                  },
                                  "aggregateBy": [
                                    "ING",
                                    "UNIT",
                                    "RECIPE"
                                  ],
                                  "aggregateNumericFields": [
                                    "QTY"
                                  ]
                                },
                                {
                                  "type": "setValue",
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "value": false
                                }
                              ],
                              "changeDialog": {
                                "when": {
                                  "fieldId": "__ckRecipeIngredientsDirty",
                                  "equals": true
                                },
                                "title": "Change recipe?",
                                "message": "You have modified the ingredients for this recipe. If you change the recipe now, all ingredient changes will be lost. Do you want to continue?",
                                "cancelLabel": "Cancel",
                                "confirmLabel": "Change recipe",
                                "primaryAction": "cancel"
                              },
                              "ui": {
                                "control": "select",
                                "hideLabel": true
                              }
                            },
                            {
                              "labelEn": "How many portions will leftover yield?",
                              "labelFr": "Combien de portions la restauration donnera-t-elle?",
                              "labelNl": "Hoeveel porties zal de restauro geven?",
                              "id": "PREP_QTY",
                              "type": "NUMBER",
                              "required": true,
                              "visibility": {
                                "hideWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": "Part dish"
                                }
                              }
                            }
                          ]
                        },
                        "rowFlow": {
                          "mode": "progressive",
                          "references": {
                            "ingredientsRow": {
                              "groupId": "MP_INGREDIENTS_LI",
                              "match": "any"
                            }
                          },
                          "output": {
                            "separator": " | ",
                            "hideEmpty": true,
                            "segments": [
                              {
                                "fieldRef": "PREP_TYPE",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Part dish"
                                  ]
                                },
                                "format": {
                                  "type": "text"
                                },
                                "label": {
                                  "en": "{{value}} leftover"
                                },
                                "editAction": "editLeftoverIngredientsPart"
                              },
                              {
                                "fieldRef": "RECIPE",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Entire dish"
                                  ]
                                },
                                "editAction": "editLeftoverIngredientsEntire"
                              },
                              {
                                "fieldRef": "PREP_QTY",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Entire dish"
                                  ]
                                },
                                "format": {
                                  "type": "text"
                                },
                                "label": {
                                  "en": "Yields {{value}} portions",
                                  "fr": "Donne {{value}} portions",
                                  "nl": "Geeft {{value}} porties"
                                }
                              }
                            ],
                            "actions": [
                              {
                                "id": "addLeftover",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "equals": [
                                    "Entire dish",
                                    "Part dish"
                                  ]
                                },
                                "position": "end"
                              },
                              {
                                "id": "removeLeftover",
                                "position": "end",
                                "scope": "row",
                                "showWhen": {
                                  "fieldId": "PREP_TYPE",
                                  "notEmpty": true
                                }
                              }
                            ],
                            "actionsLayout": "inline",
                            "actionsScope": "group"
                          },
                          "prompts": [
                            {
                              "id": "leftoverType",
                              "fieldRef": "PREP_TYPE",
                              "hideWhenFilled": true,
                              "input": {
                                "labelLayout": "inline",
                                "label": {
                                  "en": "What type of leftover will be used?",
                                  "fr": "Quel type de restauration sera utilisé?",
                                  "nl": "Welk type restauro zal worden gebruikt?"
                                }
                              },
                              "showWhen": {
                                "fieldId": "MP_IS_REHEAT",
                                "equals": [
                                  "Yes"
                                ]
                              }
                            },
                            {
                              "id": "leftoverRecipe",
                              "fieldRef": "RECIPE",
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Entire dish"
                                ]
                              },
                              "hideWhenFilled": true,
                              "input": {
                                "labelLayout": "inline",
                                "label": {
                                  "en": "Select Recipe",
                                  "fr": "Sélectionner la recette",
                                  "nl": "Selecteer de recept"
                                }
                              }
                            },
                            {
                              "id": "leftoverQty",
                              "fieldRef": "PREP_QTY",
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Entire dish"
                                ]
                              },
                              "hideWhenFilled": true,
                              "input": {
                                "labelLayout": "inline",
                                "label": {
                                  "en": "How many portions will leftover yield?\nThis number reduces the portions to cook. Enter 0 if leftover will be combined with today's dish.",
                                  "fr": "Combien de portions la restauration donnera-t-elle?\nCe nombre réduit les portions à cuisiner. Entrez 0 si la restauration sera combinée avec le plat d'aujourd'hui.",
                                  "nl": "Hoeveel porties zal de restauro geven?\nDit aantal vermindert de porties te koken. Voer 0 in als de restauro wordt gecombineerd met de huidige maaltijd."
                                }
                              }
                            },
                            {
                              "id": "ingredientsSelector",
                              "input": {
                                "kind": "selectorOverlay",
                                "targetRef": "ingredientsRow",
                                "label": {
                                  "en": "Select the ingredient(s) representing the leftover that will be added to today's meal.",
                                  "fr": "Sélectionnez le(s) ingrédient(s) représentant la restauration qui sera ajoutée au plat d'aujourd'hui.",
                                  "nl": "Selecteer het/de ingrediënt(en) die de restauro voorstellen die aan de maaltijd van vandaag wordt toegevoegd."
                                },
                                "placeholder": {
                                  "en": "Search leftover ingredients",
                                  "fr": "Rechercher les ingrédients de la restauration",
                                  "nl": "Ingrediënten voor restauro zoeken"
                                },
                                "labelLayout": "stacked",
                                "closeButtonLabel": {
                                  "en": "Back",
                                  "fr": "Retour",
                                  "nl": "Terug"
                                },
                                "groupOverride": {
                                  "minRows": 0,
                                  "maxRows": 200,
                                  "addOverlay": {
                                    "title": {
                                      "en": "Select the ingredient(s) representing the leftover that will be added to today's meal.",
                                      "fr": "Sélectionnez le(s) ingrédient(s) représentant la restauration qui sera ajoutée au plat d'aujourd'hui.",
                                      "nl": "Selecteer het/de ingrediënt(en) die de restauro voorstellen die aan de maaltijd van vandaag wordt toegevoegd."
                                    },
                                    "searchHelperText": {
                                      "en": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                      "fr": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                      "nl": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia)."
                                    },
                                    "placeholder": {
                                      "en": "Search leftover ingredients",
                                      "fr": "Rechercher les ingrédients de la restauration",
                                      "nl": "Ingrediënten voor restauro zoeken"
                                    }
                                  },
                                  "ui": {
                                    "tableColumns": [
                                      "ING"
                                    ],
                                    "tableColumnWidths": {
                                      "ING": "100%",
                                      "__remove": "44px"
                                    }
                                  }
                                }
                              },
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Part dish"
                                ]
                              }
                            }
                          ],
                          "actions": [
                            {
                              "id": "editLeftoverIngredientsPart",
                              "variant": "button",
                              "tone": "secondary",
                              "label": {
                                "en": "View/Edit ingredients",
                                "fr": "Voir/Modifier les ingrédients",
                                "nl": "Bekijken/Bewerken van ingrediënten"
                              },
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Part dish"
                                ]
                              },
                              "effects": [
                                {
                                  "type": "openOverlay",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "overlayHelperText": {
                                    "fields": [
                                      {
                                        "fieldRef": "PREP_TYPE",
                                        "label": {
                                          "en": "{{value}}: Add ingredients from previously cooked leftovers that will be added to today's cooked meal",
                                          "fr": "{{value}}: Ajouter les ingrédients des restes précédemment cuisinés qui seront ajoutés au plat cuisiné d'aujourd'hui",
                                          "nl": "{{value}}: Voeg ingrediënten toe van eerder gekookte resten die aan de huidige gekookte maaltijd worden toegevoegd"
                                        }
                                      }
                                    ]
                                  },
                                  "closeButtonLabel": {
                                    "en": "Back",
                                    "fr": "Retour",
                                    "nl": "Terug"
                                  },
                                  "groupOverride": {
                                    "minRows": 0,
                                    "maxRows": 200,
                                    "addOverlay": {
                                      "title": {
                                        "en": "Select the ingredient(s) representing the leftover that will be added to today's meal.",
                                        "fr": "Sélectionnez le(s) ingrédient(s) représentant la restauration qui sera ajoutée au plat d'aujourd'hui.",
                                        "nl": "Selecteer het/de ingrediënt(en) die de restauro voorstellen die aan de maaltijd van vandaag wordt toegevoegd."
                                      },
                                      "searchHelperText": {
                                        "en": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                        "fr": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia).",
                                        "nl": "Use exact words for Search (example: tomato or tomatoes, not tom, diabetic, not dia)."
                                      },
                                      "placeholder": {
                                        "en": "Search leftover ingredients",
                                        "fr": "Rechercher les ingrédients de la restauration",
                                        "nl": "Ingrediënten voor restauro zoeken"
                                      }
                                    },
                                    "ui": {
                                      "tableColumns": [
                                        "ING"
                                      ],
                                      "tableColumnWidths": {
                                        "ING": "100%",
                                        "__remove": "44px"
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "id": "editLeftoverIngredientsEntire",
                              "variant": "button",
                              "tone": "secondary",
                              "label": {
                                "en": "View/Edit ingredients",
                                "fr": "Voir/Modifier les ingrédients",
                                "nl": "Bekijken/Bewerken van ingrediënten"
                              },
                              "showWhen": {
                                "fieldId": "PREP_TYPE",
                                "equals": [
                                  "Entire dish"
                                ]
                              },
                              "effects": [
                                {
                                  "type": "openOverlay",
                                  "groupId": "MP_INGREDIENTS_LI",
                                  "overlayHelperText": {
                                    "fields": [
                                      {
                                        "fieldRef": "PREP_TYPE",
                                        "label": {
                                          "en": "{{value}}: Review and edit below list of ingredients by removing or adding to reflect the correct ingredients that were used to cook the leftover dish",
                                          "fr": "{{value}}: Revoir et modifier la liste ci-dessous en ajoutant ou en supprimant pour refléter les ingrédients corrects qui ont été utilisés pour cuisiner la restauration",
                                          "nl": "{{value}}: Bekijk en bewerk de lijst hieronder door ingrediënten toe te voegen of te verwijderen om de juiste ingrediënten weer te geven die zijn gebruikt om de restauro te koken"
                                        }
                                      }
                                    ]
                                  },
                                  "closeButtonLabel": {
                                    "en": "Back",
                                    "fr": "Retour",
                                    "nl": "Terug"
                                  },
                                  "groupOverride": {
                                    "minRows": 0,
                                    "maxRows": 200,
                                    "addOverlay": {
                                      "title": {
                                        "en": "Select the ingredient(s) that were used to cook the leftover dish but are missing from the original recipe.",
                                        "fr": "Sélectionnez le(s) ingrédient(s) utilisés pour cuisiner la restauration mais manquants dans la recette originale.",
                                        "nl": "Selecteer het/de ingrediënt(en) die zijn gebruikt om de restauro te koken maar ontbreken in het originele recept."
                                      },
                                      "placeholder": {
                                        "en": "Search leftover ingredients",
                                        "fr": "Rechercher les ingrédients de la restauration",
                                        "nl": "Ingrediënten voor restauro zoeken"
                                      }
                                    },
                                    "ui": {
                                      "tableColumns": [
                                        "ING"
                                      ],
                                      "tableColumnWidths": {
                                        "ING": "100%",
                                        "__remove": "44px"
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "id": "addLeftover",
                              "label": {
                                "en": "+ Add leftover",
                                "fr": "+ une autre restauration",
                                "nl": "+ een andere restauro"
                              },
                              "variant": "button",
                              "tone": "secondary",
                              "effects": [
                                {
                                  "type": "addLineItems"
                                }
                              ]
                            },
                            {
                              "id": "removeLeftover",
                              "icon": "remove",
                              "variant": "icon",
                              "effects": [
                                {
                                  "type": "deleteRow"
                                }
                              ]
                            }
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "id": "editLeftovers",
                    "icon": "edit",
                    "variant": "icon",
                    "showWhen": {
                      "fieldId": "MP_IS_REHEAT",
                      "equals": [
                        "No"
                      ]
                    },
                    "confirm": {
                      "title": {
                        "en": "Change leftovers?"
                      },
                      "body": {
                        "en": "Changing this will clear the selected recipe. Continue?"
                      },
                      "confirmLabel": {
                        "en": "Continue"
                      },
                      "cancelLabel": {
                        "en": "Cancel"
                      },
                      "showCancel": true
                    },
                    "effects": [
                      {
                        "type": "setValue",
                        "fieldRef": "MP_IS_REHEAT",
                        "value": null
                      },
                      {
                        "type": "setValue",
                        "fieldRef": "LEFTOVER_INFO",
                        "value": null
                      },
                      {
                        "type": "deleteLineItems",
                        "targetRef": "cookRow"
                      }
                    ]
                  },
                  {
                    "id": "clearLeftovers",
                    "icon": "remove",
                    "variant": "icon",
                    "showWhen": {
                      "all": [
                        {
                          "fieldId": "MP_IS_REHEAT",
                          "equals": [
                            "Yes"
                          ]
                        },
                        {
                          "lineItems": {
                            "groupId": "MP_MEALS_REQUEST",
                            "subGroupId": "MP_TYPE_LI",
                            "match": "any",
                            "when": {
                              "fieldId": "PREP_TYPE",
                              "equals": [
                                "Entire dish",
                                "Part dish"
                              ]
                            }
                          }
                        }
                      ]
                    },
                    "confirm": {
                      "title": {
                        "en": "Remove leftover information?"
                      },
                      "body": {
                        "en": "This action will delete all leftover details you entered. Do you want to continue?"
                      },
                      "confirmLabel": {
                        "en": "Remove leftover"
                      },
                      "cancelLabel": {
                        "en": "Keep leftover"
                      }
                    },
                    "effects": [
                      {
                        "type": "deleteLineItems",
                        "targetRef": "leftoverRows"
                      },
                      {
                        "type": "setValue",
                        "fieldRef": "MP_IS_REHEAT",
                        "value": "No"
                      },
                      {
                        "type": "setValue",
                        "fieldRef": "LEFTOVER_INFO",
                        "value": "No leftover"
                      }
                    ]
                  }
                ]
              },
              "subGroups": {
                "displayMode": "overlay",
                "include": [
                  {
                    "id": "MP_TYPE_LI",
                    "displayMode": "overlay"
                  }
                ]
              }
            },
            {
              "kind": "question",
              "id": "ING_PREVIEW"
            },
            {
              "kind": "question",
              "id": "ING_EVD"
            }
          ],
          "label": {
            "en": "Production",
            "fr": "Formulaire de production",
            "nl": "Productieformulier"
          },
          "navigation": {
            "autoAdvance": "off"
          },
          "render": {
            "subGroups": {
              "mode": "overlay"
            }
          }
        },
        {
          "id": "foodSafety",
          "contextHeader": {
            "parts": [
              "MP_DISTRIBUTOR",
              "MP_SERVICE",
              "MP_PREP_DATE"
            ]
          },
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_SERVICE",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE",
              "renderAsLabel": true
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                {
                  "id": "MEAL_TYPE",
                  "renderAsLabel": true
                },
                "MP_COOK_TEMP",
                "TEMP_EVD"
              ],
              "readOnlyFields": [
                "MEAL_TYPE",
                "ORD_QTY"
              ],
              "rows": {
                "includeWhen": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                }
              },
              "collapsedFieldsInHeader": true,
              "displayMode": "inline"
            }
          ],
          "label": {
            "en": "Food safety",
            "fr": "Sécurité alimentaire",
            "nl": "Voedselveiligheid"
          },
          "navigation": {
            "forwardGate": "whenValid",
            "autoAdvance": "onValid"
          },
          "helpText": {
            "en": "Confirm that all cooking pots reached at least 63°C and add one photo per pot for each dietary type, including reheated leftover full dish.",
            "fr": "Confirmez que toutes les marmites ont atteint au moins 63°C et ajoutez une photo par marmite pour chaque type de régime, y compris les restes réchauffés du plat complet.",
            "nl": "Bevestig dat alle kookpotten minstens 63°C hebben bereikt en voeg één foto per pot toe voor elk dieettype, inclusief opgewarmde restanten van het volledige gerecht."
          }
        },
        {
          "id": "portioning",
          "contextHeader": {
            "parts": [
              "MP_DISTRIBUTOR",
              "MP_SERVICE",
              "MP_PREP_DATE"
            ]
          },
          "include": [
            {
              "kind": "question",
              "id": "MP_DISTRIBUTOR",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_SERVICE",
              "renderAsLabel": true
            },
            {
              "kind": "question",
              "id": "MP_PREP_DATE",
              "renderAsLabel": true
            },
            {
              "kind": "lineGroup",
              "id": "MP_MEALS_REQUEST",
              "presentation": "liftedRowFields",
              "fields": [
                "MEAL_TYPE",
                "ORD_QTY",
                "FINAL_QTY"
              ],
              "readOnlyFields": [
                "MEAL_TYPE",
                "ORD_QTY"
              ],
              "rows": {
                "includeWhen": {
                  "fieldId": "ORD_QTY",
                  "greaterThan": 0
                }
              },
              "collapsedFieldsInHeader": true,
              "displayMode": "inline"
            },
            {
              "kind": "question",
              "id": "MP_NOTES"
            },
            {
              "kind": "question",
              "id": "MP_COOK_NAME"
            },
            {
              "kind": "question",
              "id": "MP_VOLUNTEER"
            }
          ],
          "label": {
            "en": "Portioning",
            "fr": "Portionnement",
            "nl": "Portionering"
          },
          "helpText": {
            "en": "Update the number of portions delivered to reflect reality. You must deliver at least the ordered number of portions.",
            "fr": "Mettez à jour le nombre de portions livrées pour refléter la réalité. Vous devez livrer au moins le nombre de portions demandées.",
            "nl": "Werk het aantal geleverde porties bij zodat het de werkelijkheid weerspiegelt. Je moet minstens het gevraagde aantal porties leveren."
          }
        }
      ],
      "stateFields": {
        "prefix": "__ckStep"
      },
      "defaultForwardGate": "whenValid",
      "defaultAutoAdvance": "onValid",
      "stepSubmitLabel": {
        "en": "Next",
        "fr": "Suivant",
        "nl": "Volgende"
      },
      "backButtonLabel": {
        "en": "Back",
        "fr": "Retour",
        "nl": "Terug"
      },
      "showBackButton": true
    },
    "portraitOnly": true,
    "submissionConfirmationMessage": {
      "en": "This report confirms {MP_SERVICE} for {MP_DISTRIBUTOR} has been produced by {MP_COOK_NAME} on {MP_PREP_DATE}, in accordance with the Meal Production procedure and hygiene rules.",
      "fr": "Ce rapport confirme que le {MP_SERVICE} pour {MP_DISTRIBUTOR} a été produit par {MP_COOK_NAME} le {MP_PREP_DATE}, conformément à la procédure de production de repas et aux règles d'hygiène.",
      "nl": "Dit rapport bevestigt dat de {MP_SERVICE} voor {MP_DISTRIBUTOR} is uitgevoerd door {MP_COOK_NAME} op {MP_PREP_DATE}, conform de procedure voor het maken van maaltijden en de hygiëneregels."
    },
    "submissionConfirmationTitle": {
      "en": "Please confirm",
      "fr": "Veuillez confirmer",
      "nl": "Vergoeding bevestigen"
    },
    "submissionConfirmationConfirmLabel": {
      "en": "Yes, confirmed",
      "fr": "Oui, c'est confirmé",
      "nl": "Ja, recept activeren"
    },
    "submissionConfirmationCancelLabel": {
      "en": "No, continue editing",
      "fr": "Non, continuer la modification",
      "nl": "Nee, verder bewerken"
    },
    "dedupDialog": {
      "title": {
        "en": "Creating duplicate record for the same customer, service and date is not allowed."
      },
      "intro": {
        "en": "A meal production record already exists for:"
      },
      "outro": {
        "en": "What do you want to do?"
      },
      "changeLabel": {
        "en": "Change customer, service or date"
      },
      "openLabel": {
        "en": "Open existing record"
      }
    },
    "auditLogging": {
      "enabled": true,
      "statuses": [
        "In production"
      ],
      "snapshotButtons": [
        "MP_READY_FOR_PRODUCTION"
      ]
    },
    "fieldDisableRules": [
      {
        "id": "ready-for-production-order-lock",
        "when": {
          "all": [
            {
              "fieldId": "status",
              "equals": "In production"
            },
            {
              "fieldId": "__ckStep",
              "equals": "orderInfo"
            }
          ]
        },
        "bypassFields": [],
        "unlockStatus": "In progress"
      }
    ]
  },
  "validationErrors": []
}
