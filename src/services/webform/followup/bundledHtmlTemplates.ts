// Auto-generated by scripts/embed-html-templates.js. Do not edit by hand.
// Contains HTML templates embedded from /docs/templates for template ids like "bundle:<filename>".

export const BUNDLED_HTML_TEMPLATES: Record<string, string> = {
  "checklist_am.summary.html": "<!--\n  Community Kitchen – Storage & Cleaning Checks (Summary HTML Template)\n\n  Notes:\n  - Keep placeholders as plain text tokens like {{FIELD_ID}} (do NOT split tokens across spans).\n  - FILE_UPLOAD icons (HTML-only): {{FILES_ICON(FIELD_ID)}} opens the read-only Files overlay in-app.\n  - This template is designed to be injected into the CK web app (not a standalone web page).\n-->\n\n<style>\n  .ck-summary-template {\n    /* inherit app typography; avoid fixed pt/px sizes so it scales nicely on iOS */\n    color: var(--text);\n    font-size: var(--ck-font-label); /* slightly denser than the app default */\n    margin: -8px; /* counter the preview container padding so more content fits */\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-meta-grid {\n    display: grid;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n    gap: 8px;\n    margin-bottom: 10px;\n  }\n\n  .ck-meta {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-meta-label {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n    margin-bottom: 4px;\n  }\n\n  .ck-meta-value {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    color: var(--text);\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-status-pill {\n    display: inline;\n    align-items: center;\n    padding: 0;\n    border-radius: 0;\n    border: none;\n    background: transparent;\n    color: var(--text);\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    line-height: 1;\n    white-space: nowrap;\n  }\n  .ck-status-pill[data-status-key=\"onClose\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n  .ck-status-pill[data-status-key=\"reOpened\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n\n  .ck-divider {\n    border: 0;\n    height: 1px;\n    background: var(--border);\n    margin: 10px 0;\n  }\n\n  .ck-section-title {\n    margin: 0 0 8px 0;\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n  }\n\n  .ck-subtitle {\n    margin: 10px 0 8px 0;\n    font-weight: 600;\n    font-size: var(--ck-font-label);\n    color: var(--text);\n  }\n\n  .ck-checklist {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If a checklist has an odd number of items, make the last card span full width */\n  .ck-checklist > .ck-check:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-check {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 8px 10px;\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    min-width: 0;\n  }\n\n  .ck-mark {\n    flex: 0 0 auto;\n    width: 1.6em;\n    text-align: center;\n    font-weight: 600;\n    line-height: 1.2;\n    font-size: var(--ck-font-control);\n  }\n\n  .ck-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    font-weight: 500;\n    line-height: 1.2;\n    color: var(--text);\n    white-space: normal;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-right {\n    flex: 0 0 auto;\n    margin-left: auto;\n    display: inline-flex;\n    align-items: center;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-right:empty {\n    display: none;\n  }\n\n  .ck-muted {\n    color: var(--muted);\n    font-weight: 500;\n  }\n\n  .ck-callouts {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If there is only one callout, let it span full width */\n  .ck-callouts > .ck-callout:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-callout {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-callout-title {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    margin-bottom: 4px;\n  }\n\n  .ck-callout-body {\n    font-weight: 500;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n  }\n\n  .ck-callout-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-callout-icon {\n    flex: 0 0 auto;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-callout-icon:empty {\n    display: none;\n  }\n\n  /* Make FILES_ICON buttons larger and easier to tap */\n  .ck-summary-template .ck-file-icon {\n    padding: 12px 14px !important;\n    border-radius: 16px !important;\n    font-size: var(--ck-font-control) !important;\n    line-height: 1 !important;\n  }\n\n  /* Larger badge for visibility */\n  .ck-summary-template .ck-file-icon__badge {\n    min-width: 28px !important;\n    height: 28px !important;\n    padding: 0 8px !important;\n    font-size: calc(var(--ck-font-label) * 0.85) !important;\n  }\n\n  /* Ultra-narrow devices: stack a bit to avoid unreadably tiny columns */\n  @media (max-width: 330px) {\n    .ck-meta-grid {\n      grid-template-columns: 1fr 1fr;\n    }\n    .ck-callouts {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  /* Consolidated \"Issues\" callout (Previous + Current shift in one card) */\n  .ck-issues-card {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .ck-issues-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .ck-issues-title {\n    font-weight: 600;\n    font-size: var(--ck-font-control);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-status-icon {\n    margin-left: auto;\n    font-size: var(--ck-font-control);\n    line-height: 1;\n  }\n\n  .ck-issues-empty {\n    display: none;\n    align-items: center;\n    gap: 10px;\n    font-weight: 600;\n  }\n\n  .ck-issues-row {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .ck-issues-subtitle {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-body {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n    font-weight: 600;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    padding-left: 12px;\n    border-left: 3px solid var(--border);\n  }\n\n  .ck-issues-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-issues-sep {\n    flex: 0 0 auto;\n    color: var(--muted);\n    font-weight: 600;\n  }\n\n  .ck-issues-icon {\n    flex: 0 0 auto;\n  }\n\n  .ck-issues-icon:empty {\n    display: none;\n  }\n\n  .ck-issues-divider {\n    border: 0;\n    height: 1px;\n    background: var(--border);\n    margin: 0;\n  }\n\n  .ck-callout.ck-issues--ok {\n    border-color: var(--border);\n    background: transparent;\n  }\n\n  .ck-callout.ck-issues--warn {\n    border-color: var(--border);\n    background: transparent;\n  }\n</style>\n\n<div class=\"ck-summary-template\">\n  <div class=\"ck-meta-grid\">\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(CHECK_FREQ)}}</div>\n      <div class=\"ck-meta-value\">{{CHECK_FREQ}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(DATE)}}</div>\n      <div class=\"ck-meta-value\">{{DATE}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(COOK)}}</div>\n      <div class=\"ck-meta-value\">{{COOK}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(STATUS)}}</div>\n      <div class=\"ck-meta-value\">\n        <span class=\"ck-status-pill\" data-status-key=\"{{STATUS_KEY}}\">{{DEFAULT(STATUS, \"—\")}}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"ck-callouts\">\n    <div class=\"ck-callout ck-issues-card ck-issues--warn\" data-ck-issues-card>\n      <div class=\"ck-issues-header\">\n        <div class=\"ck-issues-title\">{{LABEL(ISSUES)}}</div>\n        <div class=\"ck-issues-status-icon\" data-ck-issues-icon aria-hidden=\"true\"></div>\n      </div>\n\n      <div class=\"ck-issues-empty\" data-ck-issues-empty>\n        <span aria-hidden=\"true\"></span>\n        <span>No issues</span>\n      </div>\n\n      <div class=\"ck-issues-row\" data-ck-issues-prev-row>\n        <div class=\"ck-issues-subtitle\"><strong>{{LABEL(ISSUES_PREV)}}:</strong></div>\n        <div class=\"ck-issues-body\">\n          <span class=\"ck-issues-text\" data-ck-issues-prev-text>{{DEFAULT(ISSUES_PREV, \"No issues\")}}</span>\n          <span class=\"ck-issues-sep\" data-ck-issues-prev-sep aria-hidden=\"true\">|</span>\n          <span class=\"ck-issues-icon\" data-ck-issues-prev-icon>{{FILES_ICON(ISSUES_PREV_EVD)}}</span>\n        </div>\n      </div>\n\n      <hr class=\"ck-issues-divider\" data-ck-issues-divider />\n\n      <div class=\"ck-issues-row\" data-ck-issues-current-row>\n        <div class=\"ck-issues-subtitle\"><strong>{{LABEL(ISSUES)}}:</strong></div>\n        <div class=\"ck-issues-body\">\n          <span class=\"ck-issues-text\" data-ck-issues-current-text>{{DEFAULT(ISSUES, \"No issues\")}}</span>\n          <span class=\"ck-issues-sep\" data-ck-issues-current-sep aria-hidden=\"true\">|</span>\n          <span class=\"ck-issues-icon\" data-ck-issues-current-icon>{{FILES_ICON(ISSUES_EVD)}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    (function () {\n      try {\n        var card = document.querySelector('[data-ck-issues-card]');\n        if (!card) return;\n        if (card.getAttribute('data-ck-issues-init') === '1') return;\n        card.setAttribute('data-ck-issues-init', '1');\n\n        var normalize = function (s) {\n          return (s || '').toString().trim().toLowerCase().replace(/\\s+/g, ' ');\n        };\n        var isNoIssues = function (s) {\n          var t = normalize(s);\n          return t === '' || t === 'no issues' || t === 'no issue';\n        };\n\n        var prevTextEl = card.querySelector('[data-ck-issues-prev-text]');\n        var currentTextEl = card.querySelector('[data-ck-issues-current-text]');\n        var prevEmpty = isNoIssues(prevTextEl ? prevTextEl.textContent : '');\n        var currentEmpty = isNoIssues(currentTextEl ? currentTextEl.textContent : '');\n\n        var prevRow = card.querySelector('[data-ck-issues-prev-row]');\n        var currentRow = card.querySelector('[data-ck-issues-current-row]');\n        if (prevRow && prevEmpty) prevRow.style.display = 'none';\n        if (currentRow && currentEmpty) currentRow.style.display = 'none';\n\n        var divider = card.querySelector('[data-ck-issues-divider]');\n        if (divider) divider.style.display = prevEmpty || currentEmpty ? 'none' : 'block';\n\n        var hasIcon = function (el) {\n          if (!el) return false;\n          if (el.children && el.children.length) return true;\n          return normalize(el.textContent) !== '';\n        };\n        var prevIcon = card.querySelector('[data-ck-issues-prev-icon]');\n        var prevSep = card.querySelector('[data-ck-issues-prev-sep]');\n        if (prevSep) prevSep.style.display = hasIcon(prevIcon) ? 'inline' : 'none';\n        var currentIcon = card.querySelector('[data-ck-issues-current-icon]');\n        var currentSep = card.querySelector('[data-ck-issues-current-sep]');\n        if (currentSep) currentSep.style.display = hasIcon(currentIcon) ? 'inline' : 'none';\n\n        var emptyBlock = card.querySelector('[data-ck-issues-empty]');\n        var icon = card.querySelector('[data-ck-issues-icon]');\n        if (prevEmpty && currentEmpty) {\n          if (emptyBlock) emptyBlock.style.display = 'flex';\n          if (icon) icon.textContent = '✅';\n          card.classList.add('ck-issues--ok');\n          card.classList.remove('ck-issues--warn');\n        } else {\n          if (emptyBlock) emptyBlock.style.display = 'none';\n          if (icon) icon.textContent = '⚠️';\n          card.classList.add('ck-issues--warn');\n          card.classList.remove('ck-issues--ok');\n        }\n      } catch (e) {\n        // ignore\n      }\n    })();\n  </script>\n\n  <hr class=\"ck-divider\" />\n\n  <div class=\"ck-section-title\">Storage</div>\n\n  <div class=\"ck-subtitle\">Fridges</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{FRIDGE_TEMP}}</span>\n      <span class=\"ck-text\">{{LABEL(FRIDGE_TEMP)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(FRIDGE_TEMP_PHOTO)}}</span>\n    </li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_LBD}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_LBD)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_NBO}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_NBO)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_FIF}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_FIF)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_48H}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_48H)}}</span></li>\n  </ul>\n\n  <div class=\"ck-subtitle\">Freezers</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{FREEZER_TEMP}}</span>\n      <span class=\"ck-text\">{{LABEL(FREEZER_TEMP)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(FREEZER_TEMP_PHOTO)}}</span>\n    </li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_FDS}}</span><span class=\"ck-text\">{{LABEL(FREEZER_FDS)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_PKI}}</span><span class=\"ck-text\">{{LABEL(FREEZER_PKI)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_FIF}}</span><span class=\"ck-text\">{{LABEL(FREEZER_FIF)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_NEI}}</span><span class=\"ck-text\">{{LABEL(FREEZER_NEI)}}</span></li>\n  </ul>\n\n  <div class=\"ck-subtitle\">Vegetables</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRESH_VEGGIES}}</span><span class=\"ck-text\">{{LABEL(FRESH_VEGGIES)}}</span></li>\n  </ul>\n\n  <div class=\"ck-subtitle\">Dry foods</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{DRY_EXP}}</span><span class=\"ck-text\">{{LABEL(DRY_EXP)}}</span></li>\n  </ul>\n\n  <hr class=\"ck-divider\" />\n\n  <div class=\"ck-section-title\">Cleanliness</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_STV}}</span><span class=\"ck-text\">{{LABEL(CLEAN_STV)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_KEQ}}</span><span class=\"ck-text\">{{LABEL(CLEAN_KEQ)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_CNT}}</span><span class=\"ck-text\">{{LABEL(CLEAN_CNT)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_RICE}}</span><span class=\"ck-text\">{{LABEL(CLEAN_RICE)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_OVN}}</span><span class=\"ck-text\">{{LABEL(CLEAN_OVN)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_DSH}}</span><span class=\"ck-text\">{{LABEL(CLEAN_DSH)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_BET}}</span><span class=\"ck-text\">{{LABEL(CLEAN_BET)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_BLR}}</span><span class=\"ck-text\">{{LABEL(CLEAN_BLR)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_CLTH}}</span><span class=\"ck-text\">{{LABEL(CLEAN_CLTH)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_FLR}}</span><span class=\"ck-text\">{{LABEL(CLEAN_FLR)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_BROOM}}</span><span class=\"ck-text\">{{LABEL(CLEAN_BROOM)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_MOP}}</span><span class=\"ck-text\">{{LABEL(CLEAN_MOP)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_EQP}}</span><span class=\"ck-text\">{{LABEL(CLEAN_EQP)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_PEST}}</span><span class=\"ck-text\">{{LABEL(CLEAN_PEST)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_DMG}}</span><span class=\"ck-text\">{{LABEL(CLEAN_DMG)}}</span></li>\n  </ul>\n</div>\n",
  "checklist_monthly.summary.html": "<!--\n  Community Kitchen – Storage & Cleaning Checks (Summary HTML Template)\n\n  Notes:\n  - Keep placeholders as plain text tokens like {{FIELD_ID}} (do NOT split tokens across spans).\n  - FILE_UPLOAD icons (HTML-only): {{FILES_ICON(FIELD_ID)}} opens the read-only Files overlay in-app.\n  - This template is designed to be injected into the CK web app (not a standalone web page).\n-->\n\n<style>\n  .ck-summary-template {\n    /* inherit app typography; avoid fixed pt/px sizes so it scales nicely on iOS */\n    color: var(--text);\n    font-size: var(--ck-font-label); /* slightly denser than the app default */\n    margin: -8px; /* counter the preview container padding so more content fits */\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-meta-grid {\n    display: grid;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n    gap: 8px;\n    margin-bottom: 10px;\n  }\n\n  .ck-meta {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-meta-label {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n    margin-bottom: 4px;\n  }\n\n  .ck-meta-value {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    color: var(--text);\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-status-pill {\n    display: inline;\n    align-items: center;\n    padding: 0;\n    border-radius: 0;\n    border: none;\n    background: transparent;\n    color: var(--text);\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    line-height: 1;\n    white-space: nowrap;\n  }\n  .ck-status-pill[data-status-key=\"onClose\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n  .ck-status-pill[data-status-key=\"reOpened\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n\n  .ck-divider {\n    border: 0;\n    height: 1px;\n    background: var(--border);\n    margin: 10px 0;\n  }\n\n  .ck-section-title {\n    margin: 0 0 8px 0;\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n  }\n\n  .ck-subtitle {\n    margin: 10px 0 8px 0;\n    font-weight: 600;\n    font-size: var(--ck-font-label);\n    color: var(--text);\n  }\n\n  .ck-checklist {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If a checklist has an odd number of items, make the last card span full width */\n  .ck-checklist > .ck-check:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-check {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 8px 10px;\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    min-width: 0;\n  }\n\n  .ck-mark {\n    flex: 0 0 auto;\n    width: 1.6em;\n    text-align: center;\n    font-weight: 600;\n    line-height: 1.2;\n    font-size: var(--ck-font-control);\n  }\n\n  .ck-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    font-weight: 500;\n    line-height: 1.2;\n    color: var(--text);\n    white-space: normal;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-right {\n    flex: 0 0 auto;\n    margin-left: auto;\n    display: inline-flex;\n    align-items: center;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-right:empty {\n    display: none;\n  }\n\n  .ck-muted {\n    color: var(--muted);\n    font-weight: 500;\n  }\n\n  .ck-callouts {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If there is only one callout, let it span full width */\n  .ck-callouts > .ck-callout:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-callout {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-callout-title {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    margin-bottom: 4px;\n  }\n\n  .ck-callout-body {\n    font-weight: 500;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n  }\n\n  .ck-callout-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-callout-icon {\n    flex: 0 0 auto;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-callout-icon:empty {\n    display: none;\n  }\n\n  /* Make FILES_ICON buttons larger and easier to tap */\n  .ck-summary-template .ck-file-icon {\n    padding: 12px 14px !important;\n    border-radius: 16px !important;\n    font-size: var(--ck-font-control) !important;\n    line-height: 1 !important;\n  }\n\n  /* Larger badge for visibility */\n  .ck-summary-template .ck-file-icon__badge {\n    min-width: 28px !important;\n    height: 28px !important;\n    padding: 0 8px !important;\n    font-size: calc(var(--ck-font-label) * 0.85) !important;\n  }\n\n  /* Ultra-narrow devices: stack a bit to avoid unreadably tiny columns */\n  @media (max-width: 330px) {\n    .ck-meta-grid {\n      grid-template-columns: 1fr 1fr;\n    }\n    .ck-callouts {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  /* \"Issues\" callout (single field: ISSUES + ISSUES_EVD) */\n  .ck-issues-card {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .ck-issues-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .ck-issues-title {\n    font-weight: 600;\n    font-size: var(--ck-font-control);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-status-icon {\n    margin-left: auto;\n    font-size: var(--ck-font-control);\n    line-height: 1;\n  }\n\n  .ck-issues-empty {\n    display: none;\n    align-items: center;\n    gap: 10px;\n    font-weight: 600;\n  }\n\n  .ck-issues-row {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .ck-issues-subtitle {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-body {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n    font-weight: 600;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    padding-left: 12px;\n    border-left: 3px solid var(--border);\n  }\n\n  .ck-issues-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-issues-sep {\n    flex: 0 0 auto;\n    color: var(--muted);\n    font-weight: 600;\n  }\n\n  .ck-issues-icon {\n    flex: 0 0 auto;\n  }\n\n  .ck-issues-icon:empty {\n    display: none;\n  }\n\n  .ck-callout.ck-issues--ok {\n    border-color: var(--border);\n    background: transparent;\n  }\n\n  .ck-callout.ck-issues--warn {\n    border-color: var(--border);\n    background: transparent;\n  }\n</style>\n\n<div class=\"ck-summary-template\">\n  <div class=\"ck-meta-grid\">\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(CHECK_FREQ)}}</div>\n      <div class=\"ck-meta-value\">{{CHECK_FREQ}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(DATE)}}</div>\n      <div class=\"ck-meta-value\">{{DATE}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(COOK)}}</div>\n      <div class=\"ck-meta-value\">{{COOK}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(STATUS)}}</div>\n      <div class=\"ck-meta-value\">\n        <span class=\"ck-status-pill\" data-status-key=\"{{STATUS_KEY}}\">{{DEFAULT(STATUS, \"—\")}}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"ck-callouts\">\n    <div class=\"ck-callout ck-issues-card ck-issues--warn\" data-ck-issues-card>\n      <div class=\"ck-issues-header\">\n        <div class=\"ck-issues-title\">{{LABEL(ISSUES)}}</div>\n        <div class=\"ck-issues-status-icon\" data-ck-issues-icon aria-hidden=\"true\"></div>\n      </div>\n\n      <div class=\"ck-issues-empty\" data-ck-issues-empty>\n        <span aria-hidden=\"true\"></span>\n        <span>No issues</span>\n      </div>\n\n      <div class=\"ck-issues-row\" data-ck-issues-row>\n        <div class=\"ck-issues-subtitle\"><strong>{{LABEL(ISSUES)}}:</strong></div>\n        <div class=\"ck-issues-body\">\n          <span class=\"ck-issues-text\" data-ck-issues-text>{{DEFAULT(ISSUES, \"No issues\")}}</span>\n          <span class=\"ck-issues-sep\" data-ck-issues-sep aria-hidden=\"true\">|</span>\n          <span class=\"ck-issues-icon\" data-ck-issues-file-icon>{{FILES_ICON(ISSUES_EVD)}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    (function () {\n      try {\n        var card = document.querySelector('[data-ck-issues-card]');\n        if (!card) return;\n        if (card.getAttribute('data-ck-issues-init') === '1') return;\n        card.setAttribute('data-ck-issues-init', '1');\n\n        var normalize = function (s) {\n          return (s || '').toString().trim().toLowerCase().replace(/\\s+/g, ' ');\n        };\n        var isNoIssues = function (s) {\n          var t = normalize(s);\n          return t === '' || t === 'no issues' || t === 'no issue';\n        };\n\n        var textEl = card.querySelector('[data-ck-issues-text]');\n        var empty = isNoIssues(textEl ? textEl.textContent : '');\n\n        var row = card.querySelector('[data-ck-issues-row]');\n        if (row && empty) row.style.display = 'none';\n\n        var emptyBlock = card.querySelector('[data-ck-issues-empty]');\n        var statusIcon = card.querySelector('[data-ck-issues-icon]');\n        if (empty) {\n          if (emptyBlock) emptyBlock.style.display = 'flex';\n          if (statusIcon) statusIcon.textContent = '✅';\n          card.classList.add('ck-issues--ok');\n          card.classList.remove('ck-issues--warn');\n        } else {\n          if (emptyBlock) emptyBlock.style.display = 'none';\n          if (statusIcon) statusIcon.textContent = '⚠️';\n          card.classList.add('ck-issues--warn');\n          card.classList.remove('ck-issues--ok');\n        }\n\n        var hasIcon = function (el) {\n          if (!el) return false;\n          if (el.children && el.children.length) return true;\n          return normalize(el.textContent) !== '';\n        };\n        var fileIcon = card.querySelector('[data-ck-issues-file-icon]');\n        var sep = card.querySelector('[data-ck-issues-sep]');\n        if (sep) sep.style.display = !empty && hasIcon(fileIcon) ? 'inline' : 'none';\n      } catch (e) {\n        // ignore\n      }\n    })();\n  </script>\n\n  <hr class=\"ck-divider\" />\n\n  <div class=\"ck-section-title\">Checks</div>\n\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{MH_SHELVES}}</span>\n      <span class=\"ck-text\">{{LABEL(MH_SHELVES)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(MH_SHELVES_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{MH_DEFROST}}</span>\n      <span class=\"ck-text\">{{LABEL(MH_DEFROST)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(MH_DEFROST_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{MH_OVEN}}</span>\n      <span class=\"ck-text\">{{LABEL(MH_OVEN)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(MH_OVEN_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{MH_DISH}}</span>\n      <span class=\"ck-text\">{{LABEL(MH_DISH)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(MH_DISH_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{MH_EXHAUST}}</span>\n      <span class=\"ck-text\">{{LABEL(MH_EXHAUST)}}</span>\n      <span class=\"ck-right\"></span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{MH_CUT_BOARD}}</span>\n      <span class=\"ck-text\">{{LABEL(MH_CUT_BOARD)}}</span>\n      <span class=\"ck-right\"></span>\n    </li>\n  </ul>\n</div>\n",
  "checklist_pm.summary.html": "<!--\n  Community Kitchen – Storage & Cleaning Checks (Summary HTML Template)\n\n  Notes:\n  - Keep placeholders as plain text tokens like {{FIELD_ID}} (do NOT split tokens across spans).\n  - FILE_UPLOAD icons (HTML-only): {{FILES_ICON(FIELD_ID)}} opens the read-only Files overlay in-app.\n  - This template is designed to be injected into the CK web app (not a standalone web page).\n-->\n\n<style>\n  .ck-summary-template {\n    /* inherit app typography; avoid fixed pt/px sizes so it scales nicely on iOS */\n    color: var(--text);\n    font-size: var(--ck-font-label); /* slightly denser than the app default */\n    margin: -8px; /* counter the preview container padding so more content fits */\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-meta-grid {\n    display: grid;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n    gap: 8px;\n    margin-bottom: 10px;\n  }\n\n  .ck-meta {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-meta-label {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n    margin-bottom: 4px;\n  }\n\n  .ck-meta-value {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    color: var(--text);\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-status-pill {\n    display: inline;\n    align-items: center;\n    padding: 0;\n    border-radius: 0;\n    border: none;\n    background: transparent;\n    color: var(--text);\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    line-height: 1;\n    white-space: nowrap;\n  }\n  .ck-status-pill[data-status-key=\"onClose\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n  .ck-status-pill[data-status-key=\"reOpened\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n\n  .ck-divider {\n    border: 0;\n    height: 1px;\n    background: var(--border);\n    margin: 10px 0;\n  }\n\n  .ck-section-title {\n    margin: 0 0 8px 0;\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n  }\n\n  .ck-subtitle {\n    margin: 10px 0 8px 0;\n    font-weight: 600;\n    font-size: var(--ck-font-label);\n    color: var(--text);\n  }\n\n  .ck-checklist {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If a checklist has an odd number of items, make the last card span full width */\n  .ck-checklist > .ck-check:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-check {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 8px 10px;\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    min-width: 0;\n  }\n\n  .ck-mark {\n    flex: 0 0 auto;\n    width: 1.6em;\n    text-align: center;\n    font-weight: 600;\n    line-height: 1.2;\n    font-size: var(--ck-font-control);\n  }\n\n  .ck-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    font-weight: 500;\n    line-height: 1.2;\n    color: var(--text);\n    white-space: normal;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-right {\n    flex: 0 0 auto;\n    margin-left: auto;\n    display: inline-flex;\n    align-items: center;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-right:empty {\n    display: none;\n  }\n\n  .ck-muted {\n    color: var(--muted);\n    font-weight: 500;\n  }\n\n  .ck-callouts {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If there is only one callout, let it span full width */\n  .ck-callouts > .ck-callout:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-callout {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-callout-title {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    margin-bottom: 4px;\n  }\n\n  .ck-callout-body {\n    font-weight: 500;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n  }\n\n  .ck-callout-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-callout-icon {\n    flex: 0 0 auto;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-callout-icon:empty {\n    display: none;\n  }\n\n  /* Make FILES_ICON buttons larger and easier to tap */\n  .ck-summary-template .ck-file-icon {\n    padding: 12px 14px !important;\n    border-radius: 16px !important;\n    font-size: var(--ck-font-control) !important;\n    line-height: 1 !important;\n  }\n\n  /* Larger badge for visibility */\n  .ck-summary-template .ck-file-icon__badge {\n    min-width: 28px !important;\n    height: 28px !important;\n    padding: 0 8px !important;\n    font-size: calc(var(--ck-font-label) * 0.85) !important;\n  }\n\n  /* Ultra-narrow devices: stack a bit to avoid unreadably tiny columns */\n  @media (max-width: 330px) {\n    .ck-meta-grid {\n      grid-template-columns: 1fr 1fr;\n    }\n    .ck-callouts {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  /* Consolidated \"Issues\" callout (Previous + Current shift in one card) */\n  .ck-issues-card {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .ck-issues-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .ck-issues-title {\n    font-weight: 600;\n    font-size: var(--ck-font-control);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-status-icon {\n    margin-left: auto;\n    font-size: var(--ck-font-control);\n    line-height: 1;\n  }\n\n  .ck-issues-empty {\n    display: none;\n    align-items: center;\n    gap: 10px;\n    font-weight: 600;\n  }\n\n  .ck-issues-row {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .ck-issues-subtitle {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-body {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n    font-weight: 600;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    padding-left: 12px;\n    border-left: 3px solid var(--border);\n  }\n\n  .ck-issues-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-issues-sep {\n    flex: 0 0 auto;\n    color: var(--muted);\n    font-weight: 600;\n  }\n\n  .ck-issues-icon {\n    flex: 0 0 auto;\n  }\n\n  .ck-issues-icon:empty {\n    display: none;\n  }\n\n  .ck-issues-divider {\n    border: 0;\n    height: 1px;\n    background: var(--border);\n    margin: 0;\n  }\n\n  .ck-callout.ck-issues--ok {\n    border-color: var(--border);\n    background: transparent;\n  }\n\n  .ck-callout.ck-issues--warn {\n    border-color: var(--border);\n    background: transparent;\n  }\n</style>\n\n<div class=\"ck-summary-template\">\n  <div class=\"ck-meta-grid\">\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(CHECK_FREQ)}}</div>\n      <div class=\"ck-meta-value\">{{CHECK_FREQ}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(DATE)}}</div>\n      <div class=\"ck-meta-value\">{{DATE}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(COOK)}}</div>\n      <div class=\"ck-meta-value\">{{COOK}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(STATUS)}}</div>\n      <div class=\"ck-meta-value\">\n        <span class=\"ck-status-pill\" data-status-key=\"{{STATUS_KEY}}\">{{DEFAULT(STATUS, \"—\")}}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"ck-callouts\">\n    <div class=\"ck-callout ck-issues-card ck-issues--warn\" data-ck-issues-card>\n      <div class=\"ck-issues-header\">\n        <div class=\"ck-issues-title\">{{LABEL(ISSUES)}}</div>\n        <div class=\"ck-issues-status-icon\" data-ck-issues-icon aria-hidden=\"true\">⚠️</div>\n      </div>\n\n      <div class=\"ck-issues-empty\" data-ck-issues-empty>\n        <span aria-hidden=\"true\">✅</span>\n        <span>No issues</span>\n      </div>\n\n      <div class=\"ck-issues-row\" data-ck-issues-prev-row>\n        <div class=\"ck-issues-subtitle\"><strong>{{LABEL(ISSUES_PREV)}}:</strong></div>\n        <div class=\"ck-issues-body\">\n          <span class=\"ck-issues-text\" data-ck-issues-prev-text>{{DEFAULT(ISSUES_PREV, \"No issues\")}}</span>\n          <span class=\"ck-issues-sep\" data-ck-issues-prev-sep aria-hidden=\"true\">|</span>\n          <span class=\"ck-issues-icon\" data-ck-issues-prev-icon>{{FILES_ICON(ISSUES_PREV_EVD)}}</span>\n        </div>\n      </div>\n\n      <hr class=\"ck-issues-divider\" data-ck-issues-divider />\n\n      <div class=\"ck-issues-row\" data-ck-issues-current-row>\n        <div class=\"ck-issues-subtitle\"><strong>{{LABEL(ISSUES)}}:</strong></div>\n        <div class=\"ck-issues-body\">\n          <span class=\"ck-issues-text\" data-ck-issues-current-text>{{DEFAULT(ISSUES, \"No issues\")}}</span>\n          <span class=\"ck-issues-sep\" data-ck-issues-current-sep aria-hidden=\"true\">|</span>\n          <span class=\"ck-issues-icon\" data-ck-issues-current-icon>{{FILES_ICON(ISSUES_EVD)}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    (function () {\n      try {\n        var card = document.querySelector('[data-ck-issues-card]');\n        if (!card) return;\n        if (card.getAttribute('data-ck-issues-init') === '1') return;\n        card.setAttribute('data-ck-issues-init', '1');\n\n        var normalize = function (s) {\n          return (s || '').toString().trim().toLowerCase().replace(/\\s+/g, ' ');\n        };\n        var isNoIssues = function (s) {\n          var t = normalize(s);\n          return t === '' || t === 'no issues' || t === 'no issue';\n        };\n\n        var prevTextEl = card.querySelector('[data-ck-issues-prev-text]');\n        var currentTextEl = card.querySelector('[data-ck-issues-current-text]');\n        var prevEmpty = isNoIssues(prevTextEl ? prevTextEl.textContent : '');\n        var currentEmpty = isNoIssues(currentTextEl ? currentTextEl.textContent : '');\n\n        var prevRow = card.querySelector('[data-ck-issues-prev-row]');\n        var currentRow = card.querySelector('[data-ck-issues-current-row]');\n        if (prevRow && prevEmpty) prevRow.style.display = 'none';\n        if (currentRow && currentEmpty) currentRow.style.display = 'none';\n\n        var divider = card.querySelector('[data-ck-issues-divider]');\n        if (divider) divider.style.display = prevEmpty || currentEmpty ? 'none' : 'block';\n\n        var hasIcon = function (el) {\n          if (!el) return false;\n          if (el.children && el.children.length) return true;\n          return normalize(el.textContent) !== '';\n        };\n        var prevIcon = card.querySelector('[data-ck-issues-prev-icon]');\n        var prevSep = card.querySelector('[data-ck-issues-prev-sep]');\n        if (prevSep) prevSep.style.display = hasIcon(prevIcon) ? 'inline' : 'none';\n        var currentIcon = card.querySelector('[data-ck-issues-current-icon]');\n        var currentSep = card.querySelector('[data-ck-issues-current-sep]');\n        if (currentSep) currentSep.style.display = hasIcon(currentIcon) ? 'inline' : 'none';\n\n        var emptyBlock = card.querySelector('[data-ck-issues-empty]');\n        var icon = card.querySelector('[data-ck-issues-icon]');\n        if (prevEmpty && currentEmpty) {\n          if (emptyBlock) emptyBlock.style.display = 'flex';\n          if (icon) icon.textContent = '';\n          card.classList.add('ck-issues--ok');\n          card.classList.remove('ck-issues--warn');\n        } else {\n          if (emptyBlock) emptyBlock.style.display = 'none';\n          if (icon) icon.textContent = '';\n          card.classList.add('ck-issues--warn');\n          card.classList.remove('ck-issues--ok');\n        }\n      } catch (e) {\n        // ignore\n      }\n    })();\n  </script>\n\n  <hr class=\"ck-divider\" />\n\n  <div class=\"ck-section-title\">Storage</div>\n\n  <div class=\"ck-subtitle\">Fridges</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{FRIDGE_TEMP}}</span>\n      <span class=\"ck-text\">{{LABEL(FRIDGE_TEMP)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(FRIDGE_TEMP_PHOTO)}}</span>\n    </li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_LBD}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_LBD)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_NBO}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_NBO)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_FIF}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_FIF)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRIDGE_48H}}</span><span class=\"ck-text\">{{LABEL(FRIDGE_48H)}}</span></li>\n  </ul>\n\n  <div class=\"ck-subtitle\">Freezers</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{FREEZER_TEMP}}</span>\n      <span class=\"ck-text\">{{LABEL(FREEZER_TEMP)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(FREEZER_TEMP_PHOTO)}}</span>\n    </li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_FDS}}</span><span class=\"ck-text\">{{LABEL(FREEZER_FDS)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_PKI}}</span><span class=\"ck-text\">{{LABEL(FREEZER_PKI)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_FIF}}</span><span class=\"ck-text\">{{LABEL(FREEZER_FIF)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FREEZER_NEI}}</span><span class=\"ck-text\">{{LABEL(FREEZER_NEI)}}</span></li>\n  </ul>\n\n  <div class=\"ck-subtitle\">Vegetables</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{FRESH_VEGGIES}}</span><span class=\"ck-text\">{{LABEL(FRESH_VEGGIES)}}</span></li>\n  </ul>\n\n  <div class=\"ck-subtitle\">Dry foods</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{DRY_EXP}}</span><span class=\"ck-text\">{{LABEL(DRY_EXP)}}</span></li>\n  </ul>\n\n  <hr class=\"ck-divider\" />\n\n  <div class=\"ck-section-title\">Cleanliness</div>\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_STV}}</span><span class=\"ck-text\">{{LABEL(CLEAN_STV)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_KEQ}}</span><span class=\"ck-text\">{{LABEL(CLEAN_KEQ)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_CNT}}</span><span class=\"ck-text\">{{LABEL(CLEAN_CNT)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_RICE}}</span><span class=\"ck-text\">{{LABEL(CLEAN_RICE)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_OVN}}</span><span class=\"ck-text\">{{LABEL(CLEAN_OVN)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_DSH}}</span><span class=\"ck-text\">{{LABEL(CLEAN_DSH)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_BET}}</span><span class=\"ck-text\">{{LABEL(CLEAN_BET)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_BLR}}</span><span class=\"ck-text\">{{LABEL(CLEAN_BLR)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_CLTH}}</span><span class=\"ck-text\">{{LABEL(CLEAN_CLTH)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_FLR}}</span><span class=\"ck-text\">{{LABEL(CLEAN_FLR)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_BROOM}}</span><span class=\"ck-text\">{{LABEL(CLEAN_BROOM)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_MOP}}</span><span class=\"ck-text\">{{LABEL(CLEAN_MOP)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_EQP}}</span><span class=\"ck-text\">{{LABEL(CLEAN_EQP)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_PEST}}</span><span class=\"ck-text\">{{LABEL(CLEAN_PEST)}}</span></li>\n    <li class=\"ck-check\"><span class=\"ck-mark\">{{CLEAN_DMG}}</span><span class=\"ck-text\">{{LABEL(CLEAN_DMG)}}</span></li>\n  </ul>\n</div>\n",
  "checklist_weekly.summary.html": "<!--\n  Community Kitchen – Storage & Cleaning Checks (Summary HTML Template)\n\n  Notes:\n  - Keep placeholders as plain text tokens like {{FIELD_ID}} (do NOT split tokens across spans).\n  - FILE_UPLOAD icons (HTML-only): {{FILES_ICON(FIELD_ID)}} opens the read-only Files overlay in-app.\n  - This template is designed to be injected into the CK web app (not a standalone web page).\n-->\n\n<style>\n  .ck-summary-template {\n    /* inherit app typography; avoid fixed pt/px sizes so it scales nicely on iOS */\n    color: var(--text);\n    font-size: var(--ck-font-label); /* slightly denser than the app default */\n    margin: -8px; /* counter the preview container padding so more content fits */\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-meta-grid {\n    display: grid;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n    gap: 8px;\n    margin-bottom: 10px;\n  }\n\n  .ck-meta {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-meta-label {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n    margin-bottom: 4px;\n  }\n\n  .ck-meta-value {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    color: var(--text);\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-status-pill {\n    display: inline;\n    align-items: center;\n    padding: 0;\n    border-radius: 0;\n    border: none;\n    background: transparent;\n    color: var(--text);\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    line-height: 1;\n    white-space: nowrap;\n  }\n  .ck-status-pill[data-status-key=\"onClose\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n  .ck-status-pill[data-status-key=\"reOpened\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n\n  .ck-divider {\n    border: 0;\n    height: 1px;\n    background: var(--border);\n    margin: 10px 0;\n  }\n\n  .ck-section-title {\n    margin: 0 0 8px 0;\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    text-transform: none;\n    color: var(--muted);\n  }\n\n  .ck-subtitle {\n    margin: 10px 0 8px 0;\n    font-weight: 600;\n    font-size: var(--ck-font-label);\n    color: var(--text);\n  }\n\n  .ck-checklist {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If a checklist has an odd number of items, make the last card span full width */\n  .ck-checklist > .ck-check:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-check {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 8px 10px;\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    min-width: 0;\n  }\n\n  .ck-mark {\n    flex: 0 0 auto;\n    width: 1.6em;\n    text-align: center;\n    font-weight: 600;\n    line-height: 1.2;\n    font-size: var(--ck-font-control);\n  }\n\n  .ck-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    font-weight: 500;\n    line-height: 1.2;\n    color: var(--text);\n    white-space: normal;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-right {\n    flex: 0 0 auto;\n    margin-left: auto;\n    display: inline-flex;\n    align-items: center;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-right:empty {\n    display: none;\n  }\n\n  .ck-muted {\n    color: var(--muted);\n    font-weight: 500;\n  }\n\n  .ck-callouts {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px;\n  }\n\n  /* If there is only one callout, let it span full width */\n  .ck-callouts > .ck-callout:last-child:nth-child(odd) {\n    grid-column: 1 / -1;\n  }\n\n  .ck-callout {\n    border: none;\n    background: transparent;\n    border-radius: 0;\n    padding: 10px 10px;\n    min-width: 0;\n  }\n\n  .ck-callout-title {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    margin-bottom: 4px;\n  }\n\n  .ck-callout-body {\n    font-weight: 500;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n  }\n\n  .ck-callout-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-callout-icon {\n    flex: 0 0 auto;\n  }\n\n  /* If the FILES_ICON() placeholder renders nothing, don't reserve space */\n  .ck-callout-icon:empty {\n    display: none;\n  }\n\n  /* Make FILES_ICON buttons larger and easier to tap */\n  .ck-summary-template .ck-file-icon {\n    padding: 12px 14px !important;\n    border-radius: 16px !important;\n    font-size: var(--ck-font-control) !important;\n    line-height: 1 !important;\n  }\n\n  /* Larger badge for visibility */\n  .ck-summary-template .ck-file-icon__badge {\n    min-width: 28px !important;\n    height: 28px !important;\n    padding: 0 8px !important;\n    font-size: calc(var(--ck-font-label) * 0.85) !important;\n  }\n\n  /* Ultra-narrow devices: stack a bit to avoid unreadably tiny columns */\n  @media (max-width: 330px) {\n    .ck-meta-grid {\n      grid-template-columns: 1fr 1fr;\n    }\n    .ck-callouts {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  /* \"Issues\" callout (single field: ISSUES + ISSUES_EVD) */\n  .ck-issues-card {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .ck-issues-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .ck-issues-title {\n    font-weight: 600;\n    font-size: var(--ck-font-control);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-status-icon {\n    margin-left: auto;\n    font-size: var(--ck-font-control);\n    line-height: 1;\n  }\n\n  .ck-issues-empty {\n    display: none;\n    align-items: center;\n    gap: 10px;\n    font-weight: 600;\n  }\n\n  .ck-issues-row {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .ck-issues-subtitle {\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n  }\n\n  .ck-issues-body {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    min-width: 0;\n    font-weight: 600;\n    line-height: 1.15;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    padding-left: 12px;\n    border-left: 3px solid var(--border);\n  }\n\n  .ck-issues-text {\n    flex: 1 1 auto;\n    min-width: 0;\n    white-space: normal;\n  }\n\n  .ck-issues-sep {\n    flex: 0 0 auto;\n    color: var(--muted);\n    font-weight: 600;\n  }\n\n  .ck-issues-icon {\n    flex: 0 0 auto;\n  }\n\n  .ck-issues-icon:empty {\n    display: none;\n  }\n\n  .ck-callout.ck-issues--ok {\n    border-color: var(--border);\n    background: transparent;\n  }\n\n  .ck-callout.ck-issues--warn {\n    border-color: var(--border);\n    background: transparent;\n  }\n</style>\n\n<div class=\"ck-summary-template\">\n  <div class=\"ck-meta-grid\">\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(CHECK_FREQ)}}</div>\n      <div class=\"ck-meta-value\">{{CHECK_FREQ}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(DATE)}}</div>\n      <div class=\"ck-meta-value\">{{DATE}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(COOK)}}</div>\n      <div class=\"ck-meta-value\">{{COOK}}</div>\n    </div>\n    <div class=\"ck-meta\">\n      <div class=\"ck-meta-label\">{{LABEL(STATUS)}}</div>\n      <div class=\"ck-meta-value\">\n        <span class=\"ck-status-pill\" data-status-key=\"{{STATUS_KEY}}\">{{DEFAULT(STATUS, \"—\")}}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"ck-callouts\">\n    <div class=\"ck-callout ck-issues-card ck-issues--warn\" data-ck-issues-card>\n      <div class=\"ck-issues-header\">\n        <div class=\"ck-issues-title\">{{LABEL(ISSUES)}}</div>\n        <div class=\"ck-issues-status-icon\" data-ck-issues-icon aria-hidden=\"true\"></div>\n      </div>\n\n      <div class=\"ck-issues-empty\" data-ck-issues-empty>\n        <span aria-hidden=\"true\"></span>\n        <span>No issues</span>\n      </div>\n\n      <div class=\"ck-issues-row\" data-ck-issues-row>\n        <div class=\"ck-issues-subtitle\"><strong>{{LABEL(ISSUES)}}:</strong></div>\n        <div class=\"ck-issues-body\">\n          <span class=\"ck-issues-text\" data-ck-issues-text>{{DEFAULT(ISSUES, \"No issues\")}}</span>\n          <span class=\"ck-issues-sep\" data-ck-issues-sep aria-hidden=\"true\">|</span>\n          <span class=\"ck-issues-icon\" data-ck-issues-file-icon>{{FILES_ICON(ISSUES_EVD)}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    (function () {\n      try {\n        var card = document.querySelector('[data-ck-issues-card]');\n        if (!card) return;\n        if (card.getAttribute('data-ck-issues-init') === '1') return;\n        card.setAttribute('data-ck-issues-init', '1');\n\n        var normalize = function (s) {\n          return (s || '').toString().trim().toLowerCase().replace(/\\s+/g, ' ');\n        };\n        var isNoIssues = function (s) {\n          var t = normalize(s);\n          return t === '' || t === 'no issues' || t === 'no issue';\n        };\n\n        var textEl = card.querySelector('[data-ck-issues-text]');\n        var empty = isNoIssues(textEl ? textEl.textContent : '');\n\n        var row = card.querySelector('[data-ck-issues-row]');\n        if (row && empty) row.style.display = 'none';\n\n        var emptyBlock = card.querySelector('[data-ck-issues-empty]');\n        var statusIcon = card.querySelector('[data-ck-issues-icon]');\n        if (empty) {\n          if (emptyBlock) emptyBlock.style.display = 'flex';\n          if (statusIcon) statusIcon.textContent = '✅';\n          card.classList.add('ck-issues--ok');\n          card.classList.remove('ck-issues--warn');\n        } else {\n          if (emptyBlock) emptyBlock.style.display = 'none';\n          if (statusIcon) statusIcon.textContent = '⚠️';\n          card.classList.add('ck-issues--warn');\n          card.classList.remove('ck-issues--ok');\n        }\n\n        var hasIcon = function (el) {\n          if (!el) return false;\n          if (el.children && el.children.length) return true;\n          return normalize(el.textContent) !== '';\n        };\n        var fileIcon = card.querySelector('[data-ck-issues-file-icon]');\n        var sep = card.querySelector('[data-ck-issues-sep]');\n        if (sep) sep.style.display = !empty && hasIcon(fileIcon) ? 'inline' : 'none';\n      } catch (e) {\n        // ignore\n      }\n    })();\n  </script>\n\n  <hr class=\"ck-divider\" />\n\n  <div class=\"ck-section-title\">Checks</div>\n\n  <ul class=\"ck-checklist\">\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_FRIDGE_FREEZER}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_FRIDGE_FREEZER)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(WK_FRIDGE_FREEZER_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_OVEN}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_OVEN)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(WK_OVEN_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_DRAIN}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_DRAIN)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(WK_DRAIN_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_DISH}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_DISH)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(WK_DISH_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_EXHAUST}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_EXHAUST)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(WK_EXHAUST_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_SHELVES}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_SHELVES)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(WK_SHELVES_PH)}}</span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_CUT_BOARD}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_CUT_BOARD)}}</span>\n      <span class=\"ck-right\"></span>\n    </li>\n    <li class=\"ck-check\">\n      <span class=\"ck-mark\">{{WK_PEST}}</span>\n      <span class=\"ck-text\">{{LABEL(WK_PEST)}}</span>\n      <span class=\"ck-right\">{{FILES_ICON(WK_PEST_PH)}}</span>\n    </li>\n  </ul>\n</div>\n",
  "ingredients.summary.html": "<!--\n  Community Kitchen - Ingredients Management (Summary HTML Template)\n\n  - Keep placeholders intact (e.g., {{FIELD_ID}}).\n  - Designed for in-app summary with clear label/value hierarchy.\n-->\n\n<style>\n  .ck-summary-template {\n    color: var(--text);\n    font-family: var(--ck-font-family, system-ui);\n    font-size: var(--ck-font-label);\n    font-weight: 400;\n    line-height: 1.45;\n    margin: -8px;\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-field-list {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .ck-field-row {\n    display: grid;\n    grid-template-columns: minmax(160px, 1fr) minmax(0, 2fr);\n    gap: 10px;\n    align-items: start;\n    border-bottom: 1px solid var(--border);\n    padding-bottom: 10px;\n  }\n\n  .ck-field-row:last-child {\n    border-bottom: none;\n    padding-bottom: 0;\n  }\n\n  .ck-field-label {\n    font-size: var(--ck-font-control);\n    font-weight: 600;\n    line-height: 1.3;\n    color: var(--text);\n  }\n\n  .ck-field-value {\n    font-size: var(--ck-font-label);\n    font-weight: 400;\n    line-height: 1.45;\n    color: var(--text);\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    white-space: pre-wrap;\n  }\n\n  .ck-hidden-data {\n    display: none;\n  }\n\n  @media (max-width: 640px) {\n    .ck-field-row {\n      grid-template-columns: 1fr;\n      gap: 6px;\n    }\n  }\n</style>\n\n<div class=\"ck-summary-template\" data-ck-template=\"ingredients-summary\">\n  <ul class=\"ck-field-list\">\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(INGREDIENT_NAME)}}</div>\n      <div class=\"ck-field-value\">{{DEFAULT(INGREDIENT_NAME, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(CATEGORY)}}</div>\n      <div class=\"ck-field-value\">{{DEFAULT(CATEGORY, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(SUPPLIER)}}</div>\n      <div class=\"ck-field-value\">{{DEFAULT(SUPPLIER, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(ALLERGEN)}}</div>\n      <div class=\"ck-field-value\">{{DEFAULT(ALLERGEN, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(ALLOWED_UNIT)}}</div>\n      <div class=\"ck-field-value\">{{DEFAULT(ALLOWED_UNIT, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(DIETARY_APPLICABILITY)}}</div>\n      <div class=\"ck-field-value\">{{DEFAULT(DIETARY_APPLICABILITY, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(STATUS)}}</div>\n      <div class=\"ck-field-value\" data-ck-status-display>{{DEFAULT(STATUS, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\">\n      <div class=\"ck-field-label\">{{LABEL(CREATED_BY)}}</div>\n      <div class=\"ck-field-value\">{{DEFAULT(CREATED_BY, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\" data-ck-changed-on-row>\n      <div class=\"ck-field-label\">Last changed on</div>\n      <div class=\"ck-field-value\" data-ck-changed-on>{{DEFAULT(UPDATED_AT, \"—\")}}</div>\n    </li>\n    <li class=\"ck-field-row\" data-ck-changed-by-row>\n      <div class=\"ck-field-label\">{{LABEL(LAST_CHANGED_BY)}}</div>\n      <div class=\"ck-field-value\" data-ck-changed-by>{{DEFAULT(LAST_CHANGED_BY, \"—\")}}</div>\n    </li>\n  </ul>\n\n  <div class=\"ck-hidden-data\" aria-hidden=\"true\">\n    <span data-ck-status-raw>{{DEFAULT(STATUS, \"\")}}</span>\n    <span data-ck-start-raw>{{DEFAULT(EFFECTIVE_START_DATE, \"\")}}</span>\n    <span data-ck-end-raw>{{DEFAULT(EFFECTIVE_END_DATE, \"\")}}</span>\n    <span data-ck-updated-raw>{{DEFAULT(UPDATED_AT, \"\")}}</span>\n    <span data-ck-last-changed-by-raw>{{DEFAULT(LAST_CHANGED_BY, \"\")}}</span>\n  </div>\n</div>\n\n<script>\n  (function () {\n    var root = document.querySelector('[data-ck-template=\"ingredients-summary\"]');\n    if (!root || root.getAttribute('data-ck-init') === '1') return;\n    root.setAttribute('data-ck-init', '1');\n\n    var OPEN_END_ISO = '9999-12-31';\n    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n    var text = function (selector) {\n      var el = root.querySelector(selector);\n      return (el && el.textContent ? el.textContent : '').toString().trim();\n    };\n\n    var setText = function (selector, value) {\n      var el = root.querySelector(selector);\n      if (!el) return;\n      el.textContent = (value || '').toString();\n    };\n\n    var normalize = function (value) {\n      return (value || '').toString().trim().toLowerCase();\n    };\n\n    var parseIsoDate = function (raw) {\n      var value = (raw || '').toString().trim();\n      if (!value) return null;\n      var iso = value.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);\n      if (!iso) return null;\n      var year = Number(iso[1]);\n      var month = Number(iso[2]);\n      var day = Number(iso[3]);\n      if (!Number.isFinite(year) || !Number.isFinite(month) || !Number.isFinite(day)) return null;\n      if (month < 1 || month > 12 || day < 1 || day > 31) return null;\n      return { year: year, month: month, day: day };\n    };\n\n    var formatDate = function (raw) {\n      var value = (raw || '').toString().trim();\n      if (!value) return '';\n      if (/^\\d{2}-[A-Za-z]{3}-\\d{4}$/.test(value)) return value;\n      var parsed = parseIsoDate(value);\n      if (!parsed) return value;\n      var monthLabel = months[parsed.month - 1] || '';\n      if (!monthLabel) return value;\n      var dd = parsed.day < 10 ? '0' + parsed.day : String(parsed.day);\n      return dd + '-' + monthLabel + '-' + parsed.year;\n    };\n\n    var statusRaw = text('[data-ck-status-raw]');\n    var startRaw = text('[data-ck-start-raw]');\n    var endRaw = text('[data-ck-end-raw]');\n    var updatedRaw = text('[data-ck-updated-raw]');\n    var changedByRaw = text('[data-ck-last-changed-by-raw]');\n\n    var statusKey = normalize(statusRaw);\n    var formattedStart = formatDate(startRaw);\n    var formattedEnd = formatDate(endRaw);\n    var statusDisplay = statusRaw || '—';\n\n    if (statusKey === 'active') {\n      statusDisplay = (statusRaw || '—') + ' since ' + (formattedStart || '—');\n    } else if (statusKey === 'disabled') {\n      statusDisplay = (statusRaw || '—') + ' by ' + (changedByRaw || '—') + ' since ' + (formattedEnd || '—');\n    }\n\n    setText('[data-ck-status-display]', statusDisplay);\n\n    var normalizedEndRaw = normalize(endRaw);\n    var normalizedFormattedEnd = normalize(formattedEnd);\n    var isOpenEnded = normalizedEndRaw === OPEN_END_ISO ||\n      normalizedFormattedEnd === normalize('31-Dec-9999') ||\n      normalizedEndRaw.indexOf('9999-12-31') >= 0 ||\n      normalizedEndRaw.indexOf('31-dec-9999') >= 0 ||\n      normalizedFormattedEnd.indexOf('31-dec-9999') >= 0;\n\n    if (statusKey === 'draft') {\n      var draftRows = ['[data-ck-changed-on-row]', '[data-ck-changed-by-row]'];\n      draftRows.forEach(function (selector) {\n        var row = root.querySelector(selector);\n        if (row) row.style.display = 'none';\n      });\n      return;\n    }\n\n    var changedOnValue = isOpenEnded ? 'N/A' : (formatDate(updatedRaw) || formatDate(endRaw) || '—');\n    var changedByValue = isOpenEnded ? 'N/A' : (changedByRaw || '—');\n\n    setText('[data-ck-changed-on]', changedOnValue);\n    setText('[data-ck-changed-by]', changedByValue);\n  })();\n</script>\n",
  "ingredients_needed.html": "<!--\n  Community Kitchen - Ingredients Needed (HTML Template)\n\n  Notes:\n  - Keep placeholders intact (e.g., {{FIELD_ID}}).\n  - This template is used by the ING_PREVIEW report button to render a consolidated ingredient list.\n  - Ingredient table layout mirrors docs/templates/mp.ing_recipe.html (category headers + qty on the right).\n-->\n\n<style>\n  .ck-summary-template {\n    font-family: var(--ck-font-family, system-ui);\n    font-size: var(--ck-font-control, 1rem);\n    line-height: 1.4;\n    margin: -10px;\n    color: var(--text);\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    font-weight: 400;\n    max-width: 100%;\n  }\n\n  .ck-ingredients-needed__message {\n    white-space: normal;\n    margin: 0 0 6px 0;\n    overflow-wrap: anywhere;\n    text-align: left;\n  }\n\n  .ck-ingredients-needed__message-line {\n    display: block;\n    margin: 0;\n  }\n\n  .ck-ingredients-needed__evidence {\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n    flex-wrap: wrap;\n    margin-top: 2px;\n  }\n\n  .ck-ingredients-needed__evidence:empty {\n    display: none;\n  }\n\n  .ck-file-icon {\n    display: inline-flex;\n    align-items: center;\n    gap: 6px;\n    border: 1px solid var(--border);\n    background: transparent;\n    color: inherit;\n    font: inherit;\n    border-radius: var(--radius-control, 8px);\n    padding: 4px 10px;\n    cursor: pointer;\n    line-height: 1;\n  }\n\n  .ck-file-icon__badge {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    min-width: 18px;\n    height: 18px;\n    padding: 0 6px;\n    border-radius: 999px;\n    background: var(--border);\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label, 0.95rem) * 0.8);\n  }\n\n  .ck-ingredients-table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: auto;\n  }\n\n  .ck-ingredients-table col.ck-col-name {\n    width: auto;\n  }\n\n  .ck-ingredients-table col.ck-col-qty {\n    width: 10ch;\n  }\n\n  .ck-ingredients-table th,\n  .ck-ingredients-table td {\n    text-align: left;\n    padding: 6px 0;\n    vertical-align: top;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-category-row th {\n    font-size: var(--ck-font-label, 0.95rem);\n    font-weight: 600;\n    padding-top: 12px;\n  }\n\n  .ck-category-toggle {\n    appearance: none;\n    border: 0;\n    background: transparent;\n    color: inherit;\n    font: inherit;\n    font-weight: 700;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    text-align: left;\n    display: flex;\n    align-items: baseline;\n    justify-content: space-between;\n    gap: 12px;\n    cursor: pointer;\n  }\n\n  .ck-category-toggle__label {\n    font-weight: 800;\n  }\n\n  .ck-category-toggle:focus {\n    outline: 2px solid currentColor;\n    outline-offset: 3px;\n  }\n\n  .ck-expand-pill {\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n    padding: 4px 14px;\n    border: 1px solid var(--border);\n    border-radius: 999px;\n    font-weight: 600;\n    white-space: nowrap;\n    line-height: 1;\n  }\n\n  .ck-expand-pill__check {\n    font-weight: 700;\n  }\n\n  .ck-expand-pill__chev {\n    width: 1em;\n    flex: 0 0 auto;\n    opacity: 0.7;\n    transform: rotate(90deg);\n    transform-origin: center;\n  }\n\n  table[data-collapsed=\"1\"] .ck-expand-pill__chev {\n    transform: rotate(0deg);\n  }\n\n  table[data-collapsed=\"1\"] .ck-ingredient-row {\n    display: none;\n  }\n\n  .ck-ingredient-row td {\n    border-bottom: 1px solid var(--border);\n  }\n\n  .ck-ingredient-name {\n    min-width: 0;\n  }\n\n  .ck-ingredient-qty {\n    white-space: nowrap;\n    text-align: right;\n    font-weight: 500;\n    padding-left: 12px;\n    min-width: 8ch;\n  }\n\n  .ck-ingredient-allergen {\n    opacity: 0.75;\n  }\n\n  .ck-ingredient-allergen:empty {\n    display: none;\n  }\n\n  .ck-ingredient-allergen:not(:empty)::before {\n    content: \" (\";\n  }\n\n  .ck-ingredient-allergen:not(:empty)::after {\n    content: \")\";\n  }\n\n  .ck-directives {\n    display: none;\n  }\n</style>\n\n<div class=\"ck-summary-template\" data-ck-template=\"ingredients_needed\">\n  <div class=\"ck-ingredients-needed__message\" aria-label=\"Ingredients needed message\">\n    <span class=\"ck-ingredients-needed__message-line\">\n      {{DEFAULT(MP_DISTRIBUTOR, \"—\")}} | {{DEFAULT(MP_SERVICE, \"—\")}} | {{DEFAULT(MP_PREP_DATE, \"—\")}} | {{DEFAULT(MP_ID, \"—\")}} |\n    </span>\n    <span class=\"ck-ingredients-needed__evidence\">{{FILES_ICON(ING_EVD)}} {{DEFAULT(ING_EVD, \"\")}}</span>\n  </div>\n  <div class=\"ck-ingredients-needed__message\" aria-label=\"Ingredients needed note\">\n    <span class=\"ck-ingredients-needed__message-line\">This list excluded ingredients from leftovers</span>\n  </div>\n\n  <table class=\"ck-ingredients-table\" aria-label=\"Ingredients needed by category\">\n    <colgroup>\n      <col class=\"ck-col-name\" />\n      <col class=\"ck-col-qty\" />\n    </colgroup>\n    <tbody>\n      <tr class=\"ck-category-row\">\n        <th scope=\"row\" colspan=\"2\">\n          <button type=\"button\" class=\"ck-category-toggle\" aria-expanded=\"true\">\n            <span class=\"ck-category-toggle__label\">{{GROUP_TABLE(MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.CAT)}}{{ORDER_BY(CAT ASC, ING ASC)}}</span>\n            <span class=\"ck-expand-pill\" data-ck-expand-pill>\n              <span class=\"ck-expand-pill__check\" aria-hidden=\"true\">✓</span>\n              <span data-ck-pill-text>Tap to collapse</span>\n              <span class=\"ck-expand-pill__chev\" aria-hidden=\"true\">▶</span>\n            </span>\n          </button>\n        </th>\n      </tr>\n      <tr class=\"ck-ingredient-row\">\n        <td class=\"ck-ingredient-name\">\n          {{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ING}}\n          <span class=\"ck-ingredient-allergen\">{{DEFAULT(MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ALLERGEN, \"\")}}</span>\n          <span class=\"ck-directives\">\n            {{EXCLUDE_WHEN_WHEN({\"not\":{\"any\":[{\"all\":[{\"fieldId\":\"PREP_TYPE\",\"equals\":\"Cook\"},{\"fieldId\":\"RECIPE\",\"notEmpty\":true}]},{\"all\":[{\"fieldId\":\"PREP_TYPE\",\"equals\":\"Full\"},{\"fieldId\":\"__ckRowSource\",\"equals\":\"manual\"}]}]}})}}\n            {{CONSOLIDATED_TABLE(MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI)}}\n          </span>\n        </td>\n        <td class=\"ck-ingredient-qty\">\n          {{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.QTY}} {{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.UNIT}}\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n\n<script>\n  (function () {\n    var root = document.querySelector('[data-ck-template=\"ingredients_needed\"]');\n    if (!root || root.getAttribute('data-ck-init') === '1') return;\n    root.setAttribute('data-ck-init', '1');\n\n    // Hide \"(None)\" allergens for faster scanning.\n    try {\n      var allergenNodes = root.querySelectorAll('.ck-ingredient-allergen');\n      allergenNodes.forEach(function (node) {\n        var text = (node.textContent || '').toString().trim();\n        if (!text) return;\n        if (text.toLowerCase() === 'none') {\n          node.textContent = '';\n        }\n      });\n    } catch (_) {\n      // ignore\n    }\n\n    // If there is no receipt evidence, hide the evidence line.\n    try {\n      var ev = root.querySelector('.ck-ingredients-needed__evidence');\n      if (ev) {\n        var hasButton = ev.querySelector('[data-ck-file-field]');\n        var hasLink = ev.querySelector('a[href]');\n        var hasText = (ev.textContent || '').toString().trim();\n        if (!hasButton && !hasLink && !hasText) {\n          ev.style.display = 'none';\n        }\n      }\n    } catch (_) {\n      // ignore\n    }\n\n    // Tap/click/keyboard toggle: collapse per-category table.\n    var toggles = root.querySelectorAll('.ck-category-toggle');\n    toggles.forEach(function (btn) {\n      var pillText = btn.querySelector('[data-ck-pill-text]');\n      btn.addEventListener('click', function () {\n        var table = btn.closest('table');\n        if (!table) return;\n        var collapsed = table.getAttribute('data-collapsed') === '1';\n        table.setAttribute('data-collapsed', collapsed ? '0' : '1');\n        btn.setAttribute('aria-expanded', collapsed ? 'true' : 'false');\n        if (pillText) {\n          pillText.textContent = collapsed ? 'Tap to collapse' : 'Tap to expand';\n        }\n      });\n      btn.addEventListener('keydown', function (e) {\n        if (!e) return;\n        if (e.key !== 'Enter' && e.key !== ' ') return;\n        e.preventDefault();\n        btn.click();\n      });\n    });\n\n    // Remove empty categories (tables that ended up with no ingredient rows after directive filtering).\n    try {\n      var tables = root.querySelectorAll('table.ck-ingredients-table');\n      tables.forEach(function (table) {\n        var hasRows = table.querySelectorAll('tr.ck-ingredient-row').length > 0;\n        if (!hasRows) {\n          table.remove();\n        }\n      });\n    } catch (_) {\n      // ignore\n    }\n  })();\n</script>\n",
  "meal_production.pdf.html": "<style>\n  .ck-pdf-template {\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 15px;\n    line-height: 1.45;\n    color: #000000;\n    margin: 0;\n    padding: 44px 54px;\n  }\n\n  .ck-pdf-template * {\n    box-sizing: border-box;\n    color: #000000;\n  }\n\n  .ck-pdf-template img {\n    max-width: 56px;\n    height: auto;\n    display: block;\n  }\n\n  .ck-pdf-template table {\n    width: 100%;\n    table-layout: fixed;\n  }\n\n  .ck-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: 24px;\n    margin-bottom: 28px;\n  }\n\n  .ck-header-left,\n  .ck-header-right {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .ck-header-right {\n    margin-top: 22px;\n  }\n\n  .ck-header-title {\n    font-size: 24px;\n    font-weight: 600;\n    font-family: Arial, Helvetica, sans-serif;\n    color: #000000;\n    margin-top: 2px;\n  }\n\n  .ck-prepared-label {\n    font-size: 15px;\n    letter-spacing: 0;\n    font-weight: 400;\n    text-transform: none;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-prepared-value {\n    font-size: 15px;\n    font-weight: 400;\n    word-break: break-word;\n    text-align: left;\n    color: #000000;\n  }\n\n  .ck-prepared-name {\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 24px;\n    font-weight: 600;\n    color: #000000;\n    text-align: left;\n    word-break: break-word;\n    margin-top: 2px;\n  }\n\n  .ck-address-line {\n    font-size: 15px;\n    font-weight: 400;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-section {\n    margin-bottom: 20px;\n  }\n\n  .ck-section-title {\n    margin: 0 0 8px 0;\n    font-size: 20px;\n    font-weight: 600;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-report-title {\n    display: none;\n  }\n\n  .ck-info-table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    border: 0px solid #000000;\n    margin-top: 14px;\n    background: #ffffff;\n  }\n\n  .ck-info-table td {\n    border: 0px solid #000000;\n    padding: 10px 0;\n    vertical-align: top;\n    background: #ffffff;\n  }\n\n  .ck-info-label {\n    font-size: 15px;\n    font-weight: 400;\n    color: #000000;\n    width: 28% !important;\n    white-space: nowrap;\n    padding-right: 18px;\n    text-align: left;\n  }\n\n  .ck-info-value {\n    font-size: 15px;\n    font-weight: 400;\n    width: 72% !important;\n    overflow-wrap: anywhere;\n    word-break: break-word;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-service-line {\n    margin: 26px 0 10px 0;\n    font-size: 16px;\n    font-weight: 400;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-service-label {\n    font-weight: 400;\n  }\n\n  .ck-service-value {\n    font-weight: 400;\n  }\n\n  .ck-service-bullets {\n    margin: 10px 0 0 42px;\n    padding: 0;\n    font-size: 14px;\n    font-weight: 400;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-service-bullets li {\n    margin: 4px 0;\n  }\n\n  .ck-meal-list {\n    display: flex;\n    flex-direction: column;\n    gap: 18px;\n  }\n\n  .ck-meal-table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    border: 0.5px solid #000000;\n    background: #ffffff;\n  }\n\n  .ck-meal-table thead,\n  .ck-meal-table tbody {\n    display: block;\n    width: 100%;\n  }\n\n  .ck-meal-table thead tr,\n  .ck-meal-table tbody tr {\n    display: table;\n    width: 100%;\n    table-layout: fixed;\n  }\n\n  .ck-meal-table td,\n  .ck-meal-table th {\n    padding: 14px 14px;\n    vertical-align: middle;\n    border: 0.5px solid #000000;\n    background: #ffffff;\n  }\n\n  .ck-meal-table thead th {\n    border: 0.5px solid #000000;\n  }\n\n  .ck-meal-table th.ck-meal-table__title {\n    background: #d8f0d2;\n    background-color: #d8f0d2;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-meal-table__label {\n    width: 28% !important;\n    white-space: nowrap;\n    font-size: 15px;\n    font-weight: 400;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-meal-table__value {\n    width: 72% !important;\n    font-size: 15px;\n    font-weight: 400;\n    overflow-wrap: anywhere;\n    word-break: break-word;\n    text-align: left;\n    color: #000000;\n  }\n\n  .ck-pdf-template table tbody tr > td:first-child,\n  .ck-pdf-template table tbody tr > th:first-child {\n    width: 28% !important;\n    white-space: nowrap;\n  }\n\n  .ck-pdf-template table tbody tr > td:last-child,\n  .ck-pdf-template table tbody tr > th:last-child {\n    width: 72% !important;\n    overflow-wrap: anywhere;\n    word-break: break-word;\n  }\n\n  .ck-meal-table tbody tr:first-child .ck-meal-table__value {\n    text-align: right;\n  }\n\n  .ck-total-portions {\n    margin-top: 18px;\n    font-size: 16px;\n    font-weight: 400;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-total-portions strong {\n    font-weight: 400;\n  }\n\n  .ck-total-portions .ck-total-portions-value {\n    font-weight: 400;\n    text-decoration: none;\n  }\n\n  .ck-totals {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 12px 24px;\n  }\n\n  .ck-total-label {\n    font-size: 15px;\n    font-weight: 400;\n    color: #000000;\n    text-align: left;\n  }\n\n  .ck-total-value {\n    font-size: 15px;\n    font-weight: 400;\n    color: #000000;\n    text-align: right;\n  }\n\n  .ck-notes {\n    margin-top: 12px;\n    font-size: 15px;\n    font-weight: 400;\n    color: #000000;\n    text-align: left;\n    white-space: pre-wrap;\n    word-break: break-word;\n  }\n\n  .ck-notes:empty {\n    display: none;\n  }\n\n  @media (max-width: 600px) {\n    .ck-header {\n      flex-direction: column;\n    }\n    .ck-totals {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  @media print {\n    .ck-pdf-template table {\n      width: 100%;\n      table-layout: fixed;\n    }\n\n    .ck-meal-table thead,\n    .ck-meal-table tbody {\n      display: block;\n      width: 100%;\n    }\n\n    .ck-meal-table thead tr,\n    .ck-meal-table tbody tr {\n      display: table;\n      width: 100%;\n      table-layout: fixed;\n    }\n\n    .ck-info-label,\n    .ck-meal-table__label,\n    .ck-pdf-template table tbody tr > td:first-child,\n    .ck-pdf-template table tbody tr > th:first-child {\n      width: 28% !important;\n      white-space: nowrap;\n    }\n\n    .ck-info-value,\n    .ck-meal-table__value,\n    .ck-pdf-template table tbody tr > td:last-child,\n    .ck-pdf-template table tbody tr > th:last-child {\n      width: 72% !important;\n      overflow-wrap: anywhere;\n      word-break: break-word;\n    }\n  }\n</style>\n\n<div class=\"ck-pdf-template\" data-ck-template=\"meal-production-pdf\">\n  <header class=\"ck-header\">\n    <div class=\"ck-header-left\">\n      {{APP_HEADER_LOGO_HTML}}\n      <div class=\"ck-header-title\">Community Kitchen</div>\n      <div class=\"ck-address-line\">Rue Capitaine Crespel 29</div>\n      <div class=\"ck-address-line\">1050 Brussels, Belgium</div>\n    </div>\n    <div class=\"ck-header-right\">\n      <div class=\"ck-prepared-label\">Prepared for</div>\n      <div class=\"ck-prepared-name\">{{DEFAULT(MP_DISTRIBUTOR.DIST_NAME, \"—\")}}</div>\n      <div class=\"ck-prepared-value\">{{DEFAULT(MP_DISTRIBUTOR.DIST_ADDR_1, \"\")}}</div>\n      <div class=\"ck-prepared-value\">{{DEFAULT(MP_DISTRIBUTOR.DIST_ADDR_2, \"\")}}</div>\n      <div class=\"ck-prepared-value\">\n        {{DEFAULT(MP_DISTRIBUTOR.DIST_POST_CODE, \"\")}} {{DEFAULT(MP_DISTRIBUTOR.DIST_CITY, \"\")}}, {{DEFAULT(MP_DISTRIBUTOR.DIST_COUNTRY, \"\")}}\n      </div>\n    </div>\n  </header>\n\n  <section class=\"ck-section\">\n    <div class=\"ck-report-title\">MEAL PRODUCTION &amp; DISTRIBUTION REPORT</div>\n    <table class=\"ck-info-table\" aria-label=\"Production details\">\n      <tbody>\n        <tr>\n          <td class=\"ck-info-label\">Production date:</td>\n          <td class=\"ck-info-value\">{{MP_PREP_DATE}}</td>\n        </tr>\n        <tr>\n          <td class=\"ck-info-label\">{{LABEL(MP_EXP_DATE)}}:</td>\n          <td class=\"ck-info-value\">{{MP_EXP_DATE}}</td>\n        </tr>\n        <tr>\n          <td class=\"ck-info-label\">Batch number:</td>\n          <td class=\"ck-info-value\">{{MP_ID}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </section>\n\n  <section class=\"ck-section\">\n    <div class=\"ck-service-line\"><span class=\"ck-service-label\">Service:</span> <span class=\"ck-service-value\">{{DEFAULT(MP_SERVICE, \"—\")}}</span></div>\n    <ul class=\"ck-service-bullets\" aria-label=\"Storage instructions\">\n      <li>Serve hot. If reheating is required, reheat thoroughly.</li>\n      <li>Keep refrigerated at ≤ 4°C.</li>\n    </ul>\n    <div class=\"ck-meal-list\">\n      {{MEAL_BLOCKS}}\n    </div>\n  </section>\n\n  <section class=\"ck-section\">\n    <div class=\"ck-section-title\">Totals: {{SUM(MP_MEALS_REQUEST.FINAL_QTY)}}</div>\n    <div class=\"ck-notes\">{{MP_NOTES}}</div>\n  </section>\n\n</div>\n",
  "meal_production.summary.html": "<!--\n  Community Kitchen - Meal Production (Summary HTML Template)\n\n  Notes:\n  - Keep placeholders intact (e.g., {{FIELD_ID}}).\n  - Designed for in-app summary; minimal styles and a small script to organize meal details.\n-->\n\n<style>\n  .ck-summary-template {\n    font-family: var(--ck-font-family, system-ui);\n    font-size: var(--ck-font-control, 1rem);\n    line-height: 1.45;\n    margin: -8px;\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n    font-weight: 400;\n  }\n\n  .ck-header {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .ck-header-title {\n    font-weight: 600;\n    font-size: var(--ck-font-control);\n  }\n\n  .ck-meta-grid {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px 16px;\n  }\n\n  .ck-meta-item {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n    min-width: 0;\n  }\n\n  .ck-meta-item-inline {\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: baseline;\n    gap: 6px;\n  }\n\n  .ck-meta-item--full {\n    grid-column: 1 / -1;\n  }\n\n  .ck-label {\n    font-weight: 500;\n    font-size: var(--ck-font-label);\n  }\n\n  .ck-value {\n    font-weight: 400;\n    word-break: break-word;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-section {\n    margin-top: 16px;\n  }\n\n  .ck-section-title {\n    margin: 0 0 8px 0;\n    font-weight: 600;\n    font-size: var(--ck-font-label);\n  }\n\n  .ck-meal-list {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .ck-meal-block {\n    padding-top: 12px;\n    border-top: 1px solid currentColor;\n  }\n\n  .ck-meal-block:first-of-type {\n    border-top: 0;\n    padding-top: 0;\n  }\n\n  .ck-meal-title {\n    font-weight: 600;\n    margin: 0 0 2px 0;\n  }\n\n  .ck-prep-group {\n    margin-top: 8px;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n  }\n\n  .ck-prep-line {\n    font-weight: 500;\n  }\n\n  .ck-prep-details {\n    font-size: calc(var(--ck-font-label) * 0.85);\n    opacity: 0.85;\n  }\n\n  .ck-inline {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px 10px;\n  }\n\n  .ck-inline-item {\n    display: inline-flex;\n    align-items: center;\n    gap: 6px;\n    min-width: 0;\n  }\n\n  .ck-inline-item + .ck-inline-item::before {\n    content: \"|\";\n    margin-right: 6px;\n    opacity: 0.6;\n  }\n\n  .ck-totals {\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 8px 16px;\n  }\n\n  .ck-total-row {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n    min-width: 0;\n  }\n\n  .ck-action-row {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-top: 16px;\n  }\n\n  .ck-action-button {\n    border: 1px solid currentColor;\n    background: transparent;\n    padding: 6px 12px;\n    border-radius: var(--radius-control, 8px);\n    font: inherit;\n    font-weight: 500;\n    color: inherit;\n    cursor: pointer;\n  }\n\n  .ck-hidden {\n    display: none;\n  }\n\n  .ck-notes {\n    width: 100%;\n    white-space: pre-wrap;\n  }\n\n  .ck-notes:empty {\n    display: none;\n  }\n\n  @media (max-width: 600px) {\n    .ck-meta-grid,\n    .ck-totals {\n      grid-template-columns: 1fr;\n    }\n  }\n</style>\n\n<div class=\"ck-summary-template\" data-ck-template=\"meal-production-summary\">\n  <div class=\"ck-header\">\n    <div class=\"ck-header-title\">{{MP_DISTRIBUTOR.DIST_NAME}} | {{MP_SERVICE}}</div>\n    <div class=\"ck-meta-grid\">\n      <div class=\"ck-meta-item ck-meta-item-inline ck-meta-item--full\">\n        <span class=\"ck-label\">{{LABEL(MP_PREP_DATE)}}:</span>\n        <span class=\"ck-value\">{{MP_PREP_DATE}}</span>\n      </div>\n      <div class=\"ck-meta-item ck-meta-item-inline ck-meta-item--full\">\n        <span class=\"ck-label\">{{LABEL(MP_EXP_DATE)}}:</span>\n        <span class=\"ck-value\">{{MP_EXP_DATE}}</span>\n      </div>\n      <div class=\"ck-meta-item ck-meta-item-inline ck-meta-item--full\">\n        <span class=\"ck-label\">{{LABEL(MP_ID)}}:</span>\n        <span class=\"ck-value\">{{MP_ID}}</span>\n      </div>\n      <div class=\"ck-meta-item ck-meta-item-inline ck-meta-item--full\">\n        <span class=\"ck-label\">{{LABEL(MP_COOK_NAME)}}:</span>\n        <span class=\"ck-value\">{{MP_COOK_NAME}}</span>\n      </div>\n      <div class=\"ck-meta-item ck-meta-item-inline ck-meta-item--full\">\n        <span class=\"ck-label\">{{LABEL(MP_VOLUNTEER)}}:</span>\n        <span class=\"ck-value\">{{DEFAULT(MP_VOLUNTEER, \"N/A\")}}</span>\n      </div>\n      <div class=\"ck-meta-item ck-meta-item--full ck-notes ck-value\">{{MP_NOTES}}</div>\n      <div class=\"ck-hidden\" data-record-status>{{STATUS}}</div>\n      <div class=\"ck-hidden\" data-record-status-key>{{STATUS_KEY}}</div>\n    </div>\n  </div>\n\n  <div class=\"ck-section\">\n    <div class=\"ck-section-title\">Production details</div>\n    <div class=\"ck-meal-list\" data-ck-meal-list></div>\n\n    <table class=\"ck-hidden\" data-ck-meal-data>\n      <tbody>\n        <tr>\n          <td>\n            <span class=\"ck-hidden\">{{ROW_TABLE(MP_MEALS_REQUEST.MP_TYPE_LI.PREP_TYPE)}}</span>\n            <span class=\"ck-hidden\" data-meal-index>{{MP_MEALS_REQUEST.__ROWINDEX}}</span>\n            <span class=\"ck-hidden\" data-meal-type>{{MP_MEALS_REQUEST.MEAL_TYPE}}</span>\n            <span class=\"ck-hidden\" data-ord-qty>{{MP_MEALS_REQUEST.ORD_QTY}}</span>\n            <span class=\"ck-hidden\" data-to-cook>{{MP_MEALS_REQUEST.MP_TO_COOK}}</span>\n            <span class=\"ck-hidden\" data-final-qty>{{MP_MEALS_REQUEST.FINAL_QTY}}</span>\n            <span class=\"ck-hidden\" data-prep-type>{{MP_MEALS_REQUEST.MP_TYPE_LI.PREP_TYPE}}</span>\n            <span class=\"ck-hidden\" data-prep-qty>{{MP_MEALS_REQUEST.MP_TYPE_LI.PREP_QTY}}</span>\n            <span class=\"ck-hidden\" data-recipe>{{MP_MEALS_REQUEST.MP_TYPE_LI.RECIPE}}</span>\n            <span class=\"ck-hidden\" data-core-temp>{{MP_MEALS_REQUEST.MP_COOK_TEMP}}</span>\n            <span class=\"ck-hidden\" data-core-temp-label>{{LABEL(MP_MEALS_REQUEST.MP_COOK_TEMP)}}</span>\n            <span class=\"ck-hidden\" data-temp-photos=\"{{MP_MEALS_REQUEST.TEMP_EVD}}\"></span>\n          </td>\n        </tr>\n        <tr class=\"ck-ingredient-row ck-hidden\">\n          <td data-ingredient-name>{{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ING}}</td>\n          <td data-ingredient-allergen>{{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ALLERGEN}}</td>\n          {{EXCLUDE_WHEN_WHEN({\"fieldId\":\"MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ING\",\"isEmpty\":true})}}\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div class=\"ck-section\">\n    <div class=\"ck-totals\">\n      <div class=\"ck-total-row\">\n        <div class=\"ck-label\">Total {{LABEL(MP_MEALS_REQUEST.ORD_QTY)}}</div>\n        <div class=\"ck-value\">{{SUM(MP_MEALS_REQUEST.ORD_QTY)}}</div>\n      </div>\n      <div class=\"ck-total-row\" data-total-delivered-row>\n        <div class=\"ck-label\">Total {{LABEL(MP_MEALS_REQUEST.FINAL_QTY)}}</div>\n        <div class=\"ck-value\">{{SUM(MP_MEALS_REQUEST.FINAL_QTY)}}</div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"ck-section\">\n    <div class=\"ck-action-row\">\n      <button type=\"button\" class=\"ck-action-button\" data-ck-action=\"ING_PREVIEW\">Ingredients needed</button>\n    </div>\n    <div class=\"ck-total-row\">\n      <div class=\"ck-label\">{{LABEL(ING_EVD)}}</div>\n      <div class=\"ck-value\">{{FILES_ICON(ING_EVD)}}</div>\n    </div>\n  </div>\n</div>\n\n<script>\n  (function () {\n    var root = document.querySelector('[data-ck-template=\"meal-production-summary\"]');\n    if (!root || root.getAttribute('data-ck-init') === '1') return;\n    root.setAttribute('data-ck-init', '1');\n\n    // Hide notes when empty so it doesn't waste vertical space.\n    try {\n      var notes = root.querySelector('.ck-notes');\n      if (notes) {\n        var text = (notes.textContent || '').toString().trim();\n        if (!text || text === '—' || text === '{{MP_NOTES}}') notes.classList.add('ck-hidden');\n      }\n    } catch (_) {\n      // ignore\n    }\n\n    var normalize = function (value) {\n      return (value || '').toString().trim().toLowerCase();\n    };\n    var toText = function (value) {\n      return (value || '').toString().trim();\n    };\n    var statusKeyRaw = toText((root.querySelector('[data-record-status-key]') || {}).textContent || '');\n    var statusRaw = toText((root.querySelector('[data-record-status]') || {}).textContent || '');\n    var isClosedStatus = normalize(statusKeyRaw) === 'onclose' || normalize(statusRaw) === 'closed';\n    var deliveredRow = root.querySelector('[data-total-delivered-row]');\n    if (deliveredRow && !isClosedStatus) {\n      deliveredRow.classList.add('ck-hidden');\n    }\n\n    var listContainer = root.querySelector('[data-ck-meal-list]');\n    var dataTables = Array.prototype.slice.call(root.querySelectorAll('[data-ck-meal-data]'));\n    if (!listContainer || !dataTables.length) return;\n\n    var isTemplateToken = function (value) {\n      var text = toText(value);\n      return /^{{[\\s\\S]*}}$/.test(text);\n    };\n    var hasMeaningfulValue = function (value) {\n      var text = toText(value);\n      if (!text || text === '—') return false;\n      if (isTemplateToken(text)) return false;\n      return true;\n    };\n    var parseNumber = function (value) {\n      var n = Number((value || '').toString().trim());\n      return Number.isFinite(n) ? n : NaN;\n    };\n    var encodeFileField = function (urls) {\n      if (!urls || !urls.length) return '';\n      try {\n        return 'urls:' + encodeURIComponent(JSON.stringify(urls));\n      } catch (err) {\n        try {\n          return 'urls:' + encodeURIComponent(urls.join('|'));\n        } catch (err2) {\n          return '';\n        }\n      }\n    };\n    var uniq = function (list) {\n      var seen = new Set();\n      var out = [];\n      list.forEach(function (item) {\n        var key = normalize(item);\n        if (!key || seen.has(key)) return;\n        seen.add(key);\n        out.push(item.toString().trim());\n      });\n      return out;\n    };\n    var looksLikeUrl = function (value) {\n      return /^https?:\\/\\//i.test((value || '').toString().trim());\n    };\n    var extractUrls = function (raw) {\n      var text = toText(raw);\n      if (!text) return [];\n      var parts = text\n        .split(/[,\\n]+/g)\n        .map(function (item) {\n          return item.trim();\n        })\n        .filter(Boolean);\n      var urls = [];\n      var addUrl = function (url) {\n        if (!looksLikeUrl(url)) return;\n        urls.push(url);\n      };\n      if (parts.length > 1) {\n        parts.forEach(addUrl);\n        return uniq(urls);\n      }\n      var matches = text.match(/https?:\\/\\/[^\\s,]+/gi) || [];\n      matches.forEach(addUrl);\n      return uniq(urls);\n    };\n\n    var collectIngredients = function (table) {\n      var rows = Array.prototype.slice.call(table.querySelectorAll('.ck-ingredient-row'));\n      var ingredients = [];\n      var allergens = [];\n      rows.forEach(function (row) {\n        var nameEl = row.querySelector('[data-ingredient-name]');\n        var allergenEl = row.querySelector('[data-ingredient-allergen]');\n        var name = toText(nameEl ? nameEl.textContent : '');\n        var allergen = toText(allergenEl ? allergenEl.textContent : '');\n        if (name) ingredients.push(name);\n        if (allergen && normalize(allergen) !== 'none') allergens.push(allergen);\n      });\n      return {\n        ingredients: ingredients,\n        allergens: allergens\n      };\n    };\n\n    var entries = dataTables.map(function (table) {\n      var getText = function (selector) {\n        var el = table.querySelector(selector);\n        return toText(el ? el.textContent : '');\n      };\n      var tempPhotosEl = table.querySelector('[data-temp-photos]');\n      var tempPhotosRaw = tempPhotosEl ? tempPhotosEl.getAttribute('data-temp-photos') : '';\n      var tempPhotoUrls = extractUrls(tempPhotosRaw);\n      var collected = collectIngredients(table);\n      return {\n        table: table,\n        mealIndex: getText('[data-meal-index]'),\n        mealType: getText('[data-meal-type]'),\n        ordQty: getText('[data-ord-qty]'),\n        toCook: getText('[data-to-cook]'),\n        finalQty: getText('[data-final-qty]'),\n        prepType: getText('[data-prep-type]'),\n        prepQty: getText('[data-prep-qty]'),\n        recipe: getText('[data-recipe]'),\n        coreTemp: getText('[data-core-temp]'),\n        coreTempLabel: getText('[data-core-temp-label]'),\n        tempPhotoUrls: tempPhotoUrls,\n        ingredients: collected.ingredients,\n        allergens: collected.allergens\n      };\n    });\n\n    var groups = new Map();\n    entries.forEach(function (entry) {\n      var key = entry.mealIndex || entry.mealType || '__unknown__';\n      var group = groups.get(key);\n      if (!group) {\n        group = { entries: [] };\n        groups.set(key, group);\n      }\n      group.entries.push(entry);\n    });\n\n    var rowRequiresFoodSafety = function (requestedRaw) {\n      var requestedNumber = parseNumber(requestedRaw);\n      if (!Number.isNaN(requestedNumber)) return requestedNumber > 0;\n      var requestedText = toText(requestedRaw);\n      if (!requestedText || requestedText === '0') return false;\n      return !isTemplateToken(requestedText);\n    };\n\n    var foodSafetyComplete = true;\n    groups.forEach(function (group) {\n      if (!foodSafetyComplete) return;\n      if (!group || !group.entries || !group.entries.length) return;\n      var requestedRaw = '';\n      for (var i = 0; i < group.entries.length; i += 1) {\n        if (hasMeaningfulValue(group.entries[i].ordQty)) {\n          requestedRaw = group.entries[i].ordQty;\n          break;\n        }\n      }\n      if (!rowRequiresFoodSafety(requestedRaw)) return;\n\n      var hasCoreTemp = group.entries.some(function (entry) {\n        return hasMeaningfulValue(entry.coreTemp);\n      });\n      var hasTempEvidence = group.entries.some(function (entry) {\n        return Array.isArray(entry.tempPhotoUrls) && entry.tempPhotoUrls.length > 0;\n      });\n      if (!hasCoreTemp || !hasTempEvidence) {\n        foodSafetyComplete = false;\n      }\n    });\n\n    var formatPortions = function (rawValue, fallbackValue) {\n      var n = parseNumber(rawValue);\n      if (!Number.isNaN(n)) return n.toString() + ' portions';\n      var text = toText(rawValue);\n      if (text) return text + ' portions';\n      var fallbackText = toText(fallbackValue);\n      if (fallbackText) return fallbackText + ' portions';\n      return '0 portions';\n    };\n\n    var formatList = function (items, emptyText) {\n      var list = uniq(items);\n      return list.length ? list.join(', ') : emptyText;\n    };\n    var formatConfirmation = function (rawValue) {\n      var text = normalize(rawValue);\n      if (!text) return 'Not confirmed';\n      if (text === 'true' || text === 'yes' || text === '1') return 'Yes';\n      if (text === 'false' || text === 'no' || text === '0') return 'No';\n      return toText(rawValue);\n    };\n\n    var appendPhotoIcon = function (inline, rawUrls) {\n      if (!rawUrls || !rawUrls.length) return;\n      var urls = uniq(rawUrls);\n      var count = urls.length;\n      var fieldKey = encodeFileField(urls);\n      if (!count || !fieldKey) return;\n      var photoItem = document.createElement('span');\n      photoItem.className = 'ck-inline-item';\n      var button = document.createElement('button');\n      button.type = 'button';\n      button.className = 'ck-file-icon';\n      button.setAttribute('data-ck-file-field', fieldKey);\n      button.setAttribute('data-ck-file-count', count.toString());\n      button.appendChild(document.createTextNode('📷'));\n      var badge = document.createElement('span');\n      badge.className = 'ck-file-icon__badge';\n      badge.textContent = count.toString();\n      button.appendChild(badge);\n      photoItem.appendChild(button);\n      inline.appendChild(photoItem);\n    };\n\n    var appendMealEvidence = function (mealBlock, coreTempLabel, coreTempValue, photoUrls) {\n      var label = toText(coreTempLabel);\n      var value = toText(coreTempValue);\n      var hasValue = label || value;\n      var hasPhotos = photoUrls && photoUrls.length;\n      if (!hasValue && !hasPhotos) return;\n\n      var inline = document.createElement('div');\n      inline.className = 'ck-inline';\n\n      if (hasValue) {\n        var tempItem = document.createElement('span');\n        tempItem.className = 'ck-inline-item';\n        tempItem.textContent = (label ? label + ': ' : '') + formatConfirmation(value);\n        inline.appendChild(tempItem);\n      }\n\n      appendPhotoIcon(inline, photoUrls || []);\n\n      if (!inline.children.length) return;\n      var details = document.createElement('div');\n      details.className = 'ck-prep-details';\n      details.appendChild(inline);\n      mealBlock.appendChild(details);\n    };\n\n    var appendDetailLine = function (container, data) {\n      var inline = document.createElement('div');\n      inline.className = 'ck-inline';\n\n      var addTextItem = function (text) {\n        if (!text) return;\n        var item = document.createElement('span');\n        item.className = 'ck-inline-item';\n        item.textContent = text;\n        inline.appendChild(item);\n      };\n\n      if (data.ingredientsText) {\n        addTextItem(data.ingredientsText);\n      }\n      if (data.allergensText) {\n        addTextItem('Allergens: ' + data.allergensText);\n      }\n\n      if (!inline.children.length) return;\n      var details = document.createElement('div');\n      details.className = 'ck-prep-details';\n      details.appendChild(inline);\n      container.appendChild(details);\n    };\n\n    var appendPrepGroup = function (mealBlock, lineText, detailData) {\n      var group = document.createElement('div');\n      group.className = 'ck-prep-group';\n      var line = document.createElement('div');\n      line.className = 'ck-prep-line';\n      line.textContent = lineText;\n      group.appendChild(line);\n      if (detailData) {\n        appendDetailLine(group, detailData);\n      }\n      mealBlock.appendChild(group);\n    };\n\n    listContainer.textContent = '';\n\n    groups.forEach(function (group) {\n      if (!group.entries.length) return;\n      var mealType = '';\n      var requested = '';\n      var toCook = '';\n      var coreTemp = '';\n      var coreTempLabel = '';\n      var tempPhotoUrls = [];\n\n      for (var i = 0; i < group.entries.length; i += 1) {\n        var entry = group.entries[i];\n        if (!mealType) mealType = entry.mealType;\n        if (!requested) requested = entry.ordQty;\n        if (!toCook) toCook = entry.toCook;\n        if (!coreTemp) coreTemp = entry.coreTemp;\n        if (!coreTempLabel) coreTempLabel = entry.coreTempLabel;\n        if (!tempPhotoUrls.length && entry.tempPhotoUrls && entry.tempPhotoUrls.length) {\n          tempPhotoUrls = entry.tempPhotoUrls.slice();\n        }\n      }\n\n      var cookEntries = group.entries.filter(function (entry) {\n        return normalize(entry.prepType) === 'cook';\n      });\n      var leftoverFullEntries = group.entries.filter(function (entry) {\n        return normalize(entry.prepType) === 'entire dish';\n      });\n      var leftoverPartEntries = group.entries.filter(function (entry) {\n        return normalize(entry.prepType) === 'part dish';\n      });\n\n      var cookEntry = cookEntries.length ? cookEntries[0] : null;\n\n      var mealBlock = document.createElement('div');\n      mealBlock.className = 'ck-meal-block';\n\n      var title = document.createElement('div');\n      title.className = 'ck-meal-title';\n      var titleText = mealType || 'Meal';\n      var requestedText = toText(requested) ? formatPortions(requested, '') : '';\n      if (requestedText) {\n        titleText += ' | Ordered: ' + requestedText;\n      }\n      title.textContent = titleText;\n      mealBlock.appendChild(title);\n      appendMealEvidence(mealBlock, coreTempLabel, coreTemp, tempPhotoUrls);\n\n      var cookedIngredients = cookEntry ? cookEntry.ingredients.slice() : [];\n      var cookedAllergens = cookEntry ? cookEntry.allergens.slice() : [];\n\n      leftoverFullEntries.forEach(function (entry) {\n        var qty = parseNumber(entry.prepQty);\n        var qtyValue = Number.isNaN(qty) ? 0 : qty;\n        var leftoverFullLine = 'Leftover: ' + formatPortions(entry.prepQty, '0');\n        if (entry.recipe) {\n          leftoverFullLine += ' | ' + entry.recipe;\n        }\n        var showLeftoverFullDetails = qtyValue > 0;\n        if (showLeftoverFullDetails) {\n          appendPrepGroup(mealBlock, leftoverFullLine, {\n            ingredientsText: formatList(entry.ingredients, 'None'),\n            allergensText: formatList(entry.allergens, 'None')\n          });\n        } else {\n          appendPrepGroup(mealBlock, leftoverFullLine, null);\n          cookedIngredients = cookedIngredients.concat(entry.ingredients);\n          cookedAllergens = cookedAllergens.concat(entry.allergens);\n        }\n      });\n\n      leftoverPartEntries.forEach(function (entry) {\n        var leftoverPartLine = 'Leftover part dish';\n        if (entry.recipe) {\n          leftoverPartLine += ': ' + entry.recipe;\n        }\n        appendPrepGroup(mealBlock, leftoverPartLine, null);\n        cookedIngredients = cookedIngredients.concat(entry.ingredients);\n        cookedAllergens = cookedAllergens.concat(entry.allergens);\n      });\n\n      var cookedMention = foodSafetyComplete ? 'Cooked' : 'To cook';\n      var cookedLine = cookedMention + ': ' + formatPortions(toCook, requested);\n      var cookedRecipe = cookEntry ? cookEntry.recipe : '';\n      if (!cookedRecipe) cookedRecipe = 'Recipe not set';\n      cookedLine += ' | ' + cookedRecipe;\n\n      appendPrepGroup(mealBlock, cookedLine, {\n        ingredientsText: formatList(cookedIngredients, 'None'),\n        allergensText: formatList(cookedAllergens, 'None')\n      });\n\n      listContainer.appendChild(mealBlock);\n    });\n\n    dataTables.forEach(function (table) {\n      table.remove();\n    });\n  })();\n</script>\n",
  "mp.ing_recipe.html": "<!--\n  Community Kitchen - Recipe Detail (Overlay HTML Template)\n\n  - Keep placeholders intact (e.g., {{FIELD_ID}}).\n  - Designed for in-app overlay detail view; minimal styles + tabs.\n-->\n\n<style>\n  .ck-summary-template {\n    font-family: var(--ck-font-family, system-ui);\n    font-size: var(--ck-font-control, 1rem);\n    line-height: 1.4;\n    margin: 0;\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    font-weight: 400;\n  }\n\n  .ck-tabs {\n    margin-top: 4px;\n  }\n\n  .ck-tab-list {\n    display: flex;\n    gap: 0;\n    margin: 0 0 12px 0;\n    padding: 0 0 6px 0;\n    border-bottom: 1px solid var(--border);\n    width: 100%;\n  }\n\n  .ck-tab {\n    flex: 1 1 0;\n    border: 0;\n    background: none;\n    padding: 6px 0;\n    font: inherit;\n    color: inherit;\n    cursor: pointer;\n    text-align: center;\n  }\n\n  .ck-tab.is-active {\n    font-weight: 600;\n    border-bottom: 2px solid currentColor;\n  }\n\n  .ck-tab-panel {\n    display: none;\n  }\n\n  .ck-tab-panel.is-active {\n    display: block;\n  }\n\n  .ck-panel-actions {\n    display: flex;\n    justify-content: flex-end;\n    margin-bottom: 8px;\n  }\n\n  .ck-panel-action {\n    border: 1px solid var(--accent);\n    background: var(--accent);\n    padding: 6px 12px;\n    border-radius: var(--radius-control, 8px);\n    font: inherit;\n    font-weight: 600;\n    color: var(--accentText);\n    cursor: pointer;\n    white-space: nowrap;\n  }\n\n  .ck-ingredients-table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: auto;\n  }\n\n  .ck-ingredients-table col.ck-col-name {\n    width: auto;\n  }\n\n  .ck-ingredients-table col.ck-col-qty {\n    width: 10ch;\n  }\n\n  .ck-ingredients-table th,\n  .ck-ingredients-table td {\n    text-align: left;\n    padding: 6px 0;\n    vertical-align: top;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-category-row th {\n    font-size: var(--ck-font-label, 0.95rem);\n    font-weight: 600;\n    padding-top: 12px;\n  }\n\n  .ck-ingredient-row td {\n    border-bottom: 1px solid var(--border);\n  }\n\n  .ck-ingredient-name {\n    min-width: 0;\n  }\n\n  .ck-ingredient-qty {\n    white-space: nowrap;\n    text-align: right;\n    font-weight: 500;\n    padding-left: 12px;\n    min-width: 8ch;\n  }\n\n  .ck-ingredient-allergen {\n    opacity: 0.75;\n  }\n\n  .ck-ingredient-allergen:empty {\n    display: none;\n  }\n\n  .ck-ingredient-allergen:not(:empty)::before {\n    content: \" (\";\n  }\n\n  .ck-ingredient-allergen:not(:empty)::after {\n    content: \")\";\n  }\n\n  .ck-instructions {\n    white-space: pre-wrap;\n  }\n</style>\n\n<div class=\"ck-summary-template\" data-ck-template=\"mp.ing_recipe\">\n  <div class=\"ck-tabs\" data-ck-tabs>\n    <div class=\"ck-tab-list\" role=\"tablist\" aria-label=\"Recipe details\">\n      <button\n        class=\"ck-tab is-active\"\n        type=\"button\"\n        role=\"tab\"\n        aria-selected=\"true\"\n        aria-controls=\"ck-tab-ingredients\"\n        id=\"ck-tab-btn-ingredients\"\n        data-tab-target=\"ingredients\"\n      >\n        Ingredients\n      </button>\n      <button\n        class=\"ck-tab\"\n        type=\"button\"\n        role=\"tab\"\n        aria-selected=\"false\"\n        aria-controls=\"ck-tab-instructions\"\n        id=\"ck-tab-btn-instructions\"\n        data-tab-target=\"instructions\"\n      >\n        Instructions\n      </button>\n    </div>\n\n    <div\n      class=\"ck-tab-panel is-active\"\n      role=\"tabpanel\"\n      aria-labelledby=\"ck-tab-btn-ingredients\"\n      id=\"ck-tab-ingredients\"\n      data-tab-panel=\"ingredients\"\n    >\n      <div class=\"ck-panel-actions\">\n        <button class=\"ck-panel-action\" type=\"button\" data-ck-action=\"edit\" aria-label=\"Edit ingredients\">\n          Edit ingredients\n        </button>\n      </div>\n\n      <table class=\"ck-ingredients-table\" aria-label=\"Ingredients by category\">\n        <colgroup>\n          <col class=\"ck-col-name\" />\n          <col class=\"ck-col-qty\" />\n        </colgroup>\n        <tbody>\n          <tr class=\"ck-category-row\">\n            <th scope=\"row\" colspan=\"2\">\n              {{GROUP_TABLE(MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.CAT)}}{{ORDER_BY(MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.CAT ASC, MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ING ASC)}}\n            </th>\n          </tr>\n          <tr class=\"ck-ingredient-row\">\n            <td class=\"ck-ingredient-name\">\n              {{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ING}}\n              <span class=\"ck-ingredient-allergen\">{{DEFAULT(MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.ALLERGEN, \"\")}}</span>\n            </td>\n            <td class=\"ck-ingredient-qty\">\n              {{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.QTY}} {{MP_MEALS_REQUEST.MP_TYPE_LI.MP_INGREDIENTS_LI.UNIT}}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div\n      class=\"ck-tab-panel\"\n      role=\"tabpanel\"\n      aria-labelledby=\"ck-tab-btn-instructions\"\n      id=\"ck-tab-instructions\"\n      data-tab-panel=\"instructions\"\n      hidden\n    >\n      <div class=\"ck-instructions\">{{DEFAULT(MP_MEALS_REQUEST.MP_TYPE_LI.RECIPE.REC_INST, \"No instructions provided.\")}}</div>\n    </div>\n  </div>\n</div>\n\n<script>\n  (function () {\n    var root = document.querySelector('[data-ck-template=\"mp.ing_recipe\"]');\n    if (!root || root.getAttribute('data-ck-init') === '1') return;\n    root.setAttribute('data-ck-init', '1');\n\n    var allergens = root.querySelectorAll('.ck-ingredient-allergen');\n    Array.prototype.forEach.call(allergens, function (node) {\n      var raw = (node.textContent || '').toString().trim();\n      if (!raw || raw.toLowerCase() === 'none') {\n        node.textContent = '';\n        return;\n      }\n      node.textContent = raw;\n    });\n\n    var tabs = root.querySelectorAll('[data-tab-target]');\n    var panels = root.querySelectorAll('[data-tab-panel]');\n    var activate = function (target) {\n      tabs.forEach(function (tab) {\n        var active = tab.getAttribute('data-tab-target') === target;\n        tab.classList.toggle('is-active', active);\n        tab.setAttribute('aria-selected', active ? 'true' : 'false');\n      });\n      panels.forEach(function (panel) {\n        var active = panel.getAttribute('data-tab-panel') === target;\n        panel.classList.toggle('is-active', active);\n        panel.hidden = !active;\n      });\n    };\n    tabs.forEach(function (tab) {\n      tab.addEventListener('click', function () {\n        activate(tab.getAttribute('data-tab-target'));\n      });\n    });\n  })();\n</script>\n",
  "procedure_cleaning_disinfection.html": "<!--\n  Community Kitchen – Cleaning & Disinfection Procedure (HTML Template)\n\n  Notes:\n  - This template is designed to be injected into the CK web app HTML preview overlay (not a standalone web page).\n  - Keep CSS scoped under `.ck-procedure-template` to avoid leaking styles into the host app.\n  - Keep formatting sober and mobile-friendly (no tables, colors, or cards).\n-->\n\n<style>\n  .ck-procedure-template {\n    /* Inherit app typography; keep styles scoped to avoid affecting the host app */\n    font-size: var(--ck-font-label);\n    line-height: 1.5;\n    margin: -8px;\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n  }\n\n  .ck-procedure-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-procedure-page {\n    max-width: 980px;\n    margin: 0 auto;\n    padding: 16px 12px 28px;\n  }\n\n  .ck-procedure-template h1 {\n    font-size: var(--ck-font-group-title);\n    margin: 0 0 0.5em;\n    font-weight: 600;\n    line-height: 1.2;\n  }\n\n  .ck-procedure-template h2 {\n    font-size: var(--ck-font-control);\n    margin: 1.25em 0 0.5em;\n    font-weight: 600;\n    line-height: 1.25;\n  }\n\n  .ck-procedure-template h3 {\n    font-size: var(--ck-font-label);\n    margin: 0.9em 0 0.35em;\n    font-weight: 600;\n    line-height: 1.3;\n  }\n\n  .ck-procedure-template p {\n    margin: 0.5em 0;\n  }\n\n  .ck-procedure-template section {\n    margin: 0 0 1em;\n  }\n\n  .ck-procedure-template blockquote.ck-procedure-important {\n    margin: 0 0 1em;\n    padding: 0.25em 0 0.25em 1em;\n    border-left: 3px solid currentColor;\n    font-style: normal;\n  }\n\n  .ck-procedure-template blockquote.ck-procedure-important h2 {\n    margin-top: 0;\n    text-transform: none;\n  }\n\n  .ck-procedure-template ul {\n    margin: 0.5em 0 0.5em 1.2em;\n    padding: 0;\n  }\n\n  .ck-procedure-template ol {\n    margin: 0.5em 0 0.5em 1.2em;\n    padding: 0;\n  }\n\n  .ck-procedure-template li {\n    margin: 0.35em 0;\n  }\n</style>\n\n<div class=\"ck-procedure-template\">\n  <main class=\"ck-procedure-page\">\n    <header>\n      <p>This procedure must be read by all employees of the Community Kitchen. It must be made available to volunteers involved in cleaning activities.</p>\n    </header>\n\n    <section>\n      <h2>Responsibility</h2>\n      <ul>\n        <li><strong>Cooks</strong> are responsible. Volunteers may help under supervision.</li>\n        <li>Third party service providers may participate in some specific activities.</li>\n        <li><strong>Kitchen Manager</strong> provides daily oversight.</li>\n        <li><strong>Operations Manager</strong> holds overall accountability.</li>\n      </ul>\n    </section>\n\n    <blockquote class=\"ck-procedure-important\">\n      <h2>Important</h2>\n      <ul>\n        <li>Daily, weekly and monthly cleaning activities must be recorded in the <strong>Storage and Cleaning Checks</strong> app.</li>\n        <li>Daily cleaning is done after each shift, AM and PM.</li>\n        <li>Weekly and monthly cleaning follow the Cleaning Schedule. Any change to the person responsible for weekly or monthly cleaning must be requested and approved by the Kitchen Manager or Operations Manager.</li>\n        <li>If a cleaning activity could not be completed, inform the next shift and the Kitchen Manager or Operations Manager.</li>\n        <li>Immediately inform Kitchen Manager or Operations Manager when cleaning products, bin bags, tissues are running low and/or cleaning cloth or equipment needs to be repaired/replaced.</li>\n        <li>Any issue → record in the app and inform Kitchen Manager or Operations Manager immediately.</li>\n      </ul>\n    </blockquote>\n\n    <section>\n      <h2>General rules</h2>\n\n      <h3>Do</h3>\n      <ul>\n        <li>Wash hands before &amp; after cleaning.</li>\n        <li>Use only food-safe detergent / degreaser / disinfectant products.</li>\n        <li>Use clean water.</li>\n        <li>Respect product dosage and contact time.</li>\n        <li>Clean food areas first, floors &amp; bins last.</li>\n        <li>Clean → disinfect → rinse (if required).</li>\n        <li>Clean spills immediately.</li>\n        <li>Leave surfaces clean &amp; dry.</li>\n        <li>Wash dirty cloths, aprons and hats regularly.</li>\n      </ul>\n\n      <h3>Do not</h3>\n      <ul>\n        <li>Do not clean floors or bins before worktops.</li>\n        <li>Do not use non food-safe, personal, home-made or industrial products.</li>\n        <li>Do not reuse the same cloth for tables and floors.</li>\n        <li>Do not use dirty cloths, aprons or hats.</li>\n        <li>Do not leave cleaning products on worktops, portioning tables, near food/stove/utensils/fresh vegetables/dry goods.</li>\n      </ul>\n    </section>\n\n    <section>\n      <h2>Daily AM &amp; PM shift</h2>\n\n      <h3>Do</h3>\n      <ul>\n        <li>Wash all used utensils &amp; containers (pots, pans, lids, boards, dish boxes, buckets, oven trays, rice cooker bowls).</li>\n        <li>Clean rice cooker exterior if splashed.</li>\n        <li>Cool leftovers → seal → label → fridge/freezer.</li>\n        <li>Remove expired or moldy products.</li>\n        <li>Check for signs of pests (insects, rodents).</li>\n        <li>Clean &amp; disinfect tables, sinks, stove, splashbacks.</li>\n        <li>Empty &amp; clean dishwasher.</li>\n        <li>Sweep &amp; mop floors.</li>\n        <li>Keep brooms clean.</li>\n        <li>Empty and clean mop buckets.</li>\n        <li>Keep cleaning room tidy.</li>\n        <li>Discard damaged equipment.</li>\n        <li>Empty and clean bins.</li>\n        <li>Replace bin liners.</li>\n        <li>Keep work clothes in designated closet.</li>\n        <li>Wash dirty cloths, aprons and hats used during shift.</li>\n        <li>Keep cleaning products in cleaning cupboard.</li>\n      </ul>\n\n      <h3>Do not</h3>\n      <ul>\n        <li>Do not assume previous shift cleaned enough.</li>\n        <li>Do not leave dirty equipment and cloths overnight.</li>\n        <li>Do not leave leftovers in the oven or anywhere in the kitchen.</li>\n        <li>Do not skip cleaning activities or pest checks at end of shift.</li>\n        <li>Do not leave bin without new bin bags.</li>\n      </ul>\n    </section>\n\n    <section>\n      <h2>Weekly</h2>\n\n      <h3>Do</h3>\n      <ul>\n        <li>Deep clean plastic boards.</li>\n        <li>Clean fridge/freezer shelves &amp; handles.</li>\n        <li>Clean cupboards, doors, switches.</li>\n        <li>Deep clean ovens.</li>\n        <li>Clean exhaust hood filters and accessible surfaces.</li>\n        <li>Check pest monitoring points or traps if present.</li>\n      </ul>\n\n      <h3>Do not</h3>\n      <ul>\n        <li>Do not ignore damaged boards.</li>\n        <li>Do not ignore dirt or grease buildup.</li>\n        <li>Do not ignore pest signs or traps.</li>\n      </ul>\n    </section>\n\n    <section>\n      <h2>Monthly</h2>\n\n      <h3>Do</h3>\n      <ul>\n        <li>Defrost &amp; deep clean freezers.</li>\n        <li>Clean pantry shelves.</li>\n        <li>Discard damaged boards.</li>\n        <li>Descale dishwasher.</li>\n        <li>Deep clean exhaust hood (including hard-to-reach areas).</li>\n      </ul>\n\n      <h3>Do not</h3>\n      <ul>\n        <li>Do not wait for heavy ice buildup.</li>\n        <li>Do not allow grease buildup in exhaust hood.</li>\n      </ul>\n    </section>\n  </main>\n</div>\n",
  "procedure_meal_production.html": "<!--\n  Community Kitchen – Meal Production Procedure (HTML Template)\n\n  Notes:\n  - This template is designed to be injected into the CK web app HTML preview overlay (not a standalone web page).\n  - Keep CSS scoped under `.ck-procedure-template` to avoid leaking styles into the host app.\n-->\n\n<style>\n  .ck-procedure-template {\n    /* Inherit app typography; keep styles scoped to avoid affecting the host app */\n    color: var(--text);\n    font-size: var(--ck-font-label);\n    margin: -8px;\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n    --ck-proc-muted: var(--muted);\n    --ck-proc-border: var(--border);\n  }\n\n  .ck-procedure-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-procedure-page {\n    max-width: 1100px;\n    margin: 0 auto;\n    padding: 18px 14px 32px;\n  }\n\n  .ck-procedure-template h1 {\n    font-size: var(--ck-font-group-title);\n    margin: 0 0 0.25em;\n    font-weight: 600;\n    letter-spacing: 0;\n  }\n\n  .ck-procedure-template h2 {\n    font-size: var(--ck-font-control);\n    margin: 1.35em 0 0.6em;\n    font-weight: 600;\n  }\n\n  .ck-procedure-template h3 {\n    font-size: var(--ck-font-label);\n    margin: 1.05em 0 0.55em;\n    color: var(--ck-proc-muted);\n    text-transform: none;\n    letter-spacing: 0;\n    font-weight: 600;\n  }\n\n  .ck-procedure-template p {\n    margin: 0.55em 0;\n    line-height: 1.45;\n  }\n\n  .ck-procedure-template ul {\n    margin: 0.55em 0 0 1.1em;\n  }\n\n  .ck-procedure-template li {\n    margin: 0.35em 0;\n    line-height: 1.35;\n  }\n\n  .ck-procedure-meta {\n    color: var(--ck-proc-muted);\n    margin-bottom: 14px;\n    font-weight: 600;\n  }\n\n  .ck-procedure-card {\n    border: none;\n    border-radius: 0;\n    padding: 14px;\n    background: transparent;\n  }\n\n  .ck-procedure-grid2 {\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 12px;\n  }\n\n  @media (min-width: 900px) {\n    .ck-procedure-grid2 {\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  .ck-procedure-template table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 10px;\n  }\n\n  .ck-procedure-template th,\n  .ck-procedure-template td {\n    border: 1px solid var(--ck-proc-border);\n    padding: 10px 12px;\n    vertical-align: top;\n    overflow-wrap: anywhere;\n    word-break: break-word;\n  }\n\n  .ck-procedure-template th {\n    background: transparent;\n    text-align: left;\n  }\n\n  /* Process-flow layout: replace the 4-column table with a readable step-by-step card grid. */\n  .ck-procedure-template .ck-procedure-flow {\n    display: flex;\n    flex-direction: column;\n    gap: 14px;\n    margin-top: 12px;\n  }\n\n  .ck-procedure-template .ck-procedure-step {\n    border: none;\n    border-radius: 0;\n    overflow: visible;\n    background: transparent;\n    box-shadow: none;\n  }\n\n  .ck-procedure-template .ck-procedure-step-head {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 14px 14px;\n    background: transparent;\n    border-bottom: 1px solid var(--ck-proc-border);\n  }\n\n  .ck-procedure-template .ck-procedure-step-num {\n    width: 42px;\n    height: 42px;\n    border-radius: 999px;\n    background: transparent;\n    color: var(--text);\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: 600;\n    letter-spacing: 0;\n    flex: 0 0 auto;\n  }\n\n  .ck-procedure-template .ck-procedure-step-title {\n    font-size: var(--ck-font-control);\n    font-weight: 600;\n    letter-spacing: 0;\n    margin: 0;\n  }\n\n  .ck-procedure-template .ck-procedure-step-grid {\n    display: grid;\n    grid-template-columns: 1fr;\n  }\n\n  @media (min-width: 900px) {\n    .ck-procedure-template .ck-procedure-step-grid {\n      grid-template-columns: 1fr 1fr 1fr;\n    }\n  }\n\n  .ck-procedure-template .ck-procedure-role {\n    padding: 14px 14px 16px;\n    border-top: 1px solid var(--ck-proc-border);\n  }\n\n  @media (min-width: 900px) {\n    .ck-procedure-template .ck-procedure-role {\n      border-top: 0;\n      border-left: 1px solid var(--ck-proc-border);\n    }\n    .ck-procedure-template .ck-procedure-role:first-child {\n      border-left: 0;\n    }\n  }\n\n  .ck-procedure-template .ck-procedure-role-title {\n    font-size: calc(var(--ck-font-label) * 0.85);\n    text-transform: none;\n    letter-spacing: 0;\n    color: var(--ck-proc-muted);\n    font-weight: 600;\n    margin: 0 0 8px;\n  }\n\n  .ck-procedure-template .ck-procedure-role ul {\n    margin: 0.35em 0 0;\n    padding: 0;\n    list-style: none;\n  }\n\n  .ck-procedure-template .ck-procedure-role li {\n    margin: 0.28em 0;\n    line-height: 1.35;\n    padding-left: 1.05em;\n    position: relative;\n  }\n\n  .ck-procedure-template .ck-procedure-role li::before {\n    content: '•';\n    position: absolute;\n    left: 0;\n    top: 0;\n    color: var(--ck-proc-muted);\n    font-weight: 600;\n  }\n\n  .ck-procedure-template .ck-procedure-role .ck-procedure-small {\n    margin-top: 0.55em;\n  }\n\n  .ck-procedure-small {\n    font-size: calc(var(--ck-font-label) * 0.85);\n    color: var(--ck-proc-muted);\n    font-weight: 500;\n  }\n\n  .ck-procedure-template code {\n    font-family: inherit;\n  }\n</style>\n\n<div class=\"ck-procedure-template\">\n  <main class=\"ck-procedure-page\">\n    <section>\n      <h2>Purpose and scope</h2>\n      <p>This procedure defines how meals are planned, produced, portioned, handed over and recorded. It must be read by all employees of the Community Kitchen and is available to volunteers for information.</p>\n    </section>\n\n    <section>\n      <h2>Responsibilities</h2>\n      <p>Cooks are responsible for executing meal production and for the accuracy of production data. Volunteers may assist with cutting vegetables, cooking, portioning, replenishing and cleaning, only under supervision and strictly following written recipes and instructions. Responsibility always remains with cooks. The Kitchen Manager provides operational oversight and validation. The Operations Manager holds overall accountability.</p>\n    </section>\n\n    <section>\n      <h2>Important to know</h2>\n      <ul>\n        <li>Only written and approved recipes recorded in the system may be used.</li>\n        <li>New recipes or recipe updates must be created or updated using the Recipe Form App by the Kitchen Manager or Operations Manager before they can be used in production.</li>\n        <li>Each production for a given customer, date and dietary category must be fully traceable to:\n          <ul>\n            <li>a cook responsible for the production,</li>\n            <li>a specific recipe with the actual list of ingredients and quantities used,</li>\n            <li>declared allergens,</li>\n            <li>recorded core temperature prior to portioning,</li>\n            <li>a system-generated batch number.</li>\n          </ul>\n        </li>\n        <li>All the above information must appear on the production report.</li>\n        <li>If the Meal Production App is not available, the production report must be created manually and the customer must be notified.</li>\n        <li>Selected recipes, ingredients and quantities must be followed unless ingredients are unavailable and substitutions are recorded.</li>\n        <li>Production must deliver exactly the number of portions requested per dietary category.</li>\n        <li>Avoid food waste and unnecessary leftovers; use leftovers first when suitable.</li>\n        <li>Apply the First In, First Out (FIFO) principle for ingredients and leftovers.</li>\n        <li>Volunteers are never autonomous; tasks must be demonstrated and supervised.</li>\n        <li>Separate utensils must be used for each dietary pot to prevent cross-contamination.</li>\n        <li>Production is complete only when all requested portions are delivered and the production report is sent.</li>\n      </ul>\n    </section>\n\n    <section>\n      <h2>Meal production – process flow</h2>\n      <div class=\"ck-procedure-flow\" aria-label=\"Meal production process flow\">\n        <div class=\"ck-procedure-step\">\n          <div class=\"ck-procedure-step-head\">\n            <div class=\"ck-procedure-step-num\">1</div>\n            <div class=\"ck-procedure-step-title\">Before production</div>\n          </div>\n          <div class=\"ck-procedure-step-grid\">\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Kitchen Manager / Operations Manager</div>\n              <ul>\n                <li>Record requested portions per customer, date and dietary category.</li>\n                <li>Validate availability of approved recipes.</li>\n                <li>Create or update recipes using the Recipe Form App when needed.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">App used: Meal Production App (planning) / Recipe Form App (recipes)</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Cook</div>\n              <ul>\n                <li>Assess ingredient availability.</li>\n                <li>Propose substitutions if needed and record them.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">App used: Meal Production App</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Volunteer (assist)</div>\n              <ul>\n                <li>Cut fresh vegetables following instructions.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"ck-procedure-step\">\n          <div class=\"ck-procedure-step-head\">\n            <div class=\"ck-procedure-step-num\">2</div>\n            <div class=\"ck-procedure-step-title\">Cooking</div>\n          </div>\n          <div class=\"ck-procedure-step-grid\">\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Kitchen Manager / Operations Manager</div>\n              <ul>\n                <li>Provide operational support if needed.</li>\n                <li>Ensure only approved recipes are used.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Cook</div>\n              <ul>\n                <li>Cook according to written recipes.</li>\n                <li>Supervise volunteers.</li>\n                <li>Record core temperature (photo) before portioning.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">App used: Meal Production App</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Volunteer (assist)</div>\n              <ul>\n                <li>Assist with cooking under supervision and following written recipes.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"ck-procedure-step\">\n          <div class=\"ck-procedure-step-head\">\n            <div class=\"ck-procedure-step-num\">3</div>\n            <div class=\"ck-procedure-step-title\">Portioning</div>\n          </div>\n          <div class=\"ck-procedure-step-grid\">\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Kitchen Manager / Operations Manager</div>\n              <ul>\n                <li>Be available for escalation or support.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Cook</div>\n              <ul>\n                <li>Prepare containers, labels and utensils.</li>\n                <li>Portion per customer and dietary category.</li>\n                <li>Record exact number of portions.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">App used: Meal Production App</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Volunteer (assist)</div>\n              <ul>\n                <li>Assist with portioning after demonstration.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"ck-procedure-step\">\n          <div class=\"ck-procedure-step-head\">\n            <div class=\"ck-procedure-step-num\">4</div>\n            <div class=\"ck-procedure-step-title\">Handling leftovers</div>\n          </div>\n          <div class=\"ck-procedure-step-grid\">\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Kitchen Manager / Operations Manager</div>\n              <ul>\n                <li>Validate reuse or discard decisions if needed.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Cook</div>\n              <ul>\n                <li>Label and date leftovers.</li>\n                <li>Store according to Storage Procedure.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Volunteer (assist)</div>\n              <ul>\n                <li>Assist with leftovers handling under supervision.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"ck-procedure-step\">\n          <div class=\"ck-procedure-step-head\">\n            <div class=\"ck-procedure-step-num\">5</div>\n            <div class=\"ck-procedure-step-title\">Handover to customer</div>\n          </div>\n          <div class=\"ck-procedure-step-grid\">\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Kitchen Manager / Operations Manager</div>\n              <ul>\n                <li>Be available for issue resolution.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Cook</div>\n              <ul>\n                <li>Deliver meals to drivers.</li>\n                <li>Verify completeness.</li>\n                <li>Send production report with batch number.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">App used: Meal Production App</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Volunteer (assist)</div>\n              <p class=\"ck-procedure-small\">—</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"ck-procedure-step\">\n          <div class=\"ck-procedure-step-head\">\n            <div class=\"ck-procedure-step-num\">6</div>\n            <div class=\"ck-procedure-step-title\">Replenish for next shift</div>\n          </div>\n          <div class=\"ck-procedure-step-grid\">\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Kitchen Manager / Operations Manager</div>\n              <ul>\n                <li>Be notified if ingredients are missing or about to run out.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Cook</div>\n              <ul>\n                <li>Replenish cut vegetables, spices and oil.</li>\n                <li>Notify Kitchen Manager or Operations Manager if ingredients are missing or about to run out.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Volunteer (assist)</div>\n              <ul>\n                <li>Assist with replenishing under instructions.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"ck-procedure-step\">\n          <div class=\"ck-procedure-step-head\">\n            <div class=\"ck-procedure-step-num\">7</div>\n            <div class=\"ck-procedure-step-title\">Cleaning</div>\n          </div>\n          <div class=\"ck-procedure-step-grid\">\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Kitchen Manager / Operations Manager</div>\n              <ul>\n                <li>Ensure cleaning is completed and recorded.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">No app used</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Cook</div>\n              <ul>\n                <li>Clean kitchen, utensils and equipment.</li>\n                <li>Record cleaning checks.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">App used: Storage &amp; Cleaning Checks App</p>\n            </div>\n            <div class=\"ck-procedure-role\">\n              <div class=\"ck-procedure-role-title\">Volunteer (assist)</div>\n              <ul>\n                <li>Assist with cleaning under supervision.</li>\n              </ul>\n              <p class=\"ck-procedure-small\">App used: Storage &amp; Cleaning Checks App</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section>\n      <h2>Do / Do not</h2>\n      <div class=\"ck-procedure-grid2\">\n        <div class=\"ck-procedure-card\">\n          <h3>Do</h3>\n          <ul>\n            <li>Wash hands regularly with soap and before/after using phones or tablets.</li>\n            <li>Use designated handwash sinks for handwashing only.</li>\n            <li>Wear clean apron, head covering and clean shoes.</li>\n            <li>Minimise time food stays at room temperature.</li>\n            <li>Report illness immediately before handling food.</li>\n            <li>Report any signs of pests immediately.</li>\n            <li>Ensure production data is complete and traceable, including batch number.</li>\n            <li>Create a manual production report if the Meal Production App is unavailable and notify the customer.</li>\n          </ul>\n        </div>\n        <div class=\"ck-procedure-card\">\n          <h3>Do not</h3>\n          <ul>\n            <li>Use recipes that are not recorded and approved in the system.</li>\n            <li>Allow volunteers to work without supervision.</li>\n            <li>Use same utensils for different dietary pots.</li>\n            <li>Eat in kitchen or portioning area.</li>\n            <li>Handle food when sick or with uncovered wounds.</li>\n            <li>Wear jewellery while handling food.</li>\n            <li>Leave food at room temperature unnecessarily.</li>\n            <li>Leave production incomplete or unreported.</li>\n            <li>Leave kitchen dirty for next shift.</li>\n          </ul>\n        </div>\n      </div>\n    </section>\n  </main>\n</div>\n",
  "procedure_storage.html": "<!--\n  Community Kitchen – Storage Procedure (HTML Template)\n\n  Notes:\n  - This template is designed to be injected into the CK web app HTML preview overlay (not a standalone web page).\n  - Keep CSS scoped under `.ck-procedure-template` to avoid leaking styles into the host app.\n  - Keep formatting sober and mobile-friendly (no tables, colors, or cards).\n-->\n\n<style>\n  .ck-procedure-template {\n    /* Inherit app typography; keep styles scoped to avoid affecting the host app */\n    font-size: var(--ck-font-label);\n    line-height: 1.5;\n    margin: -8px;\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n  }\n\n  .ck-procedure-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n  }\n\n  .ck-procedure-page {\n    max-width: 980px;\n    margin: 0 auto;\n    padding: 16px 12px 28px;\n  }\n\n  .ck-procedure-template h1 {\n    font-size: var(--ck-font-group-title);\n    margin: 0 0 0.5em;\n    font-weight: 600;\n    line-height: 1.2;\n  }\n\n  .ck-procedure-template h2 {\n    font-size: var(--ck-font-control);\n    margin: 1.25em 0 0.5em;\n    font-weight: 600;\n    line-height: 1.25;\n  }\n\n  .ck-procedure-template h3 {\n    font-size: var(--ck-font-label);\n    margin: 0.9em 0 0.35em;\n    font-weight: 600;\n    line-height: 1.3;\n  }\n\n  .ck-procedure-template p {\n    margin: 0.5em 0;\n  }\n\n  .ck-procedure-template section {\n    margin: 0 0 1em;\n  }\n\n  .ck-procedure-template blockquote.ck-procedure-important {\n    margin: 0 0 1em;\n    padding: 0.25em 0 0.25em 1em;\n    border-left: 3px solid currentColor;\n    font-style: normal;\n  }\n\n  .ck-procedure-template blockquote.ck-procedure-important h2 {\n    margin-top: 0;\n    text-transform: none;\n  }\n\n  .ck-procedure-template ul {\n    margin: 0.5em 0 0.5em 1.2em;\n    padding: 0;\n  }\n\n  .ck-procedure-template ol {\n    margin: 0.5em 0 0.5em 1.2em;\n    padding: 0;\n  }\n\n  .ck-procedure-template li {\n    margin: 0.35em 0;\n  }\n</style>\n\n<div class=\"ck-procedure-template\">\n  <main class=\"ck-procedure-page\">\n    <header>\n      <p>This procedure must be read by all employees of the Community Kitchen. It must be made available to volunteers involved in cutting vegetables, meal preparation and/or receiving food deliveries for guidance.</p>\n    </header>\n\n    <section>\n      <h2>Responsibility</h2>\n      <ul>\n        <li><strong>Cooks</strong> are responsible. Volunteers may help under supervision.</li>\n        <li><strong>Kitchen Manager</strong> provides daily oversight.</li>\n        <li><strong>Operations Manager</strong> holds overall accountability.</li>\n      </ul>\n    </section>\n\n    <blockquote class=\"ck-procedure-important\">\n      <h2>Important</h2>\n\n      <h3>1. General rules</h3>\n      <ul>\n        <li>All storage check activities must be performed at the beginning of AM and PM shifts and recorded in the <strong>Storage &amp; Cleaning Checks</strong> app.</li>\n        <li>Always apply <strong>First In, First Out (FIFO)</strong> for storage and utilization (older products stored in front or at the top for easy access and used first).</li>\n        <li>Immediately inform Kitchen Manager or Operations Manager when stock is running low.</li>\n        <li>Any issue → record in the app and inform Kitchen Manager or Operations Manager immediately.</li>\n      </ul>\n\n      <h3>2. Hygiene</h3>\n      <ul>\n        <li>Discard immediately: expired, undated, moldy, spoiled, pest-damaged, leaking or swollen items.</li>\n        <li>Label with sticker: leftovers, cut vegetables, opened dairy, opened jars/cans/bottles → product name + production date or opening date.</li>\n        <li>Keep shelves, seals, containers and crates clean and dry.</li>\n        <li>Check for pests (insects, droppings, gnaw marks). Any sign → record in app and inform Kitchen Manager or Operations Manager.</li>\n      </ul>\n\n      <h3>3. Temperature</h3>\n      <ul>\n        <li><strong>Fridges</strong>: 0–7 °C</li>\n        <li><strong>Freezers</strong>: ≤ –12 °C</li>\n        <li>If out of range: keep door closed, move food if needed, discard if unsure → record in app and inform Kitchen Manager or Operations Manager.</li>\n      </ul>\n    </blockquote>\n\n    <section>\n      <h2>Fridges</h2>\n\n      <h3>Allowed</h3>\n      <ul>\n        <li>Dairy products</li>\n        <li>Leftovers (sealed &amp; dated), max 48 hours</li>\n        <li>Cut vegetables (sealed &amp; dated), max 48 hours</li>\n        <li>Opened jars/bottles</li>\n        <li><strong>Eggs</strong> in original carton and stored in staff fridge only</li>\n      </ul>\n\n      <h3>Not allowed</h3>\n      <ul>\n        <li>Raw meat or raw fish</li>\n        <li>Hot or warm food</li>\n        <li>Unsealed and/or undated items</li>\n      </ul>\n    </section>\n\n    <section>\n      <h2>Freezers</h2>\n\n      <h3>Allowed</h3>\n      <ul>\n        <li>Purchased frozen vegetables</li>\n        <li>Purchased frozen animal protein</li>\n        <li>Food cooked on site and frozen by staff</li>\n        <li>Cut vegetables frozen by staff</li>\n      </ul>\n\n      <h3>Not allowed</h3>\n      <ul>\n        <li>Hot or warm food</li>\n        <li>Partially thawed food</li>\n        <li>Damaged or leaking packaging</li>\n        <li>Unsealed and/or undated items</li>\n      </ul>\n    </section>\n\n    <section>\n      <h2>Fresh vegetables areas</h2>\n\n      <h3>Allowed</h3>\n      <ul>\n        <li>Uncut in clean crates or containers or packaging</li>\n        <li>Off the floor</li>\n        <li>Kept dry</li>\n      </ul>\n\n      <h3>Not allowed</h3>\n      <ul>\n        <li>Directly on the floor</li>\n        <li>Under sinks or near cleaning products</li>\n        <li>Moldy, stale or spoiled vegetables</li>\n      </ul>\n    </section>\n\n    <section>\n      <h2>Dry good areas</h2>\n\n      <h3>Allowed</h3>\n      <ul>\n        <li>Unopened dry goods, e.g. rice, pasta, lentils</li>\n        <li>Unopened cans and jars</li>\n        <li>Unopened spices and condiments</li>\n      </ul>\n\n      <h3>Not allowed</h3>\n      <ul>\n        <li>Open bags without closing / sealing</li>\n        <li>Wet / damp packaging</li>\n        <li>Directly on the floor</li>\n        <li>Under sinks or near cleaning products</li>\n      </ul>\n    </section>\n  </main>\n</div>\n",
  "recipes.summary.html": "<!--\n  Community Kitchen – Recipes (Summary HTML Template)\n\n  - Keep placeholders intact (e.g., {{FIELD_ID}}).\n  - Designed for in-app summary; minimal styles and one small script for tabs.\n-->\n\n<style>\n  .ck-summary-template {\n    color: var(--text);\n    font-size: var(--ck-font-label);\n    margin: -8px;\n    font-weight: 400;\n    font-family: var(--ck-font-family, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif);\n  }\n\n  .ck-summary-template * {\n    box-sizing: border-box;\n    max-width: 100%;\n    font-weight: inherit;\n  }\n\n  .ck-hero {\n    padding: 6px 0 10px;\n    border-bottom: 1px solid var(--border);\n  }\n\n  .ck-hero-title {\n    font-size: var(--ck-font-control);\n    margin: 0 0 6px 0;\n    line-height: 1.1;\n  }\n\n  .ck-meta-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px 18px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n  .ck-meta-item {\n    display: grid;\n    grid-template-columns: 1fr 3fr;\n    column-gap: 8px;\n    align-items: baseline;\n    color: var(--text);\n    width: 100%;\n  }\n\n  .ck-meta-label {\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    color: var(--muted);\n  }\n\n  .ck-meta-value {\n    font-size: var(--ck-font-label);\n  }\n\n  .ck-status-pill {\n    display: inline;\n    align-items: center;\n    padding: 0;\n    border-radius: 0;\n    border: none;\n    background: transparent;\n    color: var(--text);\n    font-weight: 600;\n    font-size: calc(var(--ck-font-label) * 0.85);\n    line-height: 1;\n    white-space: nowrap;\n  }\n  .ck-status-pill[data-status-key=\"onClose\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n  .ck-status-pill[data-status-key=\"reOpened\"] {\n    border-color: var(--border);\n    background: transparent;\n    color: var(--text);\n  }\n\n  .ck-tabs {\n    margin-top: 10px;\n  }\n\n  .ck-tab-list {\n    display: flex;\n    width: 100%;\n    gap: 8px;\n    margin: 0 0 10px 0;\n    padding: 4px 6px;\n    background: transparent;\n    border-radius: 999px;\n  }\n\n  .ck-tab {\n    flex: 1 1 0;\n    border: 1px solid var(--border);\n    background: transparent;\n    border-radius: 999px;\n    padding: 8px 12px;\n    letter-spacing: 0;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.15s ease;\n    color: var(--text);\n  }\n\n  .ck-tab.is-active {\n    background: transparent;\n    border-color: var(--border);\n  }\n\n  .ck-tab-panel {\n    display: none;\n  }\n\n  .ck-tab-panel.is-active {\n    display: block;\n  }\n\n  .ck-panel-card {\n    padding: 6px 0 0;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    border: none;\n    background: transparent;\n  }\n\n  .ck-panel-title {\n    font-size: var(--ck-font-label);\n    margin: 0;\n    letter-spacing: 0;\n  }\n\n  .ck-ingredients-table {\n    width: 100%;\n    table-layout: fixed;\n    border-collapse: collapse;\n    margin: 0;\n  }\n\n  .ck-ingredients-table col.ck-col-ingredient {\n    width: 50%;\n  }\n\n  .ck-ingredients-table col.ck-col-quantity {\n    width: 25%;\n  }\n\n  .ck-ingredients-table col.ck-col-allergens {\n    width: 25%;\n  }\n\n  .ck-ingredients-table th,\n  .ck-ingredients-table td {\n    text-align: left;\n    padding: 6px 4px;\n    border-bottom: 1px solid var(--border);\n    vertical-align: top;\n    overflow-wrap: anywhere;\n  }\n\n  .ck-ingredients-table th {\n    font-size: calc(var(--ck-font-label) * 0.85);\n    letter-spacing: 0;\n    color: var(--muted);\n  }\n\n  .ck-category-title {\n    margin: 12px 0 6px;\n    letter-spacing: 0;\n    color: var(--text);\n  }\n\n  .ck-ingredients-table caption.ck-category-title {\n    text-align: left;\n    padding: 12px 0 6px;\n    margin: 0;\n    caption-side: top;\n  }\n\n  .ck-instructions {\n    line-height: 1.35;\n    white-space: pre-wrap;\n    background: transparent;\n    border: none;\n    border-radius: 0;\n    padding: 6px 0 0;\n  }\n\n  @media (max-width: 540px) {\n    .ck-meta-list {\n      flex-direction: column;\n      gap: 6px;\n    }\n    .ck-tab-list {\n      display: flex;\n    }\n  }\n</style>\n\n<div class=\"ck-summary-template\" data-ck-template=\"recipes\">\n  <div class=\"ck-hero\" role=\"banner\">\n    <ul class=\"ck-meta-list\">\n      <li class=\"ck-meta-item\">\n        <span class=\"ck-meta-label\">{{LABEL(QFTD5RD2EM)}}</span>\n        <span class=\"ck-meta-value\">{{QFTD5RD2EM}}</span>\n      </li>\n      <li class=\"ck-meta-item\">\n        <span class=\"ck-meta-label\">{{LABEL(DISH_TYPE)}}</span>\n        <span class=\"ck-meta-value\">{{DISH_TYPE}}</span>\n      </li>\n      <li class=\"ck-meta-item\">\n        <span class=\"ck-meta-label\">{{LABEL(NUM_PORTIONS)}}</span>\n        <span class=\"ck-meta-value\">{{NUM_PORTIONS}}</span>\n      </li>\n      <li class=\"ck-meta-item\">\n        <span class=\"ck-meta-label\">{{LABEL(STATUS)}}</span>\n      <span class=\"ck-meta-value\">\n        <span class=\"ck-status-pill\" data-status-key=\"{{STATUS_KEY}}\">{{DEFAULT(STATUS, \"—\")}}</span>\n      </span>\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"ck-tabs\" data-ck-tabs>\n    <div class=\"ck-tab-list\" role=\"tablist\" aria-label=\"Recipe details\">\n      <button class=\"ck-tab is-active\" type=\"button\" role=\"tab\" aria-selected=\"true\" aria-controls=\"ck-tab-ingredients\" id=\"ck-tab-btn-ingredients\" data-tab-target=\"ingredients\">\n        Ingredients\n      </button>\n      <button class=\"ck-tab\" type=\"button\" role=\"tab\" aria-selected=\"false\" aria-controls=\"ck-tab-instructions\" id=\"ck-tab-btn-instructions\" data-tab-target=\"instructions\">\n        Instructions\n      </button>\n    </div>\n\n    <div class=\"ck-tab-panel is-active\" role=\"tabpanel\" aria-labelledby=\"ck-tab-btn-ingredients\" id=\"ck-tab-ingredients\" data-tab-panel=\"ingredients\">\n      <div class=\"ck-panel-card\">\n        <table class=\"ck-ingredients-table\" aria-label=\"Ingredients by category\">\n          <colgroup>\n            <col class=\"ck-col-ingredient\" />\n            <col class=\"ck-col-quantity\" />\n            <col class=\"ck-col-allergens\" data-ck-allergen-col />\n          </colgroup>\n          <thead>\n            <tr>\n              <th scope=\"col\">{{GROUP_TABLE(Q65ILNUSGL.CAT)}}{{ORDER_BY(Q65ILNUSGL.CAT ASC, Q65ILNUSGL.ING ASC)}}</th>\n              <th scope=\"col\">{{LABEL(Q65ILNUSGL.QTY)}}</th>\n              <th scope=\"col\" class=\"ck-allergen-header\" data-ck-allergen-col>{{LABEL(Q65ILNUSGL.ALLERGEN)}}</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>{{Q65ILNUSGL.ING}}</td>\n              <td>{{Q65ILNUSGL.QTY}} {{Q65ILNUSGL.UNIT}}</td>\n              <td data-ck-allergen-cell>{{DEFAULT(Q65ILNUSGL.ALLERGEN, \"None\")}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <div class=\"ck-tab-panel\" role=\"tabpanel\" aria-labelledby=\"ck-tab-btn-instructions\" id=\"ck-tab-instructions\" data-tab-panel=\"instructions\" hidden>\n      <div class=\"ck-instructions\">{{DEFAULT(REC_INST, \"No instructions provided.\")}}</div>\n    </div>\n  </div>\n</div>\n\n<script>\n  (function () {\n    var root = document.querySelector('[data-ck-template=\"recipes\"]');\n    if (!root || root.getAttribute('data-ck-init') === '1') return;\n    root.setAttribute('data-ck-init', '1');\n\n    var tabs = root.querySelectorAll('[data-tab-target]');\n    var panels = root.querySelectorAll('[data-tab-panel]');\n    var activate = function (target) {\n      tabs.forEach(function (tab) {\n        var active = tab.getAttribute('data-tab-target') === target;\n        tab.classList.toggle('is-active', active);\n        tab.setAttribute('aria-selected', active ? 'true' : 'false');\n      });\n      panels.forEach(function (panel) {\n        var active = panel.getAttribute('data-tab-panel') === target;\n        panel.classList.toggle('is-active', active);\n        panel.hidden = !active;\n      });\n    };\n    tabs.forEach(function (tab) {\n      tab.addEventListener('click', function () {\n        activate(tab.getAttribute('data-tab-target'));\n      });\n    });\n\n  })();\n</script>\n"
};

export const getBundledHtmlTemplateRaw = (key: string): string | null => {
  const k = (key || '').toString().trim();
  if (!k) return null;
  const raw = (BUNDLED_HTML_TEMPLATES as any)[k];
  const text = raw === undefined || raw === null ? '' : raw.toString();
  return text.trim() ? text : null;
};

export const parseBundledHtmlTemplateId = (templateId: string): string | null => {
  const t = (templateId || '').toString().trim();
  if (!t) return null;
  const m = /^bundle:\s*(.+)$/i.exec(t);
  if (!m) return null;
  const key = (m[1] || '').toString().trim();
  return key || null;
};
